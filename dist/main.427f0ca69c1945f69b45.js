!function(e){function t(t){for(var r,o,l=t[0],s=t[1],u=t[2],d=0,p=[];d<l.length;d++)o=l[d],n[o]&&p.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);p.length;)p.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={0:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;i.push([156,1]),a()}({151:function(e,t,a){"use strict";var r=a(31);a.n(r).a},152:function(e,t,a){"use strict";var r=a(32);a.n(r).a},153:function(e,t,a){"use strict";var r=a(33);a.n(r).a},156:function(e,t,a){"use strict";a.r(t);var r=a(7),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"keep"}},[r("v-navigation-drawer",{staticClass:"grey lighten-4",attrs:{fixed:"","hide-overlay":"",left:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("div",{staticStyle:{height:"70px"}}),e._v(" "),r("v-list",{staticClass:"grey lighten-4",attrs:{dense:""}},[e._l(e.items,function(t,a){return[t.children?r("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-tile",[r("v-list-tile-content",[r("v-list-tile-title",[e._v("\n              "+e._s(t.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v(" "),e._l(t.children,function(t,a){return r("v-list-tile",{key:a,on:{click:function(e){}}},[r("v-list-tile-action",[r("v-icon",[e._v("\n          "+e._s(t.icon)+"\n        ")])],1),e._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[e._v("\n          "+e._s(t.text)+"\n        ")])],1)],1)})],2):t.heading?r("v-layout",{key:a,attrs:{row:"","align-center":""}},[r("v-flex",{attrs:{xs6:""}},[t.heading?r("v-subheader",[e._v("\n      "+e._s(t.heading)+"\n    ")]):e._e()],1)],1):t.divider?r("v-divider",{key:a,staticClass:"my-3",attrs:{dark:""}}):r("v-list-tile",{key:a,attrs:{to:t.route}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),r("v-list-tile-content",[r("v-list-tile-title",{staticClass:"grey--text"},[e._v("\n    "+e._s(t.text)+"\n  ")])],1)],1)]})],2)],1),e._v(" "),r("v-toolbar",{attrs:{dark:"",color:"#1c222d",app:"",absolute:"","clipped-left":"","clipped-right":""}},[r("v-layout",{attrs:{"align-center":"","justify-end":"","fill-height":""}},[r("v-toolbar-side-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),e._v(" "),r("img",{attrs:{height:"90%",src:a(79)}}),e._v(" "),r("v-spacer"),e._v(" "),e.activeUser?r("div",{staticClass:"pt-1 mr-1"},[e._v(e._s(e.activeUser.email))]):r("v-btn",{attrs:{small:""},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Log in")]),e._v(" "),e.activeUser?r("v-menu",{attrs:{"min-width":"300","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{fab:"",dark:"",flat:"",small:"",outline:""}},a),[r("v-icon",[e._v("person")])],1)]}}],null,!1,2642177997)},[e._v(" "),r("v-card",[r("v-list",[r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(e.activeUser.name))]),e._v(" "),r("v-list-tile-sub-title",[e._v("IPCC")])],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.logout}},[e._v("Logout")])],1)],1)],1):e._e()],1)],1),e._v(" "),r("v-content",[r("router-view",{staticStyle:{height:"100%"}})],1)],1)};n._withStripped=!0;var i=a(1),o=a.n(i),l=a(8),s=a.n(l),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",[a("v-card-title",[a("svg",{attrs:{width:"80vh",height:"200"},domProps:{innerHTML:e._s(e.editFeaturePath)}})]),e._v(" "),a("v-card-text",[e._l(e.surveyQuestions,function(t){return["text"==t.type?a("v-text-field",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"v-validate":"required|numeric","error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}}):"textarea"==t.type?a("v-textarea",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"v-validate":t.validation,"error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}}):"radio"==t.type?a("v-radio-group",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}},e._l(t.options,function(e){return a("v-radio",{attrs:{label:e.label,value:e.value}})}),1):e._e()]})],2),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.closeEditor}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveEditor}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("l-map",{attrs:{zoom:e.zoom,center:e.center,options:e.mapOptions,id:"main-map"},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},["detailed"==e.baseMap?a("l-protobuf",{attrs:{url:"https://maps.tilehosting.com/data/v3/{z}/{x}/{y}.pbf?key=ArAI1SXQTYA6P3mWFnDs",options:e.protobufOpts}}):e._e(),e._v(" "),"basic"==e.baseMap?a("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:"&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors",options:e.protobufOpts}}):e._e(),e._v(" "),e._l(e.surveyData,function(t,r){return e.survey?a("l-geo-json",{key:t._id,attrs:{options:e.geoJsonOptions,"options-style":t.feature.properties.style,geojson:t.feature}}):e._e()})],2),e._v(" "),a("v-toolbar",{staticStyle:{width:"300px","z-index":"1",position:"absolute",left:"none",top:"12px",right:"12px"},attrs:{"extension-height":e.layerPanelHeight}},[a("v-text-field",{attrs:{"hide-details":"","prepend-icon":"search","single-line":""}}),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOptionsDialog()}}},[a("v-icon",[e._v("more_vert")])],1),e._v(" "),e.optionsDialog?a("v-list",{staticStyle:{background:"none"},attrs:{slot:"extension",dense:""},slot:"extension"},[a("div",{staticClass:"px-4"},[a("div",[e._v("Base Map")]),e._v(" "),e._l(e.baseMaps,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},nativeOn:{click:function(a){return e.updateBaseMap(t.type,t.selected)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"map.selected"}})]})],2),e._v(" "),e._l(e.items,function(t,r){return t.children?a("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n            "+e._s(t.heading)+"\n          ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v(" "),e._l(t.children,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},on:{click:function(a){return e.getSurveyData(t.text)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"child.selected"}})]})],2):t.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[t.heading?a("v-subheader",[e._v("\n      "+e._s(t.heading)+"\n    ")]):e._e()],1)],1):t.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):e._e()}),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Survey Data")]),e._v(" "),a("v-list-tile",{staticClass:"mb-3"},[e.surveyNames?a("v-select",{attrs:{items:e.surveyNames,"menu-props":"auto",label:"Select a survey","hide-details":"","prepend-icon":"map","single-line":""},on:{input:function(t){return e.getSurveyData(t)}},model:{value:e.selectedSurvey,callback:function(t){e.selectedSurvey=t},expression:"selectedSurvey"}}):a("v-btn",{on:{click:e.getSurveyNames}},[e._v("Load surveys")])],1),e._v(" "),e.survey?[a("v-divider"),e._v(" "),a("v-subheader",[e._v("Survey key")]),e._v(" "),e._l(e.surveyKeyArray,function(t,r){return a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.color}},[e._v("label")])],1),e._v(" "),a("v-list-tile-content",[e._v("\n    "+e._s(t.text)+"\n  ")])],1)}),e._v(" "),a("v-list-tile",[a("v-select",{attrs:{items:e.languages,"menu-props":"auto",label:"Select language","single-line":""},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)]:e._e()],2):e._e()],1)],1)};u._withStripped=!0;var c=a(75),d=a.n(c),p=a(10),v=a.n(p),f=a(24),h=a.n(f),m=a(48),g=a.n(m),_=a(158),y=a(159),b=a(160),x=a(161),w=a(162),k=a(163),S=a(164),C=function(){var e=this.$createElement;return(this._self._c||e)("div")};C._withStripped=!0;var O=a(0),F=a.n(O);a(127);if(void 0===F.a)throw new Error("leaflet library must be installed in order to use vue2-leaflet-vectorgrid.");if(void 0===F.a.vectorGrid)throw new Error("leaflet.vectorgrid library must be installed in order to use vue2-leaflet-vectorgrid.");var D={props:{url:{type:String,required:!0},options:{type:Object,default:function(){return{}}}},watch:{url:function(){this.updateLayer()},options:function(){this.updateLayer()}},mounted:function(){this.mapObject=F.a.vectorGrid.protobuf(this.url,this.options),this.$parent._isMounted&&this.deferredMountedTo(this.$parent.mapObject)},beforeDestroy:function(){this.removeLayer()},methods:{deferredMountedTo:function(e){this.mapObject.addTo(e),this.attributionControl=e.attributionControl;for(var t=0;t<this.$children.length;t++)"function"==typeof this.$children[t].deferredMountedTo&&this.$children[t].deferredMountedTo(this.mapObject)},setAttribution:function(e,t){this.attributionControl.removeAttribution(t),this.attributionControl.addAttribution(e)},setToken:function(e){this.options.token=e},removeLayer:function(){this.$parent.mapObject.removeLayer(this.mapObject)},updateLayer:function(){this.removeLayer(),this.mapObject=F.a.vectorGrid.protobuf(this.url,this.options),this.deferredMountedTo(this.$parent.mapObject)}}},P=a(2),M=Object(P.a)(D,C,[],!1,null,null,null);M.options.__file="public/Vue2LeafletVectorGridProtobuf.vue";var $=M.exports,E=a(76),T=a.n(E)()({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.4},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.4},landcover:{fill:!0,weight:1,fillColor:"#53e033",color:"#53e033",fillOpacity:.1,opacity:.4},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.2,opacity:.4},park:{fill:!0,weight:1,fillColor:"#84ea5b",color:"#84ea5b",fillOpacity:.2,opacity:.4},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.2,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.2,opacity:.8}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.8}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[]),j=a(23),A=a.n(j).a.create({baseURL:"http://localhost:8080"==window.location.origin?"http://localhost:8081":window.location.origin,json:!0}),U={execute:function(e,t,a,n){var i=this;return s()(o.a.mark(function l(){var s;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=n||{},i.next=3,r.default.prototype.$auth.getAccessToken();case 3:return s=i.sent,i.abrupt("return",A({method:e,url:t,data:a,headers:v()({Authorization:"Bearer "+s},n)}));case 5:case"end":return i.stop()}},l,i)}))()},getSurveyData:function(e){return this.execute("get","/neighbourhood/"+e)},getSurveyNames:function(){return this.execute("get","/survey/buildings")},updateBuilding:function(e,t){return this.execute("put","/building/"+e,t)},uploadData:function(e,t){return this.execute("post","/create",e,t)}},N=a(49),B={name:"MapView",components:{LMap:_.a,LTileLayer:y.a,LMarker:b.a,LPopup:x.a,LTooltip:w.a,LProtobuf:$,LPolygon:k.a,LGeoJson:S.a},$_veeValidate:{validator:"new"},data:function(){var e=this;return{language:"ar",languages:["ar","en"],url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:14,currentCenter:L.latLng(31.778837,35.243452),showParagraph:!1,mapOptions:{zoomSnap:.5},geoJsonOptions:{onEachFeature:function(t,a){var r=e;a.on({click:function(e){r.openEditor(e)}})}},survey:!1,surveyData:[],surveyNames:!1,surveyOpacity:.5,editFeature:{},editFeatureDefaults:{},editDialog:!1,editFeaturePath:"",editFeatureViewBox:"",editIndex:0,editMapCenter:{lat:31.843725284728198,lng:35.22635998187065},editMapFeature:null,editMapZoom:16,optionsDialog:!1,selectedSurvey:null,baseMaps:[{text:"Basic",type:"basic",selected:!1},{text:"Detailed",type:"detailed",selected:!0}],baseMap:"detailed",surveyKey:{complete:{color:"#00C7FF",text:"Complete"},inProgress:{color:"#FFBD00",text:"In Progress"},notStarted:{color:"#FF0063",text:"Not Started"}}}},computed:{items:function(){return this.$auth.isAuthenticated(),[]},layerPanelHeight:function(){return this.survey?window.innerHeight-150:350},surveyKeyArray:function(){return g()(this.surveyKey)},protobufOpts:function(){var e=this.survey?this.surveyOpacity:1;return{vectorTileLayerStyles:T,maxNativeZoom:14,opacity:e}},tileOpts:function(){return{opacity:this.survey?this.surveyOpacity:1}},surveyQuestions:function(){return this.translate(N,"label",this.language)}},methods:{updateBaseMap:function(e,t){console.log(e,t),this.baseMap=t?e:"",this.baseMaps.forEach(function(a){return a.selected=a.type==e&&t})},zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){console.log(!0)},popup:function(e){console.log(e)},getCoordsPoint:function(e){var t=e.geometry.coordinates[0][0];return L.latLng(t[1],t[0])},getSurveyNames:function(){var e=this;U.getSurveyNames().then(function(t){console.log(t),e.surveyNames=t.data})},getSurveyData:function(e){var t=this;console.log(e),U.getSurveyData(e).then(function(e){console.log(e),e.data.forEach(function(e){e.feature.properties.Id=e._id,e.feature.properties.survey=e.feature.properties.survey||{}}),t.surveyData=e.data,t.styleSurveyData(),t.survey=!0,console.log(t.survey),t.center=t.editMapCenter=t.getCoordsPoint(e.data[0].feature)})},openEditor:function(e){var t=this;console.log(e.target.feature.properties),console.log(h()(e.target.feature.properties.survey).length,h()(this.editFeature).length),this.surveyData.forEach(function(a,r){a._id==e.target.feature.properties.Id&&(t.editIndex=r)}),v()(this.editFeature,this.surveyData[this.editIndex].feature.properties.survey),this.editDialog=!0;var a=e.target._path.outerHTML,r=1/this.currentZoom*1/this.currentZoom*1/this.currentZoom*1/this.currentZoom*2e5,n=(a=a.replace(">",'transform="translate() scale('+r+')">')).match(/d="M[\d\s-]*/)[0].slice(4).split(" ").map(function(e){return parseInt(e)});n[0]=-n[0]*r+200,n[1]=-n[1]*r+50,a=(a=a.replace("translate()","translate("+n[0]+" "+n[1]+")")).replace(/stroke-width="\d"/,'stroke-width="0.2"'),this.editFeaturePath=a,this.editMapFeature=e.target.feature,this.editMapCenter=this.getCoordsPoint(e.target.feature)},closeEditor:function(){this.editDialog=!1,console.log(this.editFeatureDefaults),v()(this.editFeature,this.editFeatureDefaults),this.styleSurveyData(),this.$validator.reset()},saveEditor:function(){this.$validator.validateAll().then(function(e){e?alert("success"):alert("error")}).catch(function(){});var e=this.surveyData[this.editIndex],t={lastEdited:{time:new Date,user:this.$auth.getUser().email}};v()(e.feature.properties.survey,t,this.editFeature),U.updateBuilding(e._id,e),this.closeEditor()},styleSurveyData:function(){var e=this,t=h()(this.editFeature).length;this.surveyData.forEach(function(a){var r=g()(a.feature.properties.survey).filter(function(e){return null!=e&&null!=e}),n=e.surveyKey.notStarted.color;r.length>t?n=e.surveyKey.complete.color:a.feature.properties.survey.lastEdited&&(n=e.surveyKey.inProgress.color),a.feature.properties.style={weight:2,color:n,opacity:.9,fillColor:n,fillOpacity:.5}})},toggleOptionsDialog:function(){this.optionsDialog=!this.optionsDialog,this.optionsDialog&&setTimeout(function(){var e=document.getElementsByClassName("v-toolbar__extension")[0].style;console.log(e),e.overflow="auto"},500)},translate:function(e,t,a){return function e(t,a,r){return t.reduce(function(t,n){if("object"===(void 0===n?"undefined":d()(n)))return n[a]=n[a+"_"+r],h()(n).forEach(function(t){Array.isArray(n[t])&&e(n[t],a,r)}),t.push(n),t},[])}(e,t,a)}},mounted:function(){window.screen.width<800&&this.updateBaseMap("basic",!0),this.getSurveyNames(),this.editFeature=N.reduce(function(e,t){return e[t.name]="",e},{}),this.editFeatureDefaults=v()({},this.editFeature)}},H=(a(151),Object(P.a)(B,u,[],!1,null,null,null));H.options.__file="src/components/MapView.vue";var I=H.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.calories))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.fat))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.carbs))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.protein))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.iron))])]}}])})};z._withStripped=!0;var G={data:function(){return{headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]}}},V=Object(P.a)(G,z,[],!1,null,null,null);V.options.__file="src/components/Viewer.vue";var K={name:"App",components:{MapView:I,Viewer:V.exports},data:function(){return{activeUser:null,authenticated:!1,drawer:!1,drawerIndicators:!1,layersPanel:!0,currentView:"map-view",layers:[],indicators:[{heading:"Demographics",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Persons",value:29e4},{name:"Median Age",value:25.4},{name:"Growth - natural (2018)",value:"3.5%"},{name:"Growth - migration (2018)",value:"4.5%"},{name:"Gender m/f",value:"49/50"}]},{heading:"Housing",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Housing Units",value:36700},{name:"Avg. Persons per Household",value:5.2},{name:"Avg. Rooms per Household",value:3.5},{name:"Avg. Area of Household",value:"70m2"}]},{heading:"Services",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Secondary Schools",value:3},{name:"Primary Schools",value:2},{name:"Kindergartens",value:5}]}]}},computed:{items:function(){var e=[{heading:"Layers",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{icon:"add",text:"Background"},{icon:"add",text:"Boundaries"},{icon:"add",text:"Buildings"},{icon:"add",text:"Roads"}]}],t=[{divider:!0},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"About"},{icon:"help",text:"Help"},{icon:"cloud_download",text:"Export Data"}];return this.activeUser?e.concat([{divider:!0},{icon:"cloud_upload",text:"Upload data",route:"upload"},{icon:"grid_on",text:"View surveys",route:"survey"}]).concat(t):e.concat(t)}},props:{source:String},created:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshActiveUser();case 2:case"end":return t.stop()}},t,e)}))()},watch:{$route:"refreshActiveUser"},methods:{login:function(){this.$auth.loginRedirect()},refreshActiveUser:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.getUser();case 2:e.activeUser=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.logout();case 2:return t.next=4,e.refreshActiveUser();case 4:e.$router.push("/");case 5:case"end":return t.stop()}},t,e)}))()},printUser:function(){console.log("USER"),console.log(this.activeUser),console.log(this.$auth)}}},Z=(a(152),Object(P.a)(K,n,[],!1,null,null,null));Z.options.__file="src/App.vue";var q=Z.exports,R=a(51),J=function(){var e=this.$createElement;this._self._c;return this._m(0)};J._withStripped=!0;a(153);var Q=Object(P.a)({},J,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hero"},[t("div",[t("h1",{staticClass:"display-3"},[this._v("Hello World")]),this._v(" "),t("p",{staticClass:"lead"},[this._v("This is the homepage of your vue app")])])])}],!1,null,null,null);Q.options.__file="src/components/Hello.vue";Q.exports;var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.processForm(t)}}},[a("h1",[e._v("Upload data")]),e._v(" "),a("div",{staticClass:"dropbox"},[a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:e.uploadFieldName,disabled:e.isSaving},on:{change:function(t){return e.filesChange()}}}),e._v(" "),e.isInitial?a("p",[e._v("\n        Drag your file(s) here to begin"),a("br"),e._v(" or click to browse\n      ")]):e._e(),e._v(" "),e.isSaving?a("v-select",{attrs:{name:"layer",items:e.dataTypes,label:"Layer"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}):e._e(),e._v(" "),e.isSaving?a("v-text-field",{attrs:{label:"Location"},model:{value:e.neighbourhood,callback:function(t){e.neighbourhood=t},expression:"neighbourhood"}}):e._e(),e._v(" "),a("v-btn",{staticClass:"button",attrs:{to:"map"}},[e._v("Back")]),e._v(" "),e.isSaving?a("v-btn",{staticClass:"button is-danger",attrs:{type:"submit"}},[e._v("Upload")]):e._e()],1)])])};W._withStripped=!0;var Y={data:function(){return{uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"GeoJSON",file:"",neighbourhood:"",dataType:"Buildings",dataTypes:["Buildings","Neighbourhood Boundary"]}},computed:{isInitial:function(){return 0===this.currentStatus},isSaving:function(){return 1===this.currentStatus},isSuccess:function(){return 2===this.currentStatus},isFailed:function(){return 3===this.currentStatus}},methods:{filesChange:function(){this.currentStatus=1,this.file=this.$refs.file.files[0],this.neighbourhood=this.file.name.split(".")[0]},processForm:function(){var e=new FormData;e.append("neighbourhood",this.neighbourhood),e.append("layer",this.dataType),e.append("file",this.file),e.append("file",this.file),console.log({fileData:this.file}),U.uploadData(e,{"Content-Type":"multipart/form-data"}).then(function(){console.log("SUCCESS!!")}).catch(function(){console.log("FAILURE!!")})}}},X=Object(P.a)(Y,W,[],!1,null,null,null);X.options.__file="src/components/Upload.vue";var ee=X.exports,te=function(){var e=this.$createElement;this._self._c;return this._m(0)};te._withStripped=!0;var ae={data:function(){return{loading:!1,posts:[],model:{}}},created:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.refreshPosts();case 1:case"end":return t.stop()}},t,e)}))()},methods:{refreshPosts:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,U.getPosts();case 3:e.posts=t.sent,e.loading=!1;case 5:case"end":return t.stop()}},t,e)}))()},populatePostToEdit:function(e){var t=this;return s()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.model=v()({},e);case 1:case"end":return a.stop()}},a,t)}))()},savePost:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.model.id){t.next=5;break}return t.next=3,U.updatePost(e.model.id,e.model);case 3:t.next=7;break;case 5:return t.next=7,U.createPost(e.model);case 7:return e.model={},t.next=10,e.refreshPosts();case 10:case"end":return t.stop()}},t,e)}))()},deletePost:function(e){var t=this;return s()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!confirm("Are you sure you want to delete this post?")){a.next=6;break}return t.model.id===e&&(t.model={}),a.next=4,U.deletePost(e);case 4:return a.next=6,t.refreshPosts();case 6:case"end":return a.stop()}},a,t)}))()}}},re=Object(P.a)(ae,te,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid mt-4"},[t("h1",{staticClass:"h1"},[this._v("Posts Manager")])])}],!1,null,null,null);re.options.__file="src/components/PostsManager.vue";var ne=re.exports,ie=a(50),oe=a.n(ie),le="http://localhost:8080"==window.location.origin?"http://localhost:8081":window.location.origin;console.log(le),r.default.use(oe.a,{client_id:"0oafa51gkZcH6RVN4356",issuer:"https://dev-160658.okta.com/oauth2/default",redirect_uri:window.location.origin+"/implicit/callback",scope:"openid profile email"}),r.default.use(R.a);var se=new R.a({mode:"history",routes:[{path:"/",component:I},{path:"/upload",component:ee},{path:"/map",component:I},{path:"/implicit/callback",component:oe.a.handleCallback()},{path:"/posts-manager",name:"PostsManager",component:ne,meta:{requiresAuth:!0}}]});se.beforeEach(r.default.prototype.$auth.authRedirectGuard());var ue=se,ce=a(78),de=a.n(ce),pe=(a(154),a(155),a(77));r.default.use(de.a),r.default.use(pe.a),r.default.config.productionTip=!0,new r.default({router:ue,render:function(e){return e(q)}}).$mount("#app")},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},49:function(e){e.exports=[{name:"building_use",label_en:"The current use of the building",label_ar:"الإستخدام الحالي للمبنى",validation:"'required'",type:"radio",options:[{value:1,label_en:"For housing only",label_ar:"للسكن فقط"},{value:2,label_en:"For housing and work",label_ar:"للسكن والعمل"},{value:3,label_en:"For work only (workshops and shops)",label_ar:"(للعمل فقط(مشاغل ودكاكين"},{value:4,label_en:"Housing and General Facility",label_ar:"سكن ومرفق عام"},{value:5,label_en:"General annex",label_ar:"مرفق عام"},{value:6,label_en:"Not used",label_ar:"غير مستخدم"},{value:7,label_en:"Hangars for animals and birds",label_ar:"حظائر للحيوانات والطيور"},{value:8,label_en:"For storage",label_ar:"للتخزين"}]},{name:"housing_units",label_en:"Number of housing units",label_ar:"عدد الشقق في المبنى",type:"text",validation:{required:!0}},{name:"building_stories",label_en:"Number of stories",label_ar:"عدد طوابق المبنى",type:"text",validation:"required|numeric|min:1"},{name:"building_type",label_en:"The type building",label_ar:"نوع المبنى",type:"radio",validation:"'required'",options:[{value:1,label_en:"Villa or detached",label_ar:".فيلا+بيت مستقل"},{value:2,label_en:"Apartment",label_ar:"عمارة"},{value:3,label_en:"Tent",label_ar:"خيم وبركسات"},{value:4,label_en:"Other",label_ar:"شيء آخر"}]},{name:"building_condition",label_en:"The state of the public building",label_ar:"حالة المبنى العامة ",type:"text",validation:"'required'"},{name:"notes",label_en:"Notes",label_ar:"ملاحظات",type:"textarea",validation:""}]},79:function(e,t,a){e.exports=a.p+"static/img/jerusalem_map_logo.6cc1a9a.svg"}});