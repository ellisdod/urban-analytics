!function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)o=s[d],n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={0:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([295,1]),a()}({286:function(t,e,a){"use strict";var r=a(33);a.n(r).a},287:function(t,e,a){"use strict";var r=a(34);a.n(r).a},288:function(t,e,a){"use strict";var r=a(35);a.n(r).a},290:function(t,e,a){var r={"./af":83,"./af.js":83,"./ar":84,"./ar-dz":85,"./ar-dz.js":85,"./ar-kw":86,"./ar-kw.js":86,"./ar-ly":87,"./ar-ly.js":87,"./ar-ma":88,"./ar-ma.js":88,"./ar-sa":89,"./ar-sa.js":89,"./ar-tn":90,"./ar-tn.js":90,"./ar.js":84,"./az":91,"./az.js":91,"./be":92,"./be.js":92,"./bg":93,"./bg.js":93,"./bm":94,"./bm.js":94,"./bn":95,"./bn.js":95,"./bo":96,"./bo.js":96,"./br":97,"./br.js":97,"./bs":98,"./bs.js":98,"./ca":99,"./ca.js":99,"./cs":100,"./cs.js":100,"./cv":101,"./cv.js":101,"./cy":102,"./cy.js":102,"./da":103,"./da.js":103,"./de":104,"./de-at":105,"./de-at.js":105,"./de-ch":106,"./de-ch.js":106,"./de.js":104,"./dv":107,"./dv.js":107,"./el":108,"./el.js":108,"./en-SG":109,"./en-SG.js":109,"./en-au":110,"./en-au.js":110,"./en-ca":111,"./en-ca.js":111,"./en-gb":112,"./en-gb.js":112,"./en-ie":113,"./en-ie.js":113,"./en-il":114,"./en-il.js":114,"./en-nz":115,"./en-nz.js":115,"./eo":116,"./eo.js":116,"./es":117,"./es-do":118,"./es-do.js":118,"./es-us":119,"./es-us.js":119,"./es.js":117,"./et":120,"./et.js":120,"./eu":121,"./eu.js":121,"./fa":122,"./fa.js":122,"./fi":123,"./fi.js":123,"./fo":124,"./fo.js":124,"./fr":125,"./fr-ca":126,"./fr-ca.js":126,"./fr-ch":127,"./fr-ch.js":127,"./fr.js":125,"./fy":128,"./fy.js":128,"./ga":129,"./ga.js":129,"./gd":130,"./gd.js":130,"./gl":131,"./gl.js":131,"./gom-latn":132,"./gom-latn.js":132,"./gu":133,"./gu.js":133,"./he":134,"./he.js":134,"./hi":135,"./hi.js":135,"./hr":136,"./hr.js":136,"./hu":137,"./hu.js":137,"./hy-am":138,"./hy-am.js":138,"./id":139,"./id.js":139,"./is":140,"./is.js":140,"./it":141,"./it-ch":142,"./it-ch.js":142,"./it.js":141,"./ja":143,"./ja.js":143,"./jv":144,"./jv.js":144,"./ka":145,"./ka.js":145,"./kk":146,"./kk.js":146,"./km":147,"./km.js":147,"./kn":148,"./kn.js":148,"./ko":149,"./ko.js":149,"./ku":150,"./ku.js":150,"./ky":151,"./ky.js":151,"./lb":152,"./lb.js":152,"./lo":153,"./lo.js":153,"./lt":154,"./lt.js":154,"./lv":155,"./lv.js":155,"./me":156,"./me.js":156,"./mi":157,"./mi.js":157,"./mk":158,"./mk.js":158,"./ml":159,"./ml.js":159,"./mn":160,"./mn.js":160,"./mr":161,"./mr.js":161,"./ms":162,"./ms-my":163,"./ms-my.js":163,"./ms.js":162,"./mt":164,"./mt.js":164,"./my":165,"./my.js":165,"./nb":166,"./nb.js":166,"./ne":167,"./ne.js":167,"./nl":168,"./nl-be":169,"./nl-be.js":169,"./nl.js":168,"./nn":170,"./nn.js":170,"./pa-in":171,"./pa-in.js":171,"./pl":172,"./pl.js":172,"./pt":173,"./pt-br":174,"./pt-br.js":174,"./pt.js":173,"./ro":175,"./ro.js":175,"./ru":176,"./ru.js":176,"./sd":177,"./sd.js":177,"./se":178,"./se.js":178,"./si":179,"./si.js":179,"./sk":180,"./sk.js":180,"./sl":181,"./sl.js":181,"./sq":182,"./sq.js":182,"./sr":183,"./sr-cyrl":184,"./sr-cyrl.js":184,"./sr.js":183,"./ss":185,"./ss.js":185,"./sv":186,"./sv.js":186,"./sw":187,"./sw.js":187,"./ta":188,"./ta.js":188,"./te":189,"./te.js":189,"./tet":190,"./tet.js":190,"./tg":191,"./tg.js":191,"./th":192,"./th.js":192,"./tl-ph":193,"./tl-ph.js":193,"./tlh":194,"./tlh.js":194,"./tr":195,"./tr.js":195,"./tzl":196,"./tzl.js":196,"./tzm":197,"./tzm-latn":198,"./tzm-latn.js":198,"./tzm.js":197,"./ug-cn":199,"./ug-cn.js":199,"./uk":200,"./uk.js":200,"./ur":201,"./ur.js":201,"./uz":202,"./uz-latn":203,"./uz-latn.js":203,"./uz.js":202,"./vi":204,"./vi.js":204,"./x-pseudo":205,"./x-pseudo.js":205,"./yo":206,"./yo.js":206,"./zh-cn":207,"./zh-cn.js":207,"./zh-hk":208,"./zh-hk.js":208,"./zh-tw":209,"./zh-tw.js":209};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=i,t.exports=n,n.id=290},291:function(t,e,a){"use strict";var r=a(36);a.n(r).a},292:function(t,e,a){"use strict";var r=a(37);a.n(r).a},295:function(t,e,a){"use strict";a.r(e);var r=a(7),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"keep"}},[a("v-navigation-drawer",{staticClass:"grey lighten-4",attrs:{fixed:"","hide-overlay":"",left:"",clipped:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("div",{staticStyle:{height:"70px"}}),t._v(" "),a("v-list",{staticClass:"grey lighten-4",attrs:{dense:""}},[t._l(t.items,function(e,r){return[e.children?a("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              "+t._s(e.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[t._v(" "),t._l(e.children,function(e,r){return a("v-list-tile",{key:r,on:{click:function(t){}}},[a("v-list-tile-action",[a("v-icon",[t._v("\n          "+t._s(e.icon)+"\n        ")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n          "+t._s(e.text)+"\n        ")])],1)],1)})],2):e.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",[t._v("\n      "+t._s(e.heading)+"\n    ")]):t._e()],1)],1):e.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):a("v-list-tile",{key:r,attrs:{to:e.route}},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text"},[t._v("\n    "+t._s(e.text)+"\n  ")])],1)],1)]})],2),t._v(" "),t.activeUser?a("div",{staticClass:"pt-1 mr-1"},[t._v(t._s(t.activeUser.email))]):a("v-btn",{attrs:{small:""},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Log in")]),t._v(" "),t.activeUser?a("v-menu",{attrs:{"min-width":"300","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{fab:"",dark:"",flat:"",small:"",outline:""}},r),[a("v-icon",[t._v("person")])],1)]}}],null,!1,2642177997)},[t._v(" "),a("v-card",[a("v-list",[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t.activeUser.name))]),t._v(" "),a("v-list-tile-sub-title",[t._v("IPCC")])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.logout}},[t._v("Logout")])],1)],1)],1):t._e()],1),t._v(" "),a("div",{attrs:{id:"navigation-btn"}},[a("v-btn",{attrs:{color:"",light:"",flat:"",fab:""},on:{click:function(e){t.drawer=!t.drawer}},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[a("v-icon",[t._v("menu")])],1)],1),t._v(" "),a("v-content",[a("router-view",{staticStyle:{height:"100%"}})],1)],1)};n._withStripped=!0;var i=a(2),o=a.n(i),s=a(9),l=a.n(s),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("l-map",{attrs:{zoom:t.$store.state.map.zoom,center:t.$store.state.map.center,options:t.mapOptions,id:"main-map"},on:{"update:center":t.centerUpdate,"update:zoom":t.zoomUpdate}},["detailed"==t.baseMap?a("l-protobuf",{attrs:{url:"https://maps.tilehosting.com/data/v3/{z}/{x}/{y}.pbf?key=ArAI1SXQTYA6P3mWFnDs",options:t.protobufOpts}}):t._e(),t._v(" "),"basic"==t.baseMap?a("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:"&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors",options:t.protobufOpts}}):t._e(),t._v(" "),t._l(t.surveyData,function(e,r){return t.survey?a("l-geo-json",{key:e._id,attrs:{options:t.geoJsonOptions,"options-style":e.feature.properties.style,geojson:e.feature}}):t._e()}),t._v(" "),t._l(t.$store.state.geo.areas,function(e,r){return t.layers.areas?a("l-geo-json",{key:e._id,attrs:{geojson:e.feature,"options-style":t.getAreaStyle(e.feature.properties.id)}}):t._e()})],2),t._v(" "),a("div",{attrs:{id:"map-menu"}},[a("v-menu",{attrs:{"min-width":"300px",flat:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{icon:""}},r),[a("v-icon",[t._v("more_vert")])],1)]}}])},[a("v-spacer"),t._v(" "),t._v(" "),a("v-list",{attrs:{dense:""}},[a("div",{staticClass:"px-4"},[a("div",[t._v("Base Map")]),t._v(" "),t._l(t.baseMaps,function(e,r){return[a("v-switch",{key:r,attrs:{label:e.text},nativeOn:{click:function(a){return t.updateBaseMap(e.type,e.selected)}},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"map.selected"}})]})],2),t._v(" "),t._l(t.items,function(e,r){return e.children?a("v-list-group",{key:e.text,attrs:{"prepend-icon":e.model?e.icon:e["icon-alt"],"append-icon":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[t._v("\n              "+t._s(e.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}},[t._v(" "),t._l(e.children,function(e,r){return[a("v-switch",{key:r,attrs:{label:e.text},on:{click:function(a){return t.getSurveyData(e.text)}},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"child.selected"}})]})],2):e.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[e.heading?a("v-subheader",[t._v("\n        "+t._s(e.heading)+"\n      ")]):t._e()],1)],1):e.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):t._e()}),t._v(" "),a("v-divider")],2)],1)],1)],1)};c._withStripped=!0;var u=a(22),d=a.n(u),p=a(38),f=a.n(p),v=a(39),h=a.n(v),_=a(210),m=a.n(_),g=a(296),y=a(297),b=a(298),w=a(299),x=a(300),k=a(301),j=a(302),C=function(){var t=this.$createElement;return(this._self._c||t)("div")};C._withStripped=!0;var $=a(1),O=a.n($);a(262);if(void 0===O.a)throw new Error("leaflet library must be installed in order to use vue2-leaflet-vectorgrid.");if(void 0===O.a.vectorGrid)throw new Error("leaflet.vectorgrid library must be installed in order to use vue2-leaflet-vectorgrid.");var S={props:{url:{type:String,required:!0},options:{type:Object,default:function(){return{}}}},watch:{url:function(){this.updateLayer()},options:function(){this.updateLayer()}},mounted:function(){this.mapObject=O.a.vectorGrid.protobuf(this.url,this.options),this.$parent._isMounted&&this.deferredMountedTo(this.$parent.mapObject)},beforeDestroy:function(){this.removeLayer()},methods:{deferredMountedTo:function(t){this.mapObject.addTo(t),this.attributionControl=t.attributionControl;for(var e=0;e<this.$children.length;e++)"function"==typeof this.$children[e].deferredMountedTo&&this.$children[e].deferredMountedTo(this.mapObject)},setAttribution:function(t,e){this.attributionControl.removeAttribution(e),this.attributionControl.addAttribution(t)},setToken:function(t){this.options.token=t},removeLayer:function(){this.$parent.mapObject.removeLayer(this.mapObject)},updateLayer:function(){this.removeLayer(),this.mapObject=O.a.vectorGrid.protobuf(this.url,this.options),this.deferredMountedTo(this.$parent.mapObject)}}},A=a(3),P=Object(A.a)(S,C,[],!1,null,null,null);P.options.__file="public/Vue2LeafletVectorGridProtobuf.vue";var D=P.exports,E=a(55),B=a.n(E),F=(B()({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.4},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.4},landcover:{fill:!0,weight:1,fillColor:"#53e033",color:"#53e033",fillOpacity:.1,opacity:.4},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.2,opacity:.4},park:{fill:!0,weight:1,fillColor:"#84ea5b",color:"#84ea5b",fillOpacity:.2,opacity:.4},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.2,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.2,opacity:.8}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.8}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[]),B()({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.2},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.2},landcover:{fill:!0,weight:1,fillColor:"#fafafa",color:"#fafafa",fillOpacity:.1,opacity:.2},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.1,opacity:.2},park:{fill:!0,weight:1,fillColor:"#f3f3f3",color:"#f3f3f3",fillOpacity:.1,opacity:.2},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.1,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.1,opacity:.4}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.1,opacity:.4}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[])),T=a(21),z=a.n(T).a.create({baseURL:"http://localhost:8080"==window.location.origin?"http://localhost:8081":window.location.origin,json:!0}),M={execute:function(t,e,a,n){var i=this;return l()(o.a.mark(function s(){var l;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=n||{},i.next=3,r.default.prototype.$auth.getAccessToken();case 3:return l=i.sent,i.abrupt("return",z({method:t,url:e,data:a,headers:d()({Authorization:"Bearer "+l},n)}));case 5:case"end":return i.stop()}},s,i)}))()},getSurveyData:function(t){return this.execute("get","/neighbourhood/"+t)},getSurveyNames:function(){return this.execute("get","/survey/buildings")},updateBuilding:function(t,e){return this.execute("put","/building/"+t,e)},uploadData:function(t,e,a){return this.execute("post","/create/"+e,t,a)},getIndicators:function(){return this.execute("get","/indicators")},getAreas:function(){return this.execute("get","/areas")}},U=a(54),I=a.n(U),N=a(56),H={name:"MapView",components:{LMap:g.a,LTileLayer:y.a,LMarker:b.a,LPopup:w.a,LTooltip:x.a,LProtobuf:D,LPolygon:k.a,LGeoJson:j.a},$_veeValidate:{validator:"new"},data:function(){var t=this;return{language:"ar",languages:["ar","en"],url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:14,currentCenter:L.latLng(31.778837,35.243452),showParagraph:!1,mapOptions:{zoomSnap:.5},geoJsonOptions:{onEachFeature:function(e,a){var r=t;a.on({click:function(t){r.openEditor(t)}})}},layers:{areas:!0},areaStyle:{2111:{weight:2,color:"#fff",opacity:.9,fillColor:"#fff",fillOpacity:.5}},survey:!1,surveyData:[],surveyNames:!1,surveyOpacity:.5,editFeature:{},editFeatureDefaults:{},editDialog:!1,editFeaturePath:"",editFeatureViewBox:"",editIndex:0,editMapCenter:{lat:31.843725284728198,lng:35.22635998187065},editMapFeature:null,editMapZoom:16,optionsDialog:!1,selectedSurvey:null,baseMaps:[{text:"Basic",type:"basic",selected:!1},{text:"Detailed",type:"detailed",selected:!0}],baseMap:"detailed",surveyKey:{complete:{color:"#00C7FF",text:"Complete"},inProgress:{color:"#FFBD00",text:"In Progress"},notStarted:{color:"#FF0063",text:"Not Started"}}}},computed:{items:function(){return this.$auth.isAuthenticated(),[]},layerPanelHeight:function(){return this.survey?window.innerHeight-150:350},surveyKeyArray:function(){return m()(this.surveyKey)},protobufOpts:function(){var t=this.survey?this.surveyOpacity:1;return{vectorTileLayerStyles:F,maxNativeZoom:14,opacity:t}},tileOpts:function(){return{opacity:this.survey?this.surveyOpacity:1}},surveyQuestions:function(){return this.translate(N,"label",this.language)},scale:function(){var t=this,e=this.$store.getters.dataByYear.map(function(e){return e[t.$store.state.map.indicator.figure]}).sort(function(t,e){return t-e});return{min:e[0],max:e[e.length-1]-e[0]}}},methods:{getAreaStyle:function(t){return this.$store.state.neighbourhood===t?{weight:2,color:"black",opacity:.6,fillColor:"#fff",fillOpacity:0}:{opacity:0,fillOpacity:0}},updateBaseMap:function(t,e){console.log(t,e),this.baseMap=e?t:"",this.baseMaps.forEach(function(a){return a.selected=a.type==t&&e})},zoomUpdate:function(t){this.currentZoom=t},centerUpdate:function(t){this.currentCenter=t},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){console.log(!0)},popup:function(t){console.log(t)},getCoordsPoint:function(t){var e=t.geometry.coordinates[0][0];return L.latLng(e[1],e[0])},getSurveyNames:function(){var t=this;M.getSurveyNames().then(function(e){t.surveyNames=e.data})},getSurveyData:function(t){var e=this;M.getSurveyData(t).then(function(t){t.data.forEach(function(t){t.feature.properties.Id=t._id,t.feature.properties.survey=t.feature.properties.survey||{}}),e.surveyData=t.data,e.styleSurveyData(),e.survey=!0,e.center=e.editMapCenter=e.getCoordsPoint(t.data[0].feature)})},toggleOptionsDialog:function(){this.optionsDialog=!this.optionsDialog,this.optionsDialog&&setTimeout(function(){var t=document.getElementsByClassName("v-toolbar__extension")[0].style;console.log(t),t.overflow="auto"},500)},translate:function(t,e,a){return function t(e,a,r){return e.reduce(function(e,n){if("object"===(void 0===n?"undefined":h()(n)))return n[a]=n[a+"_"+r],f()(n).forEach(function(e){Array.isArray(n[e])&&t(n[e],a,r)}),e.push(n),e},[])}(t,e,a)}},mounted:function(){window.screen.width<800&&this.updateBaseMap("basic",!0),this.getSurveyNames(),this.editFeature=N.reduce(function(t,e){return t[e.name]="",t},{}),this.editFeatureDefaults=d()({},this.editFeature)}},Y=(a(286),Object(A.a)(H,c,[],!1,null,null,null));Y.options.__file="src/components/MapView.vue";var G=Y.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("l-map",{attrs:{zoom:t.$store.state.navigator.zoom,center:t.$store.state.navigator.center,options:t.mapOptions,id:"navigation-map"}},t._l(t.$store.state.geo.areas,function(e,r){return t.layers.areas?a("l-geo-json",{key:e._id,attrs:{options:t.areasGeoJsonOptions,geojson:e.feature,"options-style":t.getAreaStyle(e.feature.properties.id)}}):t._e()}),1),t._v(" "),a("table",{attrs:{id:"navigator-key"}},[a("tr",[a("td",{staticClass:"title",attrs:{colspan:"2",height:"40px;"}},[t._v("\n        "+t._s(t.$store.state.navigator.indicator.name)+"\n      ")])]),t._v(" "),a("tr",[a("td",{staticClass:"key-gradient"}),t._v(" "),a("td",{staticClass:"key-figures"},[a("div",{staticClass:"key-max"},[t._v("\n          "+t._s(t.scale.max.toFixed(0))+"\n        ")]),t._v(" "),a("div",{staticClass:"key-min"},[t._v("\n          "+t._s(t.scale.min.toFixed(0))+"\n        ")])])])])],1)};V._withStripped=!0;var R={name:"MapView",components:{LMap:g.a,LTileLayer:y.a,LMarker:b.a,LPopup:w.a,LTooltip:x.a,LPolygon:k.a,LGeoJson:j.a},data:function(){var t=this;return{zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',showParagraph:!1,mapOptions:{zoomSnap:.5},areasGeoJsonOptions:{onEachFeature:function(e,a){var r=t;a.on({click:function(t){r.selectArea(t)}})}},layers:{areas:!0}}},computed:{scale:function(){var t=this,e=this.$store.getters.dataByYear.map(function(e){return parseInt(e[t.$store.state.navigator.indicator.figure])}).sort(function(t,e){return t-e});return{min:e[0],constant:e[e.length-1]-e[0],max:e[e.length-1]}}},methods:{getAreaStyle:function(t){var e=I.a.scale(["yellow","red"]),a=this.$store.getters.dataByYear.filter(function(e){return e.area_code===t})[0];return a?{weight:1,color:"#eee",opacity:1,fillColor:e((a[this.$store.state.navigator.indicator.figure]-this.scale.min)/this.scale.constant),fillOpacity:1}:{opacity:0,fillOpacity:0}},selectArea:function(t){this.$store.commit("UPDATE",{key:"neighbourhood",value:t.target.feature.properties.id}),this.$store.commit("UPDATE",{key:["map","zoom"],value:15}),console.log(t),console.log(t.target._map.getCenter()),this.$store.commit("UPDATE",{key:["map","center"],value:{lon:t.target.feature.properties.Centroids_x,lat:t.target.feature.properties.Centroids_y}})}},mounted:function(){var t=this;this.$store.watch(function(t,e){return t.neighbourhood},function(e,a){9999===e&&(t.$store.commit("UPDATE",{key:["map","zoom"],value:12}),t.$store.commit("UPDATE",{key:["map","center"],value:t.$store.state.map.defaultCenter}))}),this.$store.watch(function(t,e){return t.navigator.indicator.figure},function(e,a){t.$store.commit("UPDATE",{key:["navigator","zoom"],value:11}),t.$store.commit("UPDATE",{key:["navigator","center"],value:t.$store.state.naviagtor.defaultCenter})})}},J=(a(287),Object(A.a)(R,V,[],!1,null,null,null));J.options.__file="src/components/MapNavigator.vue";var q=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.calories))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.fat))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.carbs))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.protein))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.iron))])]}}])})};K._withStripped=!0;var Z={data:function(){return{headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]}}},Q=Object(A.a)(Z,K,[],!1,null,null,null);Q.options.__file="src/components/Viewer.vue";var W={name:"App",components:{MapView:G,Viewer:Q.exports},data:function(){return{activeUser:null,authenticated:!1,drawer:!1,drawerIndicators:!1,layersPanel:!0,currentView:"map-view",layers:[],indicators:[{heading:"Demographics",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Persons",value:29e4},{name:"Median Age",value:25.4},{name:"Growth - natural (2018)",value:"3.5%"},{name:"Growth - migration (2018)",value:"4.5%"},{name:"Gender m/f",value:"49/50"}]},{heading:"Housing",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Housing Units",value:36700},{name:"Avg. Persons per Household",value:5.2},{name:"Avg. Rooms per Household",value:3.5},{name:"Avg. Area of Household",value:"70m2"}]},{heading:"Services",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Secondary Schools",value:3},{name:"Primary Schools",value:2},{name:"Kindergartens",value:5}]}]}},computed:{items:function(){var t=[{heading:"Layers",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{icon:"add",text:"Background"},{icon:"add",text:"Boundaries"},{icon:"add",text:"Buildings"},{icon:"add",text:"Roads"}]}],e=[{divider:!0},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"About"},{icon:"help",text:"Help"},{icon:"cloud_download",text:"Export Data"},{icon:"bar_chart",text:"Urban Indicators",route:"indicators"}];return this.activeUser?t.concat([{divider:!0},{icon:"cloud_upload",text:"Upload data",route:"upload"},{icon:"grid_on",text:"View surveys",route:"survey"}]).concat(e):t.concat(e)}},props:{source:String},created:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.refreshActiveUser();case 2:case"end":return e.stop()}},e,t)}))()},watch:{$route:"refreshActiveUser"},methods:{login:function(){this.$auth.loginRedirect()},refreshActiveUser:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$auth.getUser();case 2:t.activeUser=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},logout:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$auth.logout();case 2:return e.next=4,t.refreshActiveUser();case 4:t.$router.push("/");case 5:case"end":return e.stop()}},e,t)}))()},printUser:function(){console.log("USER"),console.log(this.activeUser),console.log(this.$auth)}}},X=(a(288),Object(A.a)(W,n,[],!1,null,null,null));X.options.__file="src/App.vue";var tt=X.exports,et=a(58),at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"indicators-panel"}},[a("v-container",{attrs:{id:"indicators-header"}},[a("span",{staticClass:"title text-uppercase grey--text"},[t._v("East Jerusalem")]),t._v(" "),a("span",{staticClass:"title text-uppercase"},[t._v(" | URBAN INDICATORS")]),t._v(" "),a("v-layout",{attrs:{row:"",wrap:"","pb-4":"","pt-2":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"max-height":"300px","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"btn-title display-1 px-0 mx-0",attrs:{flat:""}},r),[t._v("\n              "+t._s(t.$store.getters.dataByNeighbourhood[0].name)+"\n            ")])]}}])},[t._v(" "),a("v-list",t._l(t.$store.getters.areaSelect,function(e,r){return a("v-list-tile",{key:r,on:{click:function(a){return t.$store.commit("UPDATE_AREA",e.area_code)}}},[a("v-list-tile-title",[t._v(t._s(e.name))])],1)}),1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs:""}},[a("v-select",{attrs:{items:t.$store.getters.years},model:{value:t.$store.state.year,callback:function(e){t.$set(t.$store.state,"year",e)},expression:"$store.state.year"}})],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.$store.state.theme.primary,round:"",depressed:"",dark:"",small:""},on:{click:function(t){}}},[t._v("East Jerusalem")])],1)],1),t._v(" "),a("v-container",{attrs:{id:"indicators-content"}},t._l(t.items,function(e){return a("div",[e.heading?a("indicator-heading",{attrs:{text:e.name}}):e.keystat?a("indicator-key-stat",{attrs:{name:e.name,figure:e.figure,description:e.description,unit:e.unit}}):e.blocks?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs8:"","py-4":"","pr-4":""}},[a("div",{staticClass:"title"},[t._v(t._s(e.left[0].name))]),t._v(" "),a("bar-vertical",{staticStyle:{"margin-left":"-20px",height:"320px"},attrs:{"x-labels":!0,"y-labels":!0,"chart-data":t.log({datasets:e.left[0].datasets,labels:e.left[0].labels})}})],1),t._v(" "),a("v-flex",{attrs:{xs4:""}},t._l(e.right,function(t){return a("indicator-key-stat",{attrs:{name:t.name,figure:t.figure,description:t.description,unit:t.unit,small:"true"}})}),1)],1):t._e()],1)}),0)],1),t._v(" "),a("map-view",{attrs:{id:"map-panel-main"}}),t._v(" "),a("map-navigator",{attrs:{id:"map-panel-navigator"}})],1)};at._withStripped=!0;var rt={props:{title:String,"x-labels":Boolean,"y-labels":Boolean,clickHandler:Boolean},data:function(){var t=this;return{options:{axes:{display:!1},scales:{yAxes:[{display:t.$props.yLabels,gridLines:{display:!1},scaleLabel:{display:t.$props.yLabels},ticks:{display:t.$props.yLabels}}],xAxes:[{display:t.$props.xLabels,gridLines:{display:!1},scaleLabel:{display:t.$props.xLabels},ticks:{display:t.$props.xLabels}}]},legend:{display:!1},title:{display:!0,text:t.$props.title||""},maintainAspectRatio:!1,onClick:function(e,a){if(t.$props.clickHandler){var r=t.$store.getters.dataByYear.filter(function(t){return t.name===a[0]._model.label})[0].area_code;t.$store.commit("UPDATE_AREA",r)}}}}}},nt=a(23),it=nt.c.reactiveProp,ot={extends:nt.b,mixins:[rt,it],mounted:function(){this.renderChart(this.chartData,this.options)}},st=nt.c.reactiveProp,lt={extends:nt.a,mixins:[st,rt],mounted:function(){this.renderChart(this.chartData,this.options)}},ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.noChart?a("div",{staticClass:"py-2"},[a("div",{staticClass:"title"},[t._v(t._s(t.name))]),t._v(" "),a("div",[a("span",{staticClass:"display-2"},[t._v(t._s(t.$store.getters.dataByHoodYear[t.figure]))]),t._v(" "),a("span",{staticClass:"display-1 ml-1"},[t._v(t._s(t.unit))])]),t._v(" "),a("div",{staticClass:"caption"},[t._v(t._s(t.description))])]):t.small?a("v-layout",{staticClass:"py-4 indicator-hover",attrs:{row:"",wrap:""},on:{click:function(e){return t.updateIndicator({figure:t.figure,name:t.name})}}},[a("div",[a("div",{staticClass:"title"},[t._v(t._s(t.name))]),t._v(" "),a("div",{staticStyle:{"overflow-x":"visible",display:"inline-block","white-space":"nowrap"}},[a("span",{staticClass:"display-1"},[t._v(t._s(t.$store.getters.dataByHoodYear[t.figure]))]),t._v(" "),t.unit?a("span",{staticClass:"headline ml-1"},[t._v(t._s(t.unit))]):t._e(),t._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("div",t._g({staticClass:"city-indicator-small"},r),[t._v(t._s(t.$store.getters.dataByCityYear[t.figure]))])]}}])},[t._v(" "),a("span",[t._v("East Jerusalem")])])],1),t._v(" "),a("div",{staticClass:"caption"},[t._v(t._s(t.description))])]),t._v(" "),a("v-flex",{attrs:{"px-0":""}},[a("bar-vertical",{staticClass:"bar-chart-minimal-small",staticStyle:{height:"80px","margin-top":"-30px"},attrs:{"chart-data":t.prepBarChartData(t.figure,t.$store.state.neighbourhood),"click-handler":!0,"x-labels":!1,"y-labels":!1}})],1)],1):a("v-layout",{staticClass:"py-3 indicator-hover",attrs:{row:"",wrap:""},on:{click:function(e){return t.updateIndicator({figure:t.figure,name:t.name})}}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"title"},[t._v(t._s(t.name))]),t._v(" "),a("div",{staticStyle:{"overflow-x":"visible",display:"inline-block","white-space":"nowrap"}},[a("span",{staticClass:"display-3 py-0"},[t._v(t._s(t.$store.getters.dataByHoodYear[t.figure]))]),t._v(" "),t.unit?a("span",{staticClass:"display-1 ml-1"},[t._v(t._s(t.unit))]):t._e(),t._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("div",t._g({staticClass:"city-indicator"},r),[t._v(t._s(t.$store.getters.dataByCityYear[t.figure]))])]}}])},[t._v(" "),a("span",[t._v("East Jerusalem")])])],1),t._v(" "),a("div",{staticClass:"caption"},[t._v(t._s(t.description))])]),t._v(" "),a("v-flex",{attrs:{xs12:"",sm8:""}},[a("bar-vertical",{staticClass:"bar-chart-minimal",attrs:{"chart-data":t.prepBarChartData(t.figure,t.$store.state.neighbourhood),"click-handler":!0,"x-labels":!1,"y-labels":!1}})],1)],1)};ct._withStripped=!0;var ut=a(18),dt=a.n(ut),pt={components:{BarVertical:lt},props:["name","figure","description","unit","noChart","small"],methods:{prepBarChartData:function(t,e){if(console.log(this.$store.getters.dataByYear),this.$store.getters.dataByYear){var a=this.$vuetify.theme.tertiary,r=this.$store.getters.dataByYear.sort(function(e,a){return e[t]-a[t]});return{labels:r.map(function(t){return t.name}),area_code:e,datasets:[{label:this.$props.name,backgroundColor:r.map(function(t){return t.area_code===e?a:dt.a.grey.lighten3}),data:r.map(function(e){return e[t]})}]}}},updateIndicator:function(t){console.log(t),this.$store.commit("UPDATE",{key:["navigator","indicator"],value:t})}}},ft=(a(291),Object(A.a)(pt,ct,[],!1,null,null,null));ft.options.__file="src/components/IndicatorKeyStat.vue";var vt=ft.exports,ht=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-5 mb-4"},[e("div",{staticClass:"grey--text text--darken-2",staticStyle:{"text-transform":"uppercase","font-size":"18px"}},[this._v(this._s(this.text))]),this._v(" "),e("v-divider",{staticClass:"my-2"})],1)};ht._withStripped=!0;var _t={props:["text"]},mt=Object(A.a)(_t,ht,[],!1,null,null,null);mt.options.__file="src/components/IndicatorHeading.vue";var gt={components:{MapView:G,MapNavigator:q,BarHorizontal:ot,BarVertical:lt,IndicatorKeyStat:vt,IndicatorHeading:mt.exports},data:function(){return{selectedData:this.$store.getters.selected}},computed:{items:function(){return r=this.$store,console.log("storedata",r.getters.dataByHoodYear.age_distribution),t=[{heading:!0,name_en:"Demographics",name_ar:""},{keystat:!0,name_en:"Population",name_ar:"",figure:"pop_year_end",description_en:""},{blocks:!0,left:[{type:"barchart",name_en:"Age Distribution (%)",name_ar:"",color:"",datasets:[{data:r.getters.dataByHoodYear.age_distribution,borderColor:"#000",type:"line",fill:!1},{label:"East Jerusalem Avg",data:r.getters.dataByCityYear.age_distribution,borderColor:r.state.theme.primary,type:"line",fill:!1}],labels:["0-4","5-14","15-24","25-44","45-64","65-74","75+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"age_median",name_en:"Median Age",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"dependency_youth",name_en:"Youth Dependency",name_ar:"",description_en:"Aged 24 or under",description_ar:"",unit:"%"}]},{keystat:!0,figure:"growth_total",name_en:"Population Growth",name_ar:"",description_en:"For year ("+r.state.year+")",description_ar:"",unit:"%"},{heading:!0,name_en:"Housing",name_ar:""},{keystat:!0,figure:"dwellings_total",name_en:"Housing Units",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"household_size",name_en:"Avg. Household Size",name_ar:"",description_en:"Persons per household",description_ar:"",unit:""},{blocks:!0,left:[{type:"barchart",name_en:"Dwelling Area Distribution %/m²",name_ar:"",color:"",datasets:[{data:r.getters.dataByHoodYear.dwelling_area_distribution,borderColor:"#000",type:"line",fill:!1},{data:r.getters.dataByCityYear.dwelling_area_distribution,borderColor:r.state.theme.primary,type:"line",fill:!1}],labels:["0-40","41-60","61-80","81-100","101-140","141+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"dwellings_new",name_en:"New Housing Units",name_ar:"",description_en:"Constructed in "+r.state.year,description_ar:"",unit:""},{keystat:!0,figure:"dwelling_growth",name_en:"Housing Units Growth",name_ar:"",description_en:"Annual increase in number of housing units",description_ar:"",unit:"%"}]}],e=["name","description"],a=this.$store.state.language,function t(e,a,r){return e.reduce(function(e,n){if("object"===(void 0===n?"undefined":h()(n)))return a.forEach(function(t){n[t+"_"+r]&&(n[t]=n[t+"_"+r])}),f()(n).forEach(function(e){Array.isArray(n[e])&&t(n[e],a,r)}),e.push(n),e},[])}(t,e="string"==typeof e?[e]:e,a);var t,e,a,r}},methods:{prepDstrChartData:function(t,e,a){var r={labels:e,datasets:t};return console.log("chartdata",r),r},log:function(t){return console.log("log",t),t}},mounted:function(){this.$store.commit("GET_INDICATORS"),console.log("databyneigh",this.$store.getters.dataByNeighbourhood())}},yt=(a(292),Object(A.a)(gt,at,[],!1,null,null,null));yt.options.__file="src/components/Indicators.vue";var bt=yt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.processForm(e)}}},[a("h1",[t._v("Upload data")]),t._v(" "),a("div",{staticClass:"dropbox"},[a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:t.uploadFieldName,disabled:t.isSaving},on:{change:function(e){return t.filesChange()}}}),t._v(" "),t.isInitial?a("p",[t._v("\n        Drag your file(s) here to begin"),a("br"),t._v(" or click to browse\n      ")]):t._e(),t._v(" "),t.isSaving?a("v-select",{attrs:{name:"layer",items:t.dataTypes,label:"Layer"},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}}):t._e(),t._v(" "),t.isSaving?a("v-select",{attrs:{name:"format",items:t.indicatorFormats,label:"Format"},model:{value:t.indicatorFormat,callback:function(e){t.indicatorFormat=e},expression:"indicatorFormat"}}):t._e(),t._v(" "),t.isSaving?a("v-text-field",{attrs:{label:"Location"},model:{value:t.neighbourhood,callback:function(e){t.neighbourhood=e},expression:"neighbourhood"}}):t._e(),t._v(" "),a("v-btn",{staticClass:"button",attrs:{to:"map"}},[t._v("Back")]),t._v(" "),t.isSaving?a("v-btn",{staticClass:"button is-danger",attrs:{type:"submit"}},[t._v("Upload")]):t._e()],1)])])};wt._withStripped=!0;var xt={data:function(){return{uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"GeoJSON",file:"",neighbourhood:"",dataType:"Buildings",dataTypes:["Buildings","Neighbourhoods","Indicators"],indicatorFormats:["geojson","json","csv"],indicatorFormat:null}},computed:{isInitial:function(){return 0===this.currentStatus},isSaving:function(){return 1===this.currentStatus},isSuccess:function(){return 2===this.currentStatus},isFailed:function(){return 3===this.currentStatus}},methods:{filesChange:function(){this.currentStatus=1,this.file=this.$refs.file.files[0],this.neighbourhood=this.file.name.split(".")[0],this.indicatorFormat=this.file.name.split(".")[1]},processForm:function(){var t=new FormData;t.append("neighbourhood",this.neighbourhood),t.append("layer",this.dataType),t.append("file",this.file),t.append("format",this.indicatorFormat),console.log({fileData:this.file}),M.uploadData(t,this.dataType,{"Content-Type":"multipart/form-data"}).then(function(){console.log("SUCCESS!!")}).catch(function(){console.log("FAILURE!!")})}}},kt=Object(A.a)(xt,wt,[],!1,null,null,null);kt.options.__file="src/components/Upload.vue";var jt=kt.exports,Ct=function(){var t=this.$createElement;this._self._c;return this._m(0)};Ct._withStripped=!0;var $t={data:function(){return{loading:!1,posts:[],model:{}}},created:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.refreshPosts();case 1:case"end":return e.stop()}},e,t)}))()},methods:{refreshPosts:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,M.getPosts();case 3:t.posts=e.sent,t.loading=!1;case 5:case"end":return e.stop()}},e,t)}))()},populatePostToEdit:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.model=d()({},t);case 1:case"end":return a.stop()}},a,e)}))()},savePost:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.model.id){e.next=5;break}return e.next=3,M.updatePost(t.model.id,t.model);case 3:e.next=7;break;case 5:return e.next=7,M.createPost(t.model);case 7:return t.model={},e.next=10,t.refreshPosts();case 10:case"end":return e.stop()}},e,t)}))()},deletePost:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!confirm("Are you sure you want to delete this post?")){a.next=6;break}return e.model.id===t&&(e.model={}),a.next=4,M.deletePost(t);case 4:return a.next=6,e.refreshPosts();case 6:case"end":return a.stop()}},a,e)}))()}}},Ot=Object(A.a)($t,Ct,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid mt-4"},[e("h1",{staticClass:"h1"},[this._v("Posts Manager")])])}],!1,null,null,null);Ot.options.__file="src/components/PostsManager.vue";var St=Ot.exports,At=a(57),Pt=a.n(At),Dt="http://localhost:8080"==window.location.origin?"http://localhost:8081":window.location.origin;console.log(Dt),r.default.use(Pt.a,{client_id:"***REMOVED***",issuer:"https://dev-160658.okta.com/oauth2/default",redirect_uri:window.location.origin+"/implicit/callback",scope:"openid profile email"}),r.default.use(et.a);var Lt=new et.a({mode:"history",routes:[{path:"/",component:G},{path:"/upload",component:jt},{path:"/map",component:G},{path:"/indicators",component:bt},{path:"/implicit/callback",component:Pt.a.handleCallback()},{path:"/posts-manager",name:"PostsManager",component:St,meta:{requiresAuth:!0}}]});Lt.beforeEach(r.default.prototype.$auth.authRedirectGuard());var Et=Lt,Bt=a(213),Ft=a.n(Bt),Tt=(a(293),a(294),a(212)),zt=a(59),Mt={primary:dt.a.orange.lighten1,secondary:dt.a.grey.lighten3,tertiary:"#000",error:"#b71c1c"};r.default.use(Ft.a,{options:{customProperties:!0},theme:Mt}),r.default.use(Tt.a),r.default.use(zt.a),r.default.config.productionTip=!0;var Ut=new zt.a.Store({state:{indicators:null,cityIndicators:null,neighbourhood:2511,year:2016,language:"en",languages:["ar","en"],theme:Mt,map:{zoom:14,center:O.a.latLng(31.778837,35.243452),defaultCenter:O.a.latLng(31.778837,35.243452)},navigator:{zoom:11,center:{lat:31.809357074964257,lng:35.18584083885216},defaultCenter:{lat:31.809357074964257,lng:35.18584083885216},indicator:{figure:"pop_year_end",name:"Population"}},geo:{areas:[]}},mutations:{GET_INDICATORS:function(t){M.getAreas().then(function(e){t.geo.areas=e.data}),M.getIndicators().then(function(e){var a=e.data.map(function(t){return t.dependency_youth=((t.age_0_4+t.age_5_14+t.age_15_24)/t.pop_year_end*100).toFixed(1),t.growth_total=(t.pop_growth_total/t.pop_year_end*100).toFixed(1),t.growth_natural=(t.pop_growth_natural/t.pop_year_end*100).toFixed(1),t.household_size=(t.pop_year_end/t.dwellings_total).toFixed(1),t.dwelling_density=(t.dwelling_area_avg/t.household_size).toFixed(1),t.prevyear=e.data.filter(function(e){return e.name===t.name&&e.year===t.year-1})[0],t.dwellings_new=t.prevyear?t.dwellings_total-t.prevyear.dwellings_total:null,t.dwelling_growth=(t.dwellings_new/t.dwellings_total*100).toFixed(1),t.age_distribution_labels=["age_0_4","age_5_14","age_15_24","age_25_44","age_45_64","age_65_74","age_75_"],t.age_distribution=t.age_distribution_labels.map(function(e){return t[e]/t.pop_year_end*100}),t.dwelling_area_distribution_labels=["dwellings_area_0_40","dwellings_area_41_60","dwellings_area_61_80","dwellings_area_81_100","dwellings_area_101_140","dwellings_area_141"],t.dwelling_area_distribution=t.age_distribution_labels.map(function(e){return t[e]/t.dwellings_total*100}),t});t.indicators=a.filter(function(t){return 9999!==t.area_code}),t.cityIndicators=a.filter(function(t){return 9999===t.area_code}),console.log(t.indicators),console.log("cityIndicators",t.cityIndicators)})},UPDATE:function(t,e){Array.isArray(e.key)?e.key.slice(0,e.key.length-1).reduce(function(t,e){return t&&"undefined"!==t[e]?t[e]:void 0},t)[e.key.slice(e.key.length-1,e.key.length)]=e.value:t[e.key]=e.value},UPDATE_AREA:function(t,e){var a=t.geo.areas.filter(function(t){return t.feature.properties.id==e})[0];console.log(a),t.neighbourhood=e,t.map.center={lon:a.feature.properties.Centroids_x,lat:a.feature.properties.Centroids_y}}},getters:{areaSelect:function(t,e){return t.indicators?e.dataByYear.concat(e.dataByCityYear):null},neighbourhoods:function(t,e){return t.indicators?t.indicators.reduce(function(t,e){return-1===t.indexOf(e.name)&&t.push(e.name),t},[]):null},years:function(t){return t.indicators?t.indicators.reduce(function(t,e){return-1===t.indexOf(e.year)&&t.push(e.year),t},[]):null},dataByYear:function(t){return t.indicators?t.indicators.filter(function(e){return e.year===t.year}):[]},dataByNeighbourhood:function(t){if(!t.indicators)return[];var e=t.indicators.filter(function(e){return e.area_code===t.neighbourhood});return e.length>0?e:t.cityIndicators},dataByHoodYear:function(t,e){return t.neighbourhood?t.indicators.filter(function(e){return e.area_code===t.neighbourhood&&e.year===t.year})[0]||e.dataByCityYear:{}},dataByCityYear:function(t){return t.cityIndicators.filter(function(e){return e.year===t.year})[0]}}});new r.default({router:Et,store:Ut,render:function(t){return t(tt)}}).$mount("#app")},33:function(t,e,a){},34:function(t,e,a){},35:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},56:function(t){t.exports=[{name:"building_use",label_en:"The current use of the building",label_ar:"الإستخدام الحالي للمبنى",validation:"'required'",type:"radio",options:[{value:1,label_en:"For housing only",label_ar:"للسكن فقط"},{value:2,label_en:"For housing and work",label_ar:"للسكن والعمل"},{value:3,label_en:"For work only (workshops and shops)",label_ar:"(للعمل فقط(مشاغل ودكاكين"},{value:4,label_en:"Housing and General Facility",label_ar:"سكن ومرفق عام"},{value:5,label_en:"General annex",label_ar:"مرفق عام"},{value:6,label_en:"Not used",label_ar:"غير مستخدم"},{value:7,label_en:"Hangars for animals and birds",label_ar:"حظائر للحيوانات والطيور"},{value:8,label_en:"For storage",label_ar:"للتخزين"}]},{name:"housing_units",label_en:"Number of housing units",label_ar:"عدد الشقق في المبنى",type:"text",validation:{required:!0}},{name:"building_stories",label_en:"Number of stories",label_ar:"عدد طوابق المبنى",type:"text",validation:"required|numeric|min:1"},{name:"building_type",label_en:"The type building",label_ar:"نوع المبنى",type:"radio",validation:"'required'",options:[{value:1,label_en:"Villa or detached",label_ar:".فيلا+بيت مستقل"},{value:2,label_en:"Apartment",label_ar:"عمارة"},{value:3,label_en:"Tent",label_ar:"خيم وبركسات"},{value:4,label_en:"Other",label_ar:"شيء آخر"}]},{name:"building_condition",label_en:"The state of the public building",label_ar:"حالة المبنى العامة ",type:"text",validation:"'required'"},{name:"notes",label_en:"Notes",label_ar:"ملاحظات",type:"textarea",validation:""}]}});