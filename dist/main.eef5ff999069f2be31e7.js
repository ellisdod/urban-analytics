!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={0:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;n.push([297,1]),a()}({25:function(e){e.exports=[{name:"building_use",label_en:"The current use of the building",label_ar:"الإستخدام الحالي للمبنى",validation:"'required'",type:"radio",options:[{value:1,label_en:"For housing only",label_ar:"للسكن فقط"},{value:2,label_en:"For housing and work",label_ar:"للسكن والعمل"},{value:3,label_en:"For work only (workshops and shops)",label_ar:"(للعمل فقط(مشاغل ودكاكين"},{value:4,label_en:"Housing and General Facility",label_ar:"سكن ومرفق عام"},{value:5,label_en:"General annex",label_ar:"مرفق عام"},{value:6,label_en:"Not used",label_ar:"غير مستخدم"},{value:7,label_en:"Hangars for animals and birds",label_ar:"حظائر للحيوانات والطيور"},{value:8,label_en:"For storage",label_ar:"للتخزين"}]},{name:"housing_units",label_en:"Number of housing units",label_ar:"عدد الشقق في المبنى",type:"text",validation:{required:!0}},{name:"building_stories",label_en:"Number of stories",label_ar:"عدد طوابق المبنى",type:"text",validation:"required|numeric|min:1"},{name:"building_type",label_en:"The type building",label_ar:"نوع المبنى",type:"radio",validation:"'required'",options:[{value:1,label_en:"Villa or detached",label_ar:".فيلا+بيت مستقل"},{value:2,label_en:"Apartment",label_ar:"عمارة"},{value:3,label_en:"Tent",label_ar:"خيم وبركسات"},{value:4,label_en:"Other",label_ar:"شيء آخر"}]},{name:"building_condition",label_en:"The state of the public building",label_ar:"حالة المبنى العامة ",type:"text",validation:"'required'"},{name:"notes",label_en:"Notes",label_ar:"ملاحظات",type:"textarea",validation:""}]},287:function(e,t,a){"use strict";var r=a(38);a.n(r).a},288:function(e,t,a){"use strict";var r=a(39);a.n(r).a},289:function(e,t,a){"use strict";var r=a(40);a.n(r).a},291:function(e,t,a){var r={"./af":86,"./af.js":86,"./ar":87,"./ar-dz":88,"./ar-dz.js":88,"./ar-kw":89,"./ar-kw.js":89,"./ar-ly":90,"./ar-ly.js":90,"./ar-ma":91,"./ar-ma.js":91,"./ar-sa":92,"./ar-sa.js":92,"./ar-tn":93,"./ar-tn.js":93,"./ar.js":87,"./az":94,"./az.js":94,"./be":95,"./be.js":95,"./bg":96,"./bg.js":96,"./bm":97,"./bm.js":97,"./bn":98,"./bn.js":98,"./bo":99,"./bo.js":99,"./br":100,"./br.js":100,"./bs":101,"./bs.js":101,"./ca":102,"./ca.js":102,"./cs":103,"./cs.js":103,"./cv":104,"./cv.js":104,"./cy":105,"./cy.js":105,"./da":106,"./da.js":106,"./de":107,"./de-at":108,"./de-at.js":108,"./de-ch":109,"./de-ch.js":109,"./de.js":107,"./dv":110,"./dv.js":110,"./el":111,"./el.js":111,"./en-SG":112,"./en-SG.js":112,"./en-au":113,"./en-au.js":113,"./en-ca":114,"./en-ca.js":114,"./en-gb":115,"./en-gb.js":115,"./en-ie":116,"./en-ie.js":116,"./en-il":117,"./en-il.js":117,"./en-nz":118,"./en-nz.js":118,"./eo":119,"./eo.js":119,"./es":120,"./es-do":121,"./es-do.js":121,"./es-us":122,"./es-us.js":122,"./es.js":120,"./et":123,"./et.js":123,"./eu":124,"./eu.js":124,"./fa":125,"./fa.js":125,"./fi":126,"./fi.js":126,"./fo":127,"./fo.js":127,"./fr":128,"./fr-ca":129,"./fr-ca.js":129,"./fr-ch":130,"./fr-ch.js":130,"./fr.js":128,"./fy":131,"./fy.js":131,"./ga":132,"./ga.js":132,"./gd":133,"./gd.js":133,"./gl":134,"./gl.js":134,"./gom-latn":135,"./gom-latn.js":135,"./gu":136,"./gu.js":136,"./he":137,"./he.js":137,"./hi":138,"./hi.js":138,"./hr":139,"./hr.js":139,"./hu":140,"./hu.js":140,"./hy-am":141,"./hy-am.js":141,"./id":142,"./id.js":142,"./is":143,"./is.js":143,"./it":144,"./it-ch":145,"./it-ch.js":145,"./it.js":144,"./ja":146,"./ja.js":146,"./jv":147,"./jv.js":147,"./ka":148,"./ka.js":148,"./kk":149,"./kk.js":149,"./km":150,"./km.js":150,"./kn":151,"./kn.js":151,"./ko":152,"./ko.js":152,"./ku":153,"./ku.js":153,"./ky":154,"./ky.js":154,"./lb":155,"./lb.js":155,"./lo":156,"./lo.js":156,"./lt":157,"./lt.js":157,"./lv":158,"./lv.js":158,"./me":159,"./me.js":159,"./mi":160,"./mi.js":160,"./mk":161,"./mk.js":161,"./ml":162,"./ml.js":162,"./mn":163,"./mn.js":163,"./mr":164,"./mr.js":164,"./ms":165,"./ms-my":166,"./ms-my.js":166,"./ms.js":165,"./mt":167,"./mt.js":167,"./my":168,"./my.js":168,"./nb":169,"./nb.js":169,"./ne":170,"./ne.js":170,"./nl":171,"./nl-be":172,"./nl-be.js":172,"./nl.js":171,"./nn":173,"./nn.js":173,"./pa-in":174,"./pa-in.js":174,"./pl":175,"./pl.js":175,"./pt":176,"./pt-br":177,"./pt-br.js":177,"./pt.js":176,"./ro":178,"./ro.js":178,"./ru":179,"./ru.js":179,"./sd":180,"./sd.js":180,"./se":181,"./se.js":181,"./si":182,"./si.js":182,"./sk":183,"./sk.js":183,"./sl":184,"./sl.js":184,"./sq":185,"./sq.js":185,"./sr":186,"./sr-cyrl":187,"./sr-cyrl.js":187,"./sr.js":186,"./ss":188,"./ss.js":188,"./sv":189,"./sv.js":189,"./sw":190,"./sw.js":190,"./ta":191,"./ta.js":191,"./te":192,"./te.js":192,"./tet":193,"./tet.js":193,"./tg":194,"./tg.js":194,"./th":195,"./th.js":195,"./tl-ph":196,"./tl-ph.js":196,"./tlh":197,"./tlh.js":197,"./tr":198,"./tr.js":198,"./tzl":199,"./tzl.js":199,"./tzm":200,"./tzm-latn":201,"./tzm-latn.js":201,"./tzm.js":200,"./ug-cn":202,"./ug-cn.js":202,"./uk":203,"./uk.js":203,"./ur":204,"./ur.js":204,"./uz":205,"./uz-latn":206,"./uz-latn.js":206,"./uz.js":205,"./vi":207,"./vi.js":207,"./x-pseudo":208,"./x-pseudo.js":208,"./yo":209,"./yo.js":209,"./zh-cn":210,"./zh-cn.js":210,"./zh-hk":211,"./zh-hk.js":211,"./zh-tw":212,"./zh-tw.js":212};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=n,e.exports=i,i.id=291},292:function(e,t,a){"use strict";var r=a(41);a.n(r).a},293:function(e,t,a){"use strict";var r=a(42);a.n(r).a},294:function(e,t,a){"use strict";var r=a(43);a.n(r).a},297:function(e,t,a){"use strict";a.r(t);var r=a(7),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"keep"}},[a("v-navigation-drawer",{staticClass:"grey lighten-4",attrs:{fixed:"","hide-overlay":"",left:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("div",{staticStyle:{height:"70px"}}),e._v(" "),a("v-list",{staticClass:"grey lighten-4",attrs:{dense:""}},[e._l(e.items,function(t,r){return[t.children?a("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n              "+e._s(t.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v(" "),e._l(t.children,function(t,r){return a("v-list-tile",{key:r,on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v("\n          "+e._s(t.icon)+"\n        ")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n          "+e._s(t.text)+"\n        ")])],1)],1)})],2):t.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[t.heading?a("v-subheader",[e._v("\n      "+e._s(t.heading)+"\n    ")]):e._e()],1)],1):t.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):a("v-list-tile",{key:r,attrs:{to:t.route}},[a("v-list-tile-action",[a("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text"},[e._v("\n    "+e._s(t.text)+"\n  ")])],1)],1)]})],2),e._v(" "),e.activeUser?a("div",{staticClass:"pt-1 mr-1"},[e._v(e._s(e.activeUser.email))]):a("v-btn",{attrs:{small:""},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Log in")]),e._v(" "),e.activeUser?a("v-menu",{attrs:{"min-width":"300","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{fab:"",dark:"",flat:"",small:"",outline:""}},r),[a("v-icon",[e._v("person")])],1)]}}],null,!1,2642177997)},[e._v(" "),a("v-card",[a("v-list",[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.activeUser.name))]),e._v(" "),a("v-list-tile-sub-title",[e._v("IPCC")])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.logout}},[e._v("Logout")])],1)],1)],1):e._e()],1),e._v(" "),a("div",{attrs:{id:"navigation-btn"}},[a("v-btn",{attrs:{color:"",light:"",flat:"",fab:""},on:{click:function(t){e.drawer=!e.drawer}}},[a("v-icon",[e._v("menu")])],1)],1),e._v(" "),a("v-content",[a("router-view",{staticStyle:{height:"100%"}})],1)],1)};i._withStripped=!0;var n=a(3),o=a.n(n),s=a(9),l=a.n(s),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("l-map",{attrs:{zoom:e.$store.state.map.zoom,center:e.$store.state.map.center,options:e.mapOptions,id:"main-map"},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},["detailed"==e.baseMap?a("l-protobuf",{attrs:{url:"https://maps.tilehosting.com/data/v3/{z}/{x}/{y}.pbf?key=ArAI1SXQTYA6P3mWFnDs",options:e.protobufOpts}}):e._e(),e._v(" "),"basic"==e.baseMap?a("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:"&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors",options:e.protobufOpts}}):e._e(),e._v(" "),e._l(e.surveyData,function(t,r){return e.survey?a("l-geo-json",{key:t._id,attrs:{options:e.geoJsonOptions,"options-style":t.feature.properties.style,geojson:t.feature}}):e._e()}),e._v(" "),e._l(e.$store.state.geo.areas,function(t,r){return e.layers.areas?a("l-geo-json",{key:t._id,attrs:{geojson:t.feature,"options-style":e.getAreaStyle(t.feature.properties.id)}}):e._e()})],2),e._v(" "),a("div",{attrs:{id:"map-menu"}},[a("v-menu",{attrs:{"min-width":"300px",flat:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("more_vert")])],1)]}}])},[a("v-spacer"),e._v(" "),e._v(" "),a("v-list",{attrs:{dense:""}},[a("div",{staticClass:"px-4"},[a("div",[e._v("Base Map")]),e._v(" "),e._l(e.baseMaps,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},nativeOn:{click:function(a){return e.updateBaseMap(t.type,t.selected)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"map.selected"}})]})],2),e._v(" "),e._l(e.items,function(t,r){return t.children?a("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n              "+e._s(t.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v(" "),e._l(t.children,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},on:{click:function(a){return e.getSurveyData(t.text)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"child.selected"}})]})],2):t.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[t.heading?a("v-subheader",[e._v("\n        "+e._s(t.heading)+"\n      ")]):e._e()],1)],1):t.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):e._e()}),e._v(" "),a("v-divider")],2)],1)],1)],1)};c._withStripped=!0;var u=a(10),d=a.n(u),p=a(21),f=a.n(p),v=a(24),h=a.n(v),m=a(31),y=a.n(m),g=a(298),_=a(299),b=a(300),w=a(301),x=a(302),k=a(303),j=a(304),C=function(){var e=this.$createElement;return(this._self._c||e)("div")};C._withStripped=!0;var S=a(1),$=a.n(S);a(263);if(void 0===$.a)throw new Error("leaflet library must be installed in order to use vue2-leaflet-vectorgrid.");if(void 0===$.a.vectorGrid)throw new Error("leaflet.vectorgrid library must be installed in order to use vue2-leaflet-vectorgrid.");var O={props:{url:{type:String,required:!0},options:{type:Object,default:function(){return{}}}},watch:{url:function(){this.updateLayer()},options:function(){this.updateLayer()}},mounted:function(){this.mapObject=$.a.vectorGrid.protobuf(this.url,this.options),this.$parent._isMounted&&this.deferredMountedTo(this.$parent.mapObject)},beforeDestroy:function(){this.removeLayer()},methods:{deferredMountedTo:function(e){this.mapObject.addTo(e),this.attributionControl=e.attributionControl;for(var t=0;t<this.$children.length;t++)"function"==typeof this.$children[t].deferredMountedTo&&this.$children[t].deferredMountedTo(this.mapObject)},setAttribution:function(e,t){this.attributionControl.removeAttribution(t),this.attributionControl.addAttribution(e)},setToken:function(e){this.options.token=e},removeLayer:function(){this.$parent.mapObject.removeLayer(this.mapObject)},updateLayer:function(){this.removeLayer(),this.mapObject=$.a.vectorGrid.protobuf(this.url,this.options),this.deferredMountedTo(this.$parent.mapObject)}}},D=a(2),A=Object(D.a)(O,C,[],!1,null,null,null);A.options.__file="public/Vue2LeafletVectorGridProtobuf.vue";var P=A.exports,F=a(58),E=a.n(F),M=(E()({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.4},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.4},landcover:{fill:!0,weight:1,fillColor:"#53e033",color:"#53e033",fillOpacity:.1,opacity:.4},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.2,opacity:.4},park:{fill:!0,weight:1,fillColor:"#84ea5b",color:"#84ea5b",fillOpacity:.2,opacity:.4},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.2,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.2,opacity:.8}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.8}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[]),E()({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.2},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.2},landcover:{fill:!0,weight:1,fillColor:"#fafafa",color:"#fafafa",fillOpacity:.1,opacity:.2},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.1,opacity:.2},park:{fill:!0,weight:1,fillColor:"#f3f3f3",color:"#f3f3f3",fillOpacity:.1,opacity:.2},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.1,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.1,opacity:.4}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.1,opacity:.4}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[])),T=a(12),B=a.n(T),z="http://localhost:8080"===window.location.origin?"http://localhost:8081":window.location.origin,U=B.a.create({baseURL:window.location.origin,json:!0}),I={execute:function(e,t,a,i){var n=this;return l()(o.a.mark(function s(){var l;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("making request from:",z),i=i||{},a=a||{},n.next=5,r.default.prototype.$auth.getAccessToken();case 5:return l=n.sent,n.abrupt("return",U({method:e,url:t,data:a,headers:d()({Authorization:"Bearer "+l,"Content-Type":"application/json"},i)}));case 7:case"end":return n.stop()}},s,n)}))()},getSurveyData:function(e){return this.execute("get","/neighbourhood/"+e)},getSurveyNames:function(){return this.execute("get","/survey/buildings")},updateBuilding:function(e,t){return this.execute("put","/building/"+e,t)},uploadData:function(e,t,a){return this.execute("post","/create/"+t,e,a)},getIndicators:function(){return this.execute("get","/indicators")},getAreas:function(){return this.execute("get","/areas")}},N=a(30),H=a.n(N),Y=a(25),G={name:"MapView",components:{LMap:g.a,LTileLayer:_.a,LMarker:b.a,LPopup:w.a,LTooltip:x.a,LProtobuf:P,LPolygon:k.a,LGeoJson:j.a},$_veeValidate:{validator:"new"},data:function(){var e=this;return{language:"ar",languages:["ar","en"],url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:14,currentCenter:L.latLng(31.778837,35.243452),showParagraph:!1,mapOptions:{zoomSnap:.5},geoJsonOptions:{onEachFeature:function(t,a){var r=e;a.on({click:function(e){r.openEditor(e)}})}},layers:{areas:!0},areaStyle:{2111:{weight:2,color:"#fff",opacity:.9,fillColor:"#fff",fillOpacity:.5}},survey:!1,surveyData:[],surveyNames:!1,surveyOpacity:.5,editFeature:{},editFeatureDefaults:{},editDialog:!1,editFeaturePath:"",editFeatureViewBox:"",editIndex:0,editMapCenter:{lat:31.843725284728198,lng:35.22635998187065},editMapFeature:null,editMapZoom:16,optionsDialog:!1,selectedSurvey:null,baseMaps:[{text:"Basic",type:"basic",selected:!1},{text:"Detailed",type:"detailed",selected:!0}],baseMap:"detailed",surveyKey:{complete:{color:"#00C7FF",text:"Complete"},inProgress:{color:"#FFBD00",text:"In Progress"},notStarted:{color:"#FF0063",text:"Not Started"}}}},computed:{items:function(){return this.$auth.isAuthenticated(),[]},layerPanelHeight:function(){return this.survey?window.innerHeight-150:350},surveyKeyArray:function(){return y()(this.surveyKey)},protobufOpts:function(){var e=this.survey?this.surveyOpacity:1;return{vectorTileLayerStyles:M,maxNativeZoom:14,opacity:e}},tileOpts:function(){return{opacity:this.survey?this.surveyOpacity:1}},surveyQuestions:function(){return this.translate(Y,"label",this.language)},scale:function(){var e=this,t=this.$store.getters.dataByYear.map(function(t){return t[e.$store.state.map.indicator.figure]}).sort(function(e,t){return e-t});return{min:t[0],max:t[t.length-1]-t[0]}}},methods:{getAreaStyle:function(e){return this.$store.state.neighbourhood===e?{weight:2,color:"black",opacity:.6,fillColor:"#fff",fillOpacity:0}:{opacity:0,fillOpacity:0}},updateBaseMap:function(e,t){console.log(e,t),this.baseMap=t?e:"",this.baseMaps.forEach(function(a){return a.selected=a.type==e&&t})},zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){console.log(!0)},popup:function(e){console.log(e)},getCoordsPoint:function(e){var t=e.geometry.coordinates[0][0];return L.latLng(t[1],t[0])},getSurveyNames:function(){var e=this;I.getSurveyNames().then(function(t){e.surveyNames=t.data})},getSurveyData:function(e){var t=this;I.getSurveyData(e).then(function(e){e.data.forEach(function(e){e.feature.properties.Id=e._id,e.feature.properties.survey=e.feature.properties.survey||{}}),t.surveyData=e.data,t.styleSurveyData(),t.survey=!0,t.center=t.editMapCenter=t.getCoordsPoint(e.data[0].feature)})},toggleOptionsDialog:function(){this.optionsDialog=!this.optionsDialog,this.optionsDialog&&setTimeout(function(){var e=document.getElementsByClassName("v-toolbar__extension")[0].style;console.log(e),e.overflow="auto"},500)},translate:function(e,t,a){return function e(t,a,r){return t.reduce(function(t,i){if("object"===(void 0===i?"undefined":h()(i)))return i[a]=i[a+"_"+r],f()(i).forEach(function(t){Array.isArray(i[t])&&e(i[t],a,r)}),t.push(i),t},[])}(e,t,a)}},mounted:function(){window.screen.width<800&&this.updateBaseMap("basic",!0),this.getSurveyNames(),this.editFeature=Y.reduce(function(e,t){return e[t.name]="",e},{}),this.editFeatureDefaults=d()({},this.editFeature)}},J=(a(287),Object(D.a)(G,c,[],!1,null,null,null));J.options.__file="src/components/MapView.vue";var V=J.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("l-map",{attrs:{zoom:e.$store.state.navigator.zoom,center:e.$store.state.navigator.center,options:e.mapOptions,id:"navigation-map"}},e._l(e.$store.state.geo.areas,function(t,r){return e.layers.areas?a("l-geo-json",{key:t._id,attrs:{options:e.areasGeoJsonOptions,geojson:t.feature,"options-style":e.getAreaStyle(t.feature.properties.id)}}):e._e()}),1),e._v(" "),a("table",{attrs:{id:"navigator-key"}},[a("tr",[a("td",{staticClass:"title",attrs:{colspan:"2",height:"40px;"}},[e._v("\n        "+e._s(e.$store.state.navigator.indicator.name)+"\n      ")])]),e._v(" "),a("tr",[a("td",{staticClass:"key-gradient"}),e._v(" "),a("td",{staticClass:"key-figures"},[a("div",{staticClass:"key-max"},[e._v("\n          "+e._s(e.scale.max.toFixed(0))+"\n        ")]),e._v(" "),a("div",{staticClass:"key-min"},[e._v("\n          "+e._s(e.scale.min.toFixed(0))+"\n        ")])])])])],1)};R._withStripped=!0;var K={name:"MapView",components:{LMap:g.a,LTileLayer:_.a,LMarker:b.a,LPopup:w.a,LTooltip:x.a,LPolygon:k.a,LGeoJson:j.a},data:function(){var e=this;return{zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',showParagraph:!1,mapOptions:{zoomSnap:.5},areasGeoJsonOptions:{onEachFeature:function(t,a){var r=e;a.on({click:function(e){r.selectArea(e)}})}},layers:{areas:!0}}},computed:{scale:function(){var e=this,t=this.$store.getters.dataByYear.map(function(t){return parseInt(t[e.$store.state.navigator.indicator.figure])}).sort(function(e,t){return e-t});return{min:t[0],constant:t[t.length-1]-t[0],max:t[t.length-1]}}},methods:{getAreaStyle:function(e){var t=H.a.scale(["yellow","red"]),a=this.$store.getters.dataByYear.filter(function(t){return t.area_code===e})[0];return a?{weight:1,color:"#eee",opacity:1,fillColor:t((a[this.$store.state.navigator.indicator.figure]-this.scale.min)/this.scale.constant),fillOpacity:1}:{opacity:0,fillOpacity:0}},selectArea:function(e){this.$store.commit("UPDATE",{key:"neighbourhood",value:e.target.feature.properties.id}),this.$store.commit("UPDATE",{key:["map","zoom"],value:15}),console.log(e),console.log(e.target._map.getCenter()),this.$store.commit("UPDATE",{key:["map","center"],value:{lon:e.target.feature.properties.Centroids_x,lat:e.target.feature.properties.Centroids_y}})}},mounted:function(){var e=this;this.$store.watch(function(e,t){return e.neighbourhood},function(t,a){9999===t&&(e.$store.commit("UPDATE",{key:["map","zoom"],value:12}),e.$store.commit("UPDATE",{key:["map","center"],value:e.$store.state.map.defaultCenter}))}),this.$store.watch(function(e,t){return e.navigator.indicator.figure},function(t,a){e.$store.commit("UPDATE",{key:["navigator","zoom"],value:11}),e.$store.commit("UPDATE",{key:["navigator","center"],value:e.$store.state.naviagtor.defaultCenter})})}},Z=(a(288),Object(D.a)(K,R,[],!1,null,null,null));Z.options.__file="src/components/MapNavigator.vue";var q=Z.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.calories))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.fat))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.carbs))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.protein))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.iron))])]}}])})};Q._withStripped=!0;var W={data:function(){return{headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]}}},X=Object(D.a)(W,Q,[],!1,null,null,null);X.options.__file="src/components/Viewer.vue";var ee={name:"App",components:{MapView:V,Viewer:X.exports},data:function(){return{activeUser:null,authenticated:!1,drawer:!1,drawerIndicators:!1,layersPanel:!0,currentView:"map-view",layers:[],indicators:[{heading:"Demographics",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Persons",value:29e4},{name:"Median Age",value:25.4},{name:"Growth - natural (2018)",value:"3.5%"},{name:"Growth - migration (2018)",value:"4.5%"},{name:"Gender m/f",value:"49/50"}]},{heading:"Housing",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Housing Units",value:36700},{name:"Avg. Persons per Household",value:5.2},{name:"Avg. Rooms per Household",value:3.5},{name:"Avg. Area of Household",value:"70m2"}]},{heading:"Services",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{name:"Secondary Schools",value:3},{name:"Primary Schools",value:2},{name:"Kindergartens",value:5}]}]}},computed:{items:function(){var e=[{heading:"Layers",icon:"keyboard_arrow_up","icon-alt":"keyboard_arrow_down",text:"More",model:!1,children:[{icon:"add",text:"Background"},{icon:"add",text:"Boundaries"},{icon:"add",text:"Buildings"},{icon:"add",text:"Roads"}]}],t=[{divider:!0},{icon:"settings",text:"Settings"},{icon:"chat_bubble",text:"About"},{icon:"help",text:"Help"},{icon:"cloud_download",text:"Export Data"},{icon:"bar_chart",text:"Urban Indicators",route:"indicators"}];return this.activeUser?e.concat([{divider:!0},{icon:"cloud_upload",text:"Upload data",route:"upload"},{icon:"grid_on",text:"View surveys",route:"survey"}]).concat(t):e.concat(t)}},props:{source:String},created:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshActiveUser();case 2:case"end":return t.stop()}},t,e)}))()},watch:{$route:"refreshActiveUser"},methods:{login:function(){this.$auth.loginRedirect()},refreshActiveUser:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.getUser();case 2:e.activeUser=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.logout();case 2:return t.next=4,e.refreshActiveUser();case 4:e.$router.push("/");case 5:case"end":return t.stop()}},t,e)}))()},printUser:function(){console.log("USER"),console.log(this.activeUser),console.log(this.$auth)}}},te=(a(289),Object(D.a)(ee,i,[],!1,null,null,null));te.options.__file="src/App.vue";var ae=te.exports,re=a(60),ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"indicators-panel"}},[a("v-container",{attrs:{id:"indicators-header"}},[a("span",{staticClass:"title text-uppercase grey--text"},[e._v("East Jerusalem")]),e._v(" "),a("span",{staticClass:"title text-uppercase"},[e._v(" | URBAN INDICATORS")]),e._v(" "),a("v-btn",{on:{click:function(t){return e.testServer()}}},[e._v("test")]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:"","pb-4":"","pt-2":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"max-height":"300px","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.getters.dataByNeighbourhood?a("v-btn",e._g({staticClass:"btn-title display-1 px-0 mx-0",attrs:{flat:""}},r),[e._v("\n              "+e._s(e.$store.getters.dataByNeighbourhood[0].name)+"\n            ")]):e._e()]}}])},[e._v(" "),a("v-list",e._l(e.$store.getters.areaSelect,function(t,r){return a("v-list-tile",{key:r,on:{click:function(a){return e.$store.commit("UPDATE_AREA",t.area_code)}}},[a("v-list-tile-title",[e._v(e._s(t.name))])],1)}),1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs:""}},[a("v-select",{attrs:{items:e.$store.getters.years},model:{value:e.$store.state.year,callback:function(t){e.$set(e.$store.state,"year",t)},expression:"$store.state.year"}})],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.$store.state.theme.primary,round:"",depressed:"",dark:"",small:""},on:{click:function(e){}}},[e._v("East Jerusalem")])],1)],1),e._v(" "),a("v-container",{attrs:{id:"indicators-content"}},e._l(e.items,function(t){return a("div",[t.heading?a("indicator-heading",{attrs:{text:t.name}}):t.keystat?a("indicator-key-stat",{attrs:{name:t.name,figure:t.figure,description:t.description,unit:t.unit}}):t.blocks?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs8:"","py-4":"","pr-4":""}},[a("div",{staticClass:"title"},[e._v(e._s(t.left[0].name))]),e._v(" "),a("bar-vertical",{staticStyle:{"margin-left":"-20px",height:"320px"},attrs:{"x-labels":!0,"y-labels":!0,"chart-data":e.log({datasets:t.left[0].datasets,labels:t.left[0].labels})}})],1),e._v(" "),a("v-flex",{attrs:{xs4:""}},e._l(t.right,function(e){return a("indicator-key-stat",{attrs:{name:e.name,figure:e.figure,description:e.description,unit:e.unit,small:"true"}})}),1)],1):e._e()],1)}),0)],1),e._v(" "),a("map-view",{attrs:{id:"map-panel-main"}}),e._v(" "),a("map-navigator",{attrs:{id:"map-panel-navigator"}})],1)};ie._withStripped=!0;var ne={props:{title:String,"x-labels":Boolean,"y-labels":Boolean,clickHandler:Boolean},data:function(){var e=this;return{options:{axes:{display:!1},scales:{yAxes:[{display:e.$props.yLabels,gridLines:{display:!1},scaleLabel:{display:e.$props.yLabels},ticks:{display:e.$props.yLabels}}],xAxes:[{display:e.$props.xLabels,gridLines:{display:!1},scaleLabel:{display:e.$props.xLabels},ticks:{display:e.$props.xLabels}}]},legend:{display:!1},title:{display:!0,text:e.$props.title||""},maintainAspectRatio:!1,onClick:function(t,a){if(e.$props.clickHandler){var r=e.$store.getters.dataByYear.filter(function(e){return e.name===a[0]._model.label})[0].area_code;e.$store.commit("UPDATE_AREA",r)}}}}}},oe=a(26),se=oe.c.reactiveProp,le={extends:oe.b,mixins:[ne,se],mounted:function(){this.renderChart(this.chartData,this.options)}},ce=oe.c.reactiveProp,ue={extends:oe.a,mixins:[ce,ne],mounted:function(){this.renderChart(this.chartData,this.options)}},de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.noChart?a("div",{staticClass:"py-2"},[a("div",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),a("div",[a("span",{staticClass:"display-2"},[e._v(e._s(e.$store.getters.dataByHoodYear[e.figure]))]),e._v(" "),a("span",{staticClass:"display-1 ml-1"},[e._v(e._s(e.unit))])]),e._v(" "),a("div",{staticClass:"caption"},[e._v(e._s(e.description))])]):e.small?a("v-layout",{staticClass:"py-4 indicator-hover",attrs:{row:"",wrap:""},on:{click:function(t){return e.updateIndicator({figure:e.figure,name:e.name})}}},[a("div",[a("div",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),a("div",{staticStyle:{"overflow-x":"visible",display:"inline-block","white-space":"nowrap"}},[a("span",{staticClass:"display-1"},[e._v(e._s(e.$store.getters.dataByHoodYear[e.figure]))]),e._v(" "),e.unit?a("span",{staticClass:"headline ml-1"},[e._v(e._s(e.unit))]):e._e(),e._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",e._g({staticClass:"city-indicator-small"},r),[e._v(e._s(e.$store.getters.dataByCityYear[e.figure]))])]}}])},[e._v(" "),a("span",[e._v("East Jerusalem")])])],1),e._v(" "),a("div",{staticClass:"caption"},[e._v(e._s(e.description))])]),e._v(" "),a("v-flex",{attrs:{"px-0":""}},[a("bar-vertical",{staticClass:"bar-chart-minimal-small",staticStyle:{height:"80px","margin-top":"-30px"},attrs:{"chart-data":e.prepBarChartData(e.figure,e.$store.state.neighbourhood),"click-handler":!0,"x-labels":!1,"y-labels":!1}})],1)],1):a("v-layout",{staticClass:"py-3 indicator-hover",attrs:{row:"",wrap:""},on:{click:function(t){return e.updateIndicator({figure:e.figure,name:e.name})}}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"title"},[e._v(e._s(e.name))]),e._v(" "),a("div",{staticStyle:{"overflow-x":"visible",display:"inline-block","white-space":"nowrap"}},[a("span",{staticClass:"display-3 py-0"},[e._v(e._s(e.$store.getters.dataByHoodYear[e.figure]))]),e._v(" "),e.unit?a("span",{staticClass:"display-1 ml-1"},[e._v(e._s(e.unit))]):e._e(),e._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",e._g({staticClass:"city-indicator"},r),[e._v(e._s(e.$store.getters.dataByCityYear[e.figure]))])]}}])},[e._v(" "),a("span",[e._v("East Jerusalem")])])],1),e._v(" "),a("div",{staticClass:"caption"},[e._v(e._s(e.description))])]),e._v(" "),a("v-flex",{attrs:{xs12:"",sm8:""}},[a("bar-vertical",{staticClass:"bar-chart-minimal",attrs:{"chart-data":e.prepBarChartData(e.figure,e.$store.state.neighbourhood),"click-handler":!0,"x-labels":!1,"y-labels":!1}})],1)],1)};de._withStripped=!0;var pe=a(20),fe=a.n(pe),ve={components:{BarVertical:ue},props:["name","figure","description","unit","noChart","small"],methods:{prepBarChartData:function(e,t){if(console.log(this.$store.getters.dataByYear),this.$store.getters.dataByYear){var a=this.$vuetify.theme.tertiary,r=this.$store.getters.dataByYear.sort(function(t,a){return t[e]-a[e]});return{labels:r.map(function(e){return e.name}),area_code:t,datasets:[{label:this.$props.name,backgroundColor:r.map(function(e){return e.area_code===t?a:fe.a.grey.lighten3}),data:r.map(function(t){return t[e]})}]}}},updateIndicator:function(e){console.log(e),this.$store.commit("UPDATE",{key:["navigator","indicator"],value:e})}}},he=(a(292),Object(D.a)(ve,de,[],!1,null,null,null));he.options.__file="src/components/IndicatorKeyStat.vue";var me=he.exports,ye=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mt-5 mb-4"},[t("div",{staticClass:"grey--text text--darken-2",staticStyle:{"text-transform":"uppercase","font-size":"18px"}},[this._v(this._s(this.text))]),this._v(" "),t("v-divider",{staticClass:"my-2"})],1)};ye._withStripped=!0;var ge={props:["text"]},_e=Object(D.a)(ge,ye,[],!1,null,null,null);_e.options.__file="src/components/IndicatorHeading.vue";var be={components:{MapView:V,MapNavigator:q,BarHorizontal:le,BarVertical:ue,IndicatorKeyStat:me,IndicatorHeading:_e.exports},data:function(){return{selectedData:this.$store.getters.selected}},computed:{items:function(){return r=this.$store,console.log("storedata",r.getters.dataByHoodYear.age_distribution),e=[{heading:!0,name_en:"Demographics",name_ar:""},{keystat:!0,name_en:"Population",name_ar:"",figure:"pop_year_end",description_en:""},{blocks:!0,left:[{type:"barchart",name_en:"Age Distribution (%)",name_ar:"",color:"",datasets:[{data:r.getters.dataByHoodYear.age_distribution,borderColor:"#000",type:"line",fill:!1},{label:"East Jerusalem Avg",data:r.getters.dataByCityYear.age_distribution,borderColor:r.state.theme.primary,type:"line",fill:!1}],labels:["0-4","5-14","15-24","25-44","45-64","65-74","75+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"age_median",name_en:"Median Age",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"dependency_youth",name_en:"Youth Dependency",name_ar:"",description_en:"Aged 24 or under",description_ar:"",unit:"%"}]},{keystat:!0,figure:"growth_total",name_en:"Population Growth",name_ar:"",description_en:"For year ("+r.state.year+")",description_ar:"",unit:"%"},{heading:!0,name_en:"Housing",name_ar:""},{keystat:!0,figure:"dwellings_total",name_en:"Housing Units",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"household_size",name_en:"Avg. Household Size",name_ar:"",description_en:"Persons per household",description_ar:"",unit:""},{blocks:!0,left:[{type:"barchart",name_en:"Dwelling Area Distribution %/m²",name_ar:"",color:"",datasets:[{data:r.getters.dataByHoodYear.dwelling_area_distribution,borderColor:"#000",type:"line",fill:!1},{data:r.getters.dataByCityYear.dwelling_area_distribution,borderColor:r.state.theme.primary,type:"line",fill:!1}],labels:["0-40","41-60","61-80","81-100","101-140","141+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"dwellings_new",name_en:"New Housing Units",name_ar:"",description_en:"Constructed in "+r.state.year,description_ar:"",unit:""},{keystat:!0,figure:"dwelling_growth",name_en:"Housing Units Growth",name_ar:"",description_en:"Annual increase in number of housing units",description_ar:"",unit:"%"}]}],t=["name","description"],a=this.$store.state.language,function e(t,a,r){return t.reduce(function(t,i){if("object"===(void 0===i?"undefined":h()(i)))return a.forEach(function(e){i[e+"_"+r]&&(i[e]=i[e+"_"+r])}),f()(i).forEach(function(t){Array.isArray(i[t])&&e(i[t],a,r)}),t.push(i),t},[])}(e,t="string"==typeof t?[t]:t,a);var e,t,a,r}},methods:{prepDstrChartData:function(e,t,a){var r={labels:t,datasets:e};return console.log("chartdata",r),r},log:function(e){return console.log("log",e),e},testServer:function(){B.a.get("/indicators").then(function(e){console.log(e)})}},mounted:function(){this.$store.commit("GET_INDICATORS"),console.log("databyneigh",this.$store.getters.dataByNeighbourhood)}},we=(a(293),Object(D.a)(be,ie,[],!1,null,null,null));we.options.__file="src/components/Indicators.vue";var xe=we.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",[a("v-card-title",[a("svg",{attrs:{width:"80vh",height:"200"},domProps:{innerHTML:e._s(e.editFeaturePath)}})]),e._v(" "),a("v-card-text",[e._l(e.surveyQuestions,function(t){return["text"==t.type?a("v-text-field",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"v-validate":"required|numeric","error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}}):"textarea"==t.type?a("v-textarea",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"v-validate":t.validation,"error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}}):"radio"==t.type?a("v-radio-group",{attrs:{name:t.name,"data-vv-name":t.name,label:t.label,"error-messages":e.errors.collect(t.name)},model:{value:e.editFeature[t.name],callback:function(a){e.$set(e.editFeature,t.name,a)},expression:"editFeature[item.name]"}},e._l(t.options,function(e){return a("v-radio",{attrs:{label:e.label,value:e.value}})}),1):e._e()]})],2),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{on:{click:e.closeEditor}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveEditor}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("l-map",{attrs:{zoom:e.$store.state.map.zoom,center:e.$store.state.map.center,options:e.mapOptions,id:"main-map"},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},["detailed"==e.baseMap?a("l-protobuf",{attrs:{url:"https://maps.tilehosting.com/data/v3/{z}/{x}/{y}.pbf?key=ArAI1SXQTYA6P3mWFnDs",options:e.protobufOpts}}):e._e(),e._v(" "),"basic"==e.baseMap?a("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:"&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors",options:e.protobufOpts}}):e._e(),e._v(" "),e._l(e.surveyData,function(t,r){return e.survey?a("l-geo-json",{key:t._id,attrs:{options:e.geoJsonOptions,"options-style":t.feature.properties.style,geojson:t.feature}}):e._e()}),e._v(" "),e._l(e.$store.state.geo.areas,function(t,r){return e.layers.areas?a("l-geo-json",{key:t._id,attrs:{options:e.areasGeoJsonOptions,geojson:t.feature,"options-style":e.getAreaStyle(t.feature.properties.id)}}):e._e()})],2),e._v(" "),a("div",{attrs:{id:"map-menu"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"min-width":"300px",flat:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("more_vert")])],1)]}}])},[a("v-spacer"),e._v(" "),e._v(" "),a("v-list",{attrs:{dense:""}},[a("div",{staticClass:"px-4"},[a("div",[e._v("Base Map")]),e._v(" "),e._l(e.baseMaps,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},nativeOn:{click:function(a){return e.updateBaseMap(t.type,t.selected)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"map.selected"}})]})],2),e._v(" "),e._l(e.items,function(t,r){return t.children?a("v-list-group",{key:t.text,attrs:{"prepend-icon":t.model?t.icon:t["icon-alt"],"append-icon":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n              "+e._s(t.heading)+"\n            ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[e._v(" "),e._l(t.children,function(t,r){return[a("v-switch",{key:r,attrs:{label:t.text},on:{click:function(a){return e.getSurveyData(t.text)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"child.selected"}})]})],2):t.heading?a("v-layout",{key:r,attrs:{row:"","align-center":""}},[a("v-flex",{attrs:{xs6:""}},[t.heading?a("v-subheader",[e._v("\n        "+e._s(t.heading)+"\n      ")]):e._e()],1)],1):t.divider?a("v-divider",{key:r,staticClass:"my-3",attrs:{dark:""}}):e._e()}),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Survey Data")]),e._v(" "),a("v-list-tile",{staticClass:"mb-3"},[e.surveyNames?a("v-select",{attrs:{items:e.surveyNames,"menu-props":"auto",label:"Select a survey","hide-details":"","prepend-icon":"map","single-line":""},on:{input:function(t){return e.getSurveyData(t)}},model:{value:e.selectedSurvey,callback:function(t){e.selectedSurvey=t},expression:"selectedSurvey"}}):a("v-btn",{on:{click:e.getSurveyNames}},[e._v("Load surveys")])],1),e._v(" "),e.survey?[a("v-divider"),e._v(" "),a("v-subheader",[e._v("Survey key")]),e._v(" "),e._l(e.surveyKeyArray,function(t,r){return a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.color}},[e._v("label")])],1),e._v(" "),a("v-list-tile-content",[e._v("\n      "+e._s(t.text)+"\n    ")])],1)}),e._v(" "),a("v-list-tile",[a("v-select",{attrs:{items:e.languages,"menu-props":"auto",label:"Select language","single-line":""},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)]:e._e()],2)],1)],1)],1)};ke._withStripped=!0;var je={name:"MapView",components:{LMap:g.a,LTileLayer:_.a,LMarker:b.a,LPopup:w.a,LTooltip:x.a,LProtobuf:P,LPolygon:k.a,LGeoJson:j.a},$_veeValidate:{validator:"new"},data:function(){var e=this;return{language:"ar",languages:["ar","en"],url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",zoom:14,center:L.latLng(31.778837,35.243452),attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:14,currentCenter:L.latLng(31.778837,35.243452),showParagraph:!1,mapOptions:{zoomSnap:.5},geoJsonOptions:{onEachFeature:function(t,a){var r=e;a.on({click:function(e){r.openEditor(e)}})}},areasGeoJsonOptions:{onEachFeature:function(t,a){var r=e;a.on({click:function(e){r.selectArea(e)}})}},layers:{areas:!0},areaStyle:{2111:{weight:2,color:"#fff",opacity:.9,fillColor:"#fff",fillOpacity:.5}},survey:!1,surveyData:[],surveyNames:!1,surveyOpacity:.5,editFeature:{},editFeatureDefaults:{},editDialog:!1,editFeaturePath:"",editFeatureViewBox:"",editIndex:0,editMapCenter:{lat:31.843725284728198,lng:35.22635998187065},editMapFeature:null,editMapZoom:16,optionsDialog:!1,selectedSurvey:null,baseMaps:[{text:"Basic",type:"basic",selected:!1},{text:"Detailed",type:"detailed",selected:!0}],baseMap:"detailed",surveyKey:{complete:{color:"#00C7FF",text:"Complete"},inProgress:{color:"#FFBD00",text:"In Progress"},notStarted:{color:"#FF0063",text:"Not Started"}}}},computed:{items:function(){return this.$auth.isAuthenticated(),[]},layerPanelHeight:function(){return this.survey?window.innerHeight-150:350},surveyKeyArray:function(){return y()(this.surveyKey)},protobufOpts:function(){var e=this.survey?this.surveyOpacity:1;return{vectorTileLayerStyles:M,maxNativeZoom:14,opacity:e}},tileOpts:function(){return{opacity:this.survey?this.surveyOpacity:1}},surveyQuestions:function(){return this.translate(Y,"label",this.language)},scale:function(){var e=this,t=this.$store.getters.dataByYear.map(function(t){return t[e.$store.state.map.indicator]}).sort(function(e,t){return e-t});return{min:t[0],max:t[t.length-1]-t[0]}}},methods:{getAreaStyle:function(e){var t=H.a.scale(["yellow","red"]),a=this.$store.getters.dataByYear.filter(function(t){return t.area_code===e})[0];if(!a)return{opacity:0,fillOpacity:0};var r=a[this.$store.state.map.indicator],i=t((r-this.scale.min)/this.scale.max);return console.log(e,this.scale,r,i,(r-this.scale.min)/this.scale.max),{weight:1,color:"#fff",opacity:.9,fillColor:i,fillOpacity:.6}},updateBaseMap:function(e,t){console.log(e,t),this.baseMap=t?e:"",this.baseMaps.forEach(function(a){return a.selected=a.type==e&&t})},zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){console.log(!0)},popup:function(e){console.log(e)},getCoordsPoint:function(e){var t=e.geometry.coordinates[0][0];return L.latLng(t[1],t[0])},getSurveyNames:function(){var e=this;I.getSurveyNames().then(function(t){e.surveyNames=t.data})},getSurveyData:function(e){var t=this;I.getSurveyData(e).then(function(e){e.data.forEach(function(e){e.feature.properties.Id=e._id,e.feature.properties.survey=e.feature.properties.survey||{}}),t.surveyData=e.data,t.styleSurveyData(),t.survey=!0,t.center=t.editMapCenter=t.getCoordsPoint(e.data[0].feature)})},selectArea:function(e){this.$store.commit("UPDATE",{key:"neighbourhood",value:e.target.feature.properties.id}),this.$store.commit("UPDATE",{key:["map","zoom"],value:15}),this.$store.commit("UPDATE",{key:["map","center"],value:{lon:e.target.feature.properties.Centroids_x,lat:e.target.feature.properties.Centroids_y}})},openEditor:function(e){var t=this;this.surveyData.forEach(function(a,r){a._id==e.target.feature.properties.Id&&(t.editIndex=r)}),d()(this.editFeature,this.surveyData[this.editIndex].feature.properties.survey),this.editDialog=!0;var a=e.target._path.outerHTML,r=1/this.currentZoom*1/this.currentZoom*1/this.currentZoom*1/this.currentZoom*2e5,i=(a=a.replace(">",'transform="translate() scale('+r+')">')).match(/d="M[\d\s-]*/)[0].slice(4).split(" ").map(function(e){return parseInt(e)});i[0]=-i[0]*r+200,i[1]=-i[1]*r+50,a=(a=a.replace("translate()","translate("+i[0]+" "+i[1]+")")).replace(/stroke-width="\d"/,'stroke-width="0.2"'),this.editFeaturePath=a,this.editMapFeature=e.target.feature,this.editMapCenter=this.getCoordsPoint(e.target.feature)},closeEditor:function(){this.editDialog=!1,console.log(this.editFeatureDefaults),d()(this.editFeature,this.editFeatureDefaults),this.styleSurveyData(),this.$validator.reset()},saveEditor:function(){this.$validator.validateAll().then(function(e){e?alert("success"):alert("error")}).catch(function(){});var e=this.surveyData[this.editIndex],t={lastEdited:{time:new Date,user:this.$auth.getUser().email}};d()(e.feature.properties.survey,t,this.editFeature),I.updateBuilding(e._id,e),this.closeEditor()},styleSurveyData:function(){var e=this,t=f()(this.editFeature).length;this.surveyData.forEach(function(a){var r=y()(a.feature.properties.survey).filter(function(e){return null!=e&&null!=e}),i=e.surveyKey.notStarted.color;r.length>t?i=e.surveyKey.complete.color:a.feature.properties.survey.lastEdited&&(i=e.surveyKey.inProgress.color),a.feature.properties.style={weight:2,color:i,opacity:.9,fillColor:i,fillOpacity:.5}})},toggleOptionsDialog:function(){this.optionsDialog=!this.optionsDialog,this.optionsDialog&&setTimeout(function(){var e=document.getElementsByClassName("v-toolbar__extension")[0].style;console.log(e),e.overflow="auto"},500)},translate:function(e,t,a){return function e(t,a,r){return t.reduce(function(t,i){if("object"===(void 0===i?"undefined":h()(i)))return i[a]=i[a+"_"+r],f()(i).forEach(function(t){Array.isArray(i[t])&&e(i[t],a,r)}),t.push(i),t},[])}(e,t,a)}},mounted:function(){var e=this;window.screen.width<800&&this.updateBaseMap("basic",!0),this.getSurveyNames(),this.editFeature=Y.reduce(function(e,t){return e[t.name]="",e},{}),this.editFeatureDefaults=d()({},this.editFeature),this.$store.watch(function(e,t){return e.neighbourhood},function(t,a){9999===t&&(e.$store.commit("UPDATE",{key:["map","zoom"],value:12}),e.$store.commit("UPDATE",{key:["map","center"],value:e.$store.state.map.defaultCenter}))}),this.$store.watch(function(e,t){return e.map.indicator},function(t,a){9999===t&&(e.$store.commit("UPDATE",{key:["map","zoom"],value:12}),e.$store.commit("UPDATE",{key:["map","center"],value:e.$store.state.map.defaultCenter}))})}},Ce=(a(294),Object(D.a)(je,ke,[],!1,null,null,null));Ce.options.__file="src/components/MapSurvey.vue";var Se=Ce.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.processForm(t)}}},[a("h1",[e._v("Upload data")]),e._v(" "),a("div",{staticClass:"dropbox"},[a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:e.uploadFieldName,disabled:e.isSaving},on:{change:function(t){return e.filesChange()}}}),e._v(" "),e.isInitial?a("p",[e._v("\n        Drag your file(s) here to begin"),a("br"),e._v(" or click to browse\n      ")]):e._e(),e._v(" "),e.isSaving?a("v-select",{attrs:{name:"layer",items:e.dataTypes,label:"Layer"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}}):e._e(),e._v(" "),e.isSaving?a("v-select",{attrs:{name:"format",items:e.indicatorFormats,label:"Format"},model:{value:e.indicatorFormat,callback:function(t){e.indicatorFormat=t},expression:"indicatorFormat"}}):e._e(),e._v(" "),e.isSaving?a("v-text-field",{attrs:{label:"Location"},model:{value:e.neighbourhood,callback:function(t){e.neighbourhood=t},expression:"neighbourhood"}}):e._e(),e._v(" "),a("v-btn",{staticClass:"button",attrs:{to:"map"}},[e._v("Back")]),e._v(" "),e.isSaving?a("v-btn",{staticClass:"button is-danger",attrs:{type:"submit"}},[e._v("Upload")]):e._e()],1)])])};$e._withStripped=!0;var Oe={data:function(){return{uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"GeoJSON",file:"",neighbourhood:"",dataType:"Buildings",dataTypes:["Buildings","Neighbourhoods","Indicators"],indicatorFormats:["geojson","json","csv"],indicatorFormat:null}},computed:{isInitial:function(){return 0===this.currentStatus},isSaving:function(){return 1===this.currentStatus},isSuccess:function(){return 2===this.currentStatus},isFailed:function(){return 3===this.currentStatus}},methods:{filesChange:function(){this.currentStatus=1,this.file=this.$refs.file.files[0],this.neighbourhood=this.file.name.split(".")[0],this.indicatorFormat=this.file.name.split(".")[1]},processForm:function(){var e=new FormData;e.append("neighbourhood",this.neighbourhood),e.append("layer",this.dataType),e.append("file",this.file),e.append("format",this.indicatorFormat),console.log({fileData:this.file}),I.uploadData(e,this.dataType,{"Content-Type":"multipart/form-data"}).then(function(){console.log("SUCCESS!!")}).catch(function(){console.log("FAILURE!!")})}}},De=Object(D.a)(Oe,$e,[],!1,null,null,null);De.options.__file="src/components/Upload.vue";var Ae=De.exports,Pe=function(){var e=this.$createElement;this._self._c;return this._m(0)};Pe._withStripped=!0;var Fe={data:function(){return{loading:!1,posts:[],model:{}}},created:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.refreshPosts();case 1:case"end":return t.stop()}},t,e)}))()},methods:{refreshPosts:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,I.getPosts();case 3:e.posts=t.sent,e.loading=!1;case 5:case"end":return t.stop()}},t,e)}))()},populatePostToEdit:function(e){var t=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.model=d()({},e);case 1:case"end":return a.stop()}},a,t)}))()},savePost:function(){var e=this;return l()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.model.id){t.next=5;break}return t.next=3,I.updatePost(e.model.id,e.model);case 3:t.next=7;break;case 5:return t.next=7,I.createPost(e.model);case 7:return e.model={},t.next=10,e.refreshPosts();case 10:case"end":return t.stop()}},t,e)}))()},deletePost:function(e){var t=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!confirm("Are you sure you want to delete this post?")){a.next=6;break}return t.model.id===e&&(t.model={}),a.next=4,I.deletePost(e);case 4:return a.next=6,t.refreshPosts();case 6:case"end":return a.stop()}},a,t)}))()}}},Ee=Object(D.a)(Fe,Pe,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid mt-4"},[t("h1",{staticClass:"h1"},[this._v("Posts Manager")])])}],!1,null,null,null);Ee.options.__file="src/components/PostsManager.vue";var Le=Ee.exports,Me=a(59),Te=a.n(Me);"http://localhost:8080"===window.location.origin||window.location.origin;console.log("routing from",{redirect_uri:window.location.origin+"/implicit/callback"}),r.default.use(Te.a,{client_id:"***REMOVED***",issuer:"https://dev-160658.okta.com/oauth2/default",redirect_uri:window.location.origin+"/implicit/callback",scope:"openid profile email"}),r.default.use(re.a);var Be=new re.a({mode:"history",routes:[{path:"/",component:xe},{path:"/upload",component:Ae},{path:"/map",component:Se},{path:"/indicators",component:xe},{path:"/implicit/callback",component:Te.a.handleCallback()},{path:"/posts-manager",name:"PostsManager",component:Le,meta:{requiresAuth:!0}}]});Be.beforeEach(r.default.prototype.$auth.authRedirectGuard());var ze=Be,Ue=a(215),Ie=a.n(Ue),Ne=(a(295),a(296),a(214)),He=a(61),Ye={primary:fe.a.orange.lighten1,secondary:fe.a.grey.lighten3,tertiary:"#000",error:"#b71c1c"};r.default.use(Ie.a,{options:{customProperties:!0},theme:Ye}),r.default.use(Ne.a),r.default.use(He.a),r.default.config.productionTip=!0;var Ge=new He.a.Store({state:{indicators:null,cityIndicators:null,neighbourhood:2511,year:2016,language:"en",languages:["ar","en"],theme:Ye,map:{zoom:14,center:$.a.latLng(31.778837,35.243452),defaultCenter:$.a.latLng(31.778837,35.243452)},navigator:{zoom:11,center:{lat:31.809357074964257,lng:35.18584083885216},defaultCenter:{lat:31.809357074964257,lng:35.18584083885216},indicator:{figure:"pop_year_end",name:"Population"}},geo:{areas:[]}},mutations:{GET_INDICATORS:function(e){I.getAreas().then(function(t){e.geo.areas=t.data}),I.getIndicators().then(function(t){if(!t.data)return console.log("cannot retrieve in"),null;var a=t.data.map(function(e){return e.dependency_youth=((e.age_0_4+e.age_5_14+e.age_15_24)/e.pop_year_end*100).toFixed(1),e.growth_total=(e.pop_growth_total/e.pop_year_end*100).toFixed(1),e.growth_natural=(e.pop_growth_natural/e.pop_year_end*100).toFixed(1),e.household_size=(e.pop_year_end/e.dwellings_total).toFixed(1),e.dwelling_density=(e.dwelling_area_avg/e.household_size).toFixed(1),e.prevyear=t.data.filter(function(t){return t.name===e.name&&t.year===e.year-1})[0],e.dwellings_new=e.prevyear?e.dwellings_total-e.prevyear.dwellings_total:null,e.dwelling_growth=(e.dwellings_new/e.dwellings_total*100).toFixed(1),e.age_distribution_labels=["age_0_4","age_5_14","age_15_24","age_25_44","age_45_64","age_65_74","age_75_"],e.age_distribution=e.age_distribution_labels.map(function(t){return e[t]/e.pop_year_end*100}),e.dwelling_area_distribution_labels=["dwellings_area_0_40","dwellings_area_41_60","dwellings_area_61_80","dwellings_area_81_100","dwellings_area_101_140","dwellings_area_141"],e.dwelling_area_distribution=e.age_distribution_labels.map(function(t){return e[t]/e.dwellings_total*100}),e});e.indicators=a.filter(function(e){return 9999!==e.area_code}),e.cityIndicators=a.filter(function(e){return 9999===e.area_code}),console.log(e.indicators),console.log("cityIndicators",e.cityIndicators)})},UPDATE:function(e,t){Array.isArray(t.key)?t.key.slice(0,t.key.length-1).reduce(function(e,t){return e&&"undefined"!==e[t]?e[t]:void 0},e)[t.key.slice(t.key.length-1,t.key.length)]=t.value:e[t.key]=t.value},UPDATE_AREA:function(e,t){var a=e.geo.areas.filter(function(e){return e.feature.properties.id==t})[0];console.log(a),e.neighbourhood=t,e.map.center={lon:a.feature.properties.Centroids_x,lat:a.feature.properties.Centroids_y}}},getters:{areaSelect:function(e,t){return e.indicators?t.dataByYear.concat(t.dataByCityYear):null},neighbourhoods:function(e,t){return e.indicators?e.indicators.reduce(function(e,t){return-1===e.indexOf(t.name)&&e.push(t.name),e},[]):null},years:function(e){return e.indicators?e.indicators.reduce(function(e,t){return-1===e.indexOf(t.year)&&e.push(t.year),e},[]):null},dataByYear:function(e){return e.indicators?e.indicators.filter(function(t){return t.year===e.year}):[]},dataByNeighbourhood:function(e){if(!e.indicators)return[];var t=e.indicators.filter(function(t){return t.area_code===e.neighbourhood});return t.length>0?t:e.cityIndicators},dataByHoodYear:function(e,t){return e.indicators?e.indicators.filter(function(t){return t.area_code===e.neighbourhood&&t.year===e.year})[0]||t.dataByCityYear:{}},dataByCityYear:function(e){return e.cityIndicators?e.cityIndicators.filter(function(t){return t.year===e.year})[0]:{}}}});new r.default({router:ze,store:Ge,render:function(e){return e(ae)}}).$mount("#app")},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){}});