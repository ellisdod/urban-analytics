!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)o=s[d],n[o]&&f.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);f.length;)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={0:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([401,1]),a()}(Array(21).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(154)),n=u(a(43)),i=u(a(225)),o=u(a(30)),s=u(a(226)),l=u(a(34)),c=u(a(38));function u(e){return e&&e.__esModule?e:{default:e}}var d=a(477);a(478);var f,p="http://localhost:8080"===window.location.origin?"http://localhost:8081":window.location.origin,h=c.default.create({baseURL:p,json:!0}),v=(f=(0,s.default)(i.default.mark(function e(t,a,r,n){var s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{},r=r||{},console.log("execute function"),e.next=5,l.default.prototype.$auth.getAccessToken();case 5:return s=e.sent,e.abrupt("return",h({method:t,url:a,data:r,headers:(0,o.default)({Authorization:"Bearer "+s},n)}));case 7:case"end":return e.stop()}},e,this)})),function(e,t,a,r){return f.apply(this,arguments)});function m(e){return e=(e="object"===(void 0===e?"undefined":(0,n.default)(e))&&e?(0,r.default)(e):e)?"/"+e:""}t.default=d.reduce(function(e,t){return e[t.name]=function(e,a,r,n,i){return a=m(a),i=m(i),console.log(t.method,""+e+i+"/"+t.name+a,r,n),v(t.method,""+e+i+"/"+t.name+a,r,n)},e},{})},,function(e,t,a){"use strict";var r=i(a(30)),n=i(a(43));function i(e){return e&&e.__esModule?e:{default:e}}var o=a(486),s=a(547),l=[{name:"Text",value:"Text"},{name:"Number",value:"Number"},{name:"Boolean",value:"Boolean"},{name:"Array",value:"Array"},{name:"Date",value:"Date"}],c={layers:{name:"Layers",schema:{name:{type:String,required:!0,unique:!0,_text:"Name"},text_en:{type:String,required:!0,_text:"Text (English)"},text_ar:{type:String,_text:"Text (Arabic)"},data_type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:[{name:"Point",icon:"scatter_plot"},{name:"LineString",icon:"timeline"},{name:"MultiPolygon",icon:"bubble_chart"}]},spatial_intersect:{type:Array,_text:"Areas for Analysis",_multiple:!0,_options:function(e){return console.log("areas analysis select function"),e.state._col_areaLayers}},filtered:{type:Boolean,_text:"Filtered by area"},source_url:{type:String,_text:"Source - Link",_hint:"e.g https://jerusaleminstitute.org.il/en/yearbook/#/265/6868"},source_ref:{type:String,_text:"Source - Reference",_hint:"e.g Jerusalem Statistical Yearbook, Table IX/16"},source_org:{type:String,_text:"Source - Organisation",_hint:"e.g JIIS"}}},layerAttributes:{name:"Attributes",canPaste:!0,schema:{name:{type:String,required:!0,_text:"Name"},type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:l},func:{type:Array,_text:"Functions",_multiple:!0,_options:[{name:"count",color:"secondary"},{name:"sum",color:"tertiary"}],_computed:function(e,t,a,r){var n=e.state["_col_"+a].filter(function(e){return e.layer===r});if(n){var i=["count",""];return i="Number"===t.type?i.concat(["sum"]):i,n.reduce(function(e,t){return"Number"===t.type&&e.push("sum: "+t.name),e},i)}}},required:{type:Boolean,_text:"Required"},public:{type:Boolean,_text:"Public"},legend:{type:Boolean,_text:"Legend"},layer:{type:o.Schema.Types.ObjectId,required:!0}}},layerCalcs:{name:"Attributes",schema:{name:{type:String,required:!0,_text:"Name"},type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:l},layer:{type:o.Schema.Types.ObjectId,required:!0},func:{type:Array,_text:"Functions",_multiple:!0,_combobox:!0,_categorised:!0,_options:{component:"Calculator"}}}},indicatorSections:{name:"Sections",schema:{name:{type:String,required:!0,_text:"Name"},text_en:{type:String,required:!0,_text:"Text (English)"},text_ar:{type:String,_text:"Text (Arabic)"},geodata:{type:Array,_text:"Feature Layers",_multiple:!0,_options:function(e){return e.state._col_layers}}}},indicatorBlocks:{name:"Modules",canPaste:!0,schema:{type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:[{name:"Figure"},{name:"Chart"},{name:"Table"},{name:"List"},{name:"Map"},{name:"Timeline"}]},active:{type:Boolean,_text:"Active"},layer:{type:o.Schema.Types.ObjectId,required:!0},text_en:{type:String,required:!0,_text:"Name (English)"},text_ar:{type:String,_text:"Name (Arabic)"},areaLayer:{type:Array,_text:"Spatial Intersect",_multiple:!0,_options:function(e){return e.state._col_areaLayers}},figure:{type:Array,_text:"Figure",_categorised:!0,_options:function(e,t){return e.getters.nestedAttributes(e,t)}},description_en:{type:String,_text:"Description (English)"},description_ar:{type:String,_text:"Description (Arabic)"},unit:{type:String,_text:"Unit"}}},features:{name:"Features",schema:"layerAttributes",params:"/:collection",sort:"feature.properties.year",canUpload:!0,storeByLayer:!0,embedIds:"feature.properties",layerCollection:"layers",layerAttributes:"layerAttributes"},indicators:{name:"Indicators",schema:"indicatorAttributes",schemaOpts:{strict:!0},layerCollection:"areaLayers",params:"/:collection",canUpload:!0},areaLayers:{name:"AreasLayers",schema:{name:{type:String,required:!0,_text:"Name"},code:{type:String,required:!0,unique:!0,_text:"Column Name"}}},areas:{name:"Areas",schema:"areaAttributes",params:"/:collection",canUpload:!0,layerCollection:"areaLayers"},areaAttributes:{name:"AreaAttributes",schema:{name:{type:String,required:!0,_text:"Name"},type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:l},required:{type:Boolean,_text:"Required"},layer:{type:String,required:!0}}},indicatorAttributes:{name:"IndicatorAttributes",canPaste:!0,_description_en:"For non-spatial attribute data that is directly associatied with the spatial area i.e data from JIIS relating to a statistical area",schema:{name:{type:String,required:!0,_text:"Name"},type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:l},required:{type:Boolean,_text:"Required"},source_ref:{type:String,_text:"Source - Reference",_hint:"e.g Jerusalem Statistical Yearbook, Table IX/16"},source_org:{type:String,_text:"Source - Organisation",_hint:"e.g JIIS"},source_url:{type:String,_text:"Source - Link",_hint:"e.g https://jerusaleminstitute.org.il/en/yearbook/#/265/6868"},layer:{type:o.Schema.Types.ObjectId,required:!0}}},surveyLayers:{name:"SurveyLayers",schema:{name:{type:String,required:!0,unique:!0,_text:"Name"},featureLayer:{type:Array,_text:"Feature Layers",_multiple:!0,_options:function(e){return e.state._col_layers}}}},surveyLayerAttributes:{name:"Attributes",canPaste:!0,translate:["_text"],schema:{name:{type:String,required:!0,_text:"Name"},_text_en:{type:String,required:!0,_text:"Text (English)"},_text_ar:{type:String,required:!0,_text:"Text (Arabic)"},required:{type:Boolean,_text:"Required"},type:{type:String,required:!0,_text:"Type",_multiple:!1,_options:l},_options:{type:Array,multiple:!0,_text:"Options",_categorised:!0,_options:"dynamic"},layer:{type:o.Schema.Types.ObjectId,required:!0}}},surveyRecords:{name:"Survey Records",schema:"surveyLayerAttributes",params:"/:collection",layerCollection:"surveyLayers",storeByLayer:!0,create:function(e){var t=e.$store.state,a=void 0;(console.log(void 0===s?"undefined":(0,n.default)(s)),e.linkedFeature)?a=t._col_surveyLayers.filter(function(e){return e._id===t._col_surveyLayers_selected})[0].featureLayer.reduce(function(a,r){var n=t._col_features[r].filter(function(t){return t._id===e.linkedFeature})[0];return n&&(a=s(n.feature.geometry.coordinates[0]),console.log("coords",n.feature.geometry.coordinates,a)),a},null):a=[e.$store.state.map.center.lng,e.$store.state.map.center.lat];return{feature:{type:"Feature",geometry:{type:"Point",coordinates:a},properties:(0,r.default)({year:(new Date).getYear()+1900,_createdDate:new Date,_lastEditedDate:new Date,_createdBy:e.$store.state.activeUser.email,_lastEditedBy:e.$store.state.activeUser.email},e.edited)},linkedFeature:e.linkedFeature||null}}},styles:{name:"Styles",schema:{layer:{type:o.Schema.Types.ObjectId,required:!0},name:{type:String,required:!0},attribute:{type:String,required:!0},color:String}}};e.exports=c},,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(188),n=a(76);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(554);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/MapView.vue",t.default=s.exports},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=function(e,t,a){if(!e)return null;var r=t?-1:1,i=t?1:-1;var o=e.sort(function(e,t){var o=a?n(a,e):parseInt(e),s=a?n(a,t):parseInt(t);return o>s?r:o<s?i:0});return console.log("arrayUtils",o),o},n=function(e,t){return(e="string"==typeof e?e.split("."):e)?e.reduce(function(e,t){return e&&(e[t]||0===e[t])?e[t]:null},t):t};t.rowsToObjects=function(e,t){return t.reduce(function(t,a){return t.push(e.reduce(function(e,t,r){return e[t]=a[r],e},{})),t},[])},t.sortNumbers=function(e,t){if(!e||!t)return null;e=e.reduce(function(e,a){var r=n(t,a);return r&&e.push(r),e},[]);for(var a=r(e),i={min:a[0]},o=a.length-1;o>=0;o--){var s=a[o];if("number"==typeof s){i.max=s;break}}return i.constant=i.max-i.min,console.log("sorted",a,i),i},t.getNested=n,t.sort=r},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(190),n=a(83);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(484);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/AreaSelect.vue",t.default=s.exports},,,,,,,,function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.chart={props:{title:String,"x-labels":Boolean,"y-labels":Boolean,clickHandler:Boolean,showLegend:Boolean},data:function(){var t=this;return{options:{axes:{display:!1},scales:{yAxes:[{display:t.$props.yLabels,gridLines:{display:!1},scaleLabel:{display:t.$props.yLabels},ticks:{display:t.$props.yLabels}}],xAxes:[{display:t.$props.xLabels,gridLines:{display:!1},scaleLabel:{display:t.$props.xLabels},ticks:{display:t.$props.xLabels}}]},legend:{display:t.$props.showLegend,position:"left",fullWidth:!1,labels:{boxWidth:12}},title:{display:!0,align:"left",text:t.$props.title||""},maintainAspectRatio:!1,onClick:function(a,r){if(console.log("chartoutput",r[0]),t.$props.clickHandler){var n=t.$store.getters.selectedAreas.filter(function(e){return e.feature.properties.name===r[0]._model.label})[0].feature.properties;console.log("chartoutput",r[0]),t.$store.commit("UPDATE",{key:"neighbourhood",value:n.areaCode}),t.$store.commit("UPDATE",{key:["map","zoom"],value:15}),console.log("coords",e.target._map.getCenter()),t.$store.commit("UPDATE",{key:["map","center"],value:{lon:n.centroid_lng,lat:n.centroid_lat}})}}}}}}},function(e,t,a){"use strict";a.r(t);var r=a(191),n=a(94);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/LayerSelect.vue",t.default=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(70),n=a(73),i=n.mixins.reactiveProp;t.default={extends:n.Bar,mixins:[i,r.chart],mounted:function(){this.renderChart(this.chartData,this.options)}}},,function(e,t,a){"use strict";a.r(t);var r=a(75),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(49)),n=u(a(20)),i=u(a(225)),o=u(a(226)),s=u(a(37)),l=u(a(555)),c=u(a(38));function u(e){return e&&e.__esModule?e:{default:e}}var d=a(23);t.default={name:"App",components:{MapView:s.default,Viewer:l.default},data:function(){return{loading:!0,miniNav:!0,authenticated:!1,drawerIndicators:!1,layersPanel:!0,currentView:"map-view",layers:[]}},computed:{items:function(){var e=[{icon:"help",text:"About",route:"help"},{icon:"map",route:"map",text:"Map"},{icon:"bar_chart",text:"Urban Indicators",route:"indicators"},{icon:"insert_drive_file",text:"Profiles",route:"reports"}];return this.activeUser?e.concat([{icon:"settings",text:"Manage Data",route:"manage"}]):e},activeUser:function(){return this.$store.state.activeUser.email?this.$store.state.activeUser:null}},props:{source:String},created:function(){var e=this;return(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshActiveUser();case 2:case"end":return t.stop()}},t,e)}))()},watch:{$route:"refreshActiveUser"},methods:{log:function(){console.log("store",this.$store.getters,this.$store.state),c.default.create({baseURL:"http://localhost:8080"===window.location.origin?"http://localhost:8081":window.location.origin,json:!0})({method:"POST",url:"/planmonitor"}).then(function(e){console.log("logdata",e)})},toggleLogin:function(){this.activeUser?this.logout():this.login()},login:function(){this.$auth.loginRedirect()},refreshActiveUser:function(){var e=this;return(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$auth.getUser().then(function(t){e.$store.commit("UPDATE_USER",t)});case 1:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.logout();case 2:return t.next=4,e.refreshActiveUser();case 4:e.$router.push("/");case 5:case"end":return t.stop()}},t,e)}))()},printUser:function(){console.log("USER"),console.log(this.activeUser),console.log(this.$auth)}},mounted:function(){var e=this,t=(0,n.default)(d).reduce(function(e,t){var a=d[t].layerCollection;return a&&e.indexOf(a)<0&&e.push(a),e},[]);r.default.all(t.map(function(t){return e.$store.dispatch("UPDATE_COLLECTION",t)})).then(function(a){var i=a.reduce(function(e,a,r){return e[t[r]]=a,e},{});return console.log("layerColsObj",i),r.default.all((0,n.default)(d).reduce(function(t,a){var r=d[a].layerCollection;if(d[a].storeByLayer){var n=i[r].reduce(function(e,t){return e[t._id]=[],e},{});e.$store.commit("UPDATE",{key:"_col_"+a,value:n})}else r?(console.log("update by layer",a,r,i[r][0]._id),t.push(e.$store.dispatch("UPDATE_COLLECTION",{name:a,layer:i[r][0]._id}))):i[a]?console.log("did not dispatch",a):(console.log("this.$store.dispatch",a),t.push(e.$store.dispatch("UPDATE_COLLECTION",a)));return t},[]))}).then(function(){console.log("LOADING COMPLETE"),e.loading=!1})}}},function(e,t,a){"use strict";a.r(t);var r=a(77),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(a(153)),n=g(a(49)),i=g(a(43)),o=g(a(20)),s=g(a(447)),l=g(a(30)),c=a(399),u=g(a(451)),d=g(a(453)),f=g(a(21)),p=(g(a(61)),g(a(482))),h=g(a(62)),v=g(a(232)),m=g(a(265)),y=g(a(71)),_=(g(a(38)),g(a(1)));function g(e){return e&&e.__esModule?e:{default:e}}var b=a(54),x=a(23);a(178);t.default={name:"MapView",props:["featureLayers","featuresCollection","zoomLevel","options","areas","height","allLayers","legendBottom","editable","hideLegend","baseMapLink","minimiseLegend","hideControls","highlightColor","attribute"],components:{LMap:c.LMap,LTileLayer:c.LTileLayer,LMarker:c.LMarker,LPopup:c.LPopup,LTooltip:c.LTooltip,LProtobuf:u.default,LPolygon:c.LPolygon,LGeoJson:c.LGeoJson,MapLegend:p.default,AreaSelect:h.default,Editor:v.default,Timeline:m.default,LayerSelect:y.default},data:function(){return{mapMenu:!1,newSurveyFeatures:[],featureClick:!1,layersSet:!1,dialog:!1,itemTemplate:{},layerPanels:[],layerPanelsSelected:[],loadingValue:null,loading:!1,language:"ar",languages:["ar","en"],basemaps:{url:"https://{s}.basemaps.cartocdn.com/{z}/{x}/{y}.png",url2:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",url3:"http://a.tile.openstreetmap.fr/hot/${z}/${x}/${y}.png "},center:_.default.latLng(31.778837,35.243452),attribution:this.$props.hideControls?"":'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:14,currentCenter:_.default.latLng(31.778837,35.243452),showParagraph:!1,mapOptions:{zoomSnap:.5,scrollWheelZoom:!1,zoomControl:!this.$props.hideControls,attributionControl:!1},layers:{},hidden:[],filtered:!1,surveyData:[],surveyNames:!1,surveyOpacity:.5,editFeature:{},editFeatureDefaults:{},editDialog:!1,editFeaturePath:"",editFeatureViewBox:"",editIndex:0,editMapCenter:{lat:31.843725284728198,lng:35.22635998187065},editMapFeature:null,editMapZoom:16,optionsDialog:!1,selectedSurvey:null,baseMaps:[{text:"Basic",type:"basic",selected:!0},{text:"Detailed",type:"detailed",selected:!1}],baseMap:"basic",surveyKey:{complete:{color:"#00C7FF",text:"Complete"},inProgress:{color:"#FFBD00",text:"In Progress"},notStarted:{color:"#FF0063",text:"Not Started"}}}},computed:{surveyorAuth:function(){return b.getNested("state.activeUser.groups.Surveyor",this.$store)},attributes:function(){return this.featureLayers&&this.layers[this.featureLayers[0]]?this.layers[this.featureLayers[0]].attributes:null},featureLayersArray:function(){return this.featureLayers?Array.isArray(this.featureLayers)?this.featureLayers:[this.featureLayers]:[]},legendStyle:function(){var e=this.options?this.options.legendStyle:{};return(0,l.default)({padding:this.legendBottom?"0 0 40px 0":"0",height:this.legendBottom?"200px":"auto",maxHeight:this.legendBottom?"200px":"none",maxWidth:this.legendBottom?"100%":"300px",width:this.legendBottom?"100%":"auto",overflowY:this.legendBottom?"visible":"auto",overflowX:"visible!important"},e||{})},infoStyle:function(){return 0===this.legendStyle.left?{right:0}:{left:0}},widthSmall:function(){return!!(this.$refs.container&&this.$refs.container.clientWidth<300)},mapHeight:function(){var e=document.getElementsByTagName("nav")[0],t=e?e.clientHeight:0;return this.height||window.innerHeight-t+"px"},mapStyle:function(){var e=this.options?this.options.mapStyle:{};return(0,l.default)({display:this.legendBottom?"block":"flex",height:this.legendBottom?"90%":"100%"},e||{})},layerPanelHeight:function(){return this.survey?window.innerHeight-150:350},surveyKeyArray:function(){return(0,s.default)(this.surveyKey)},protobufOpts:function(){var e=this.survey?this.surveyOpacity:1;return{vectorTileLayerStyles:d.default,maxNativeZoom:18,opacity:e}},tileOpts:function(){return{opacity:this.survey?this.surveyOpacity:1}},areasGeoJson:function(){var e=this.$store.getters.selectedAreas;return e?this.embedIds(e):null},editItems:function(){return this.$store.getters.surveyRecordsByFeature[this.$store.state._col_features_selected]}},methods:{addFilter:function(e){var t=(0,o.default)(e.filters).slice(-1)[0];t=parseInt(t)+1;var a=(0,o.default)(e.attributes);this.$set(e.filters,t.toString(),{attribute:a[t]})},removeFilter:function(e,t){this.$delete(e.filters,t.toString())},toggleLayer:function(e){},filterFeatures:function(e){console.log("filterFeatures");var t=this.layers[e],a=this.$store.state["_col_"+this.featuresCollection][e],r=(0,o.default)(t.filters).reduce(function(e,a){var r=t.filters[a];return r.range?e=e.filter(function(e){return t=e,a=r.attribute,n=r.range[0],i=r.range[1],(o=t.feature.properties[a])>=n&&o<=i;var t,a,n,i,o}):r.categories&&(e=e.filter(function(e){return t=e,a=r.attribute,!1!==r.categories[t.feature.properties[a]];var t,a})),e},a);t.features=r.map(function(e){return e.feature}),this.update()},openMavatPlan:function(e){window.open().document.write('<html><body>\n          <form action="http://mavat.moin.gov.il/MavatPS/Forms/SV4.aspx?tid=4" method="post" name="redirect_form">\n          <input type="hidden" name="PL_ID" value="'+e+'">\n          <v-btn type="submit">Go to mavat website<v-btn>\n          </form></body></html>')},embedIds:function(e){return e.reduce(function(e,t){return t.feature.properties._id=t._id,e.push(t.feature),e},[])},close:function(){this.dialog=!1,this.featureClick=!1},getGeoJsonOptions:function(e,t,a){t=t||this.layers[e].data_type;var r=a?{interactive:!1}:{onEachFeature:this.featureInteract};if("Point"===t){var n=this;r.pointToLayer=function(t,a){return _.default.circleMarker(a,n.getLegendStyle(t,e))}}return r},featureInteract:function(e,t){var a=this,r=e.properties,n=(0,o.default)(e.properties).reduce(function(e,t){return e+"<tr><td><b>"+t+"<b><td><td>"+r[t]+"</td><tr>"},"<table>")+"</table>";r.mavat_code&&(n=n+"<br><a onclick=\" let w = window.open();w.document.write('<html><body><form action=&quot;http://mavat.moin.gov.il/MavatPS/Forms/SV4.aspx?tid=4&quot; method=&quot;post&quot; name=&quot;redirect_form&quot;><input type=&quot;hidden&quot; name=&quot;PL_ID&quot; value=&quot;"+r.mavat_code+"&quot;><button type=&quot;submit&quot;>Go to mavat website</button></form></body></html>')\">Go to mavat</a>"),t.bindPopup(n),t.on({contextmenu:function(e){a.featureClick=!0,console.log("featureclick",e);var t=e.target.feature.properties;a.updateOnSelect(e),a.openEditor(t._id)},click:a.updateOnSelect})},updateOnSelect:function(e){var t=e.target.feature.properties;this.$store.commit("UPDATE",{key:"_col_"+this.featuresCollection+"_selected",value:t._id}),this.$store.commit("UPDATE",{key:"neighbourhood",value:t.areaCode||t.JIIS_stat_area});var a={lng:(e.target._bounds._northEast.lng+e.target._bounds._southWest.lng)/2,lat:(e.target._bounds._northEast.lat+e.target._bounds._southWest.lat)/2};this.$store.commit("UPDATE",{key:["map","center"],value:a}),console.log(e),this.$forceUpdate()},addNewSurveyFeature:function(e){this.newSurveyFeatures.push({type:"Feature",geometry:{type:"Point",coordinates:e}})},removeLastSurveyFeature:function(){this.newSurveyFeatures.splice(this.newSurveyFeatures.length-1,1)},geoJsonStyle:function(e){var t={},a=this;return function(r){return a.getLegendStyle(r,e,t)}},getLegendStyle:function(e,t,a){if(a=(0,l.default)({radius:4,fillColor:this.$store.state.colors[0],color:this.$store.state.colors[0],weight:1,stroke:!0},a),!t)return a;var r=this.layers[t],n=r.attribute,i=r.attributes[n],o=e.properties[n];a.opacity=r.strokeOpacity/100,a.fillOpacity=r.fillOpacity/100;var s="fillColor";return this.$store.getters.surveyRecordsByFeature[e.properties._id]?a.fillColor=a.color=this.$store.state.colors[0]:a.fillColor=a.color=this.$store.state.colors[2],e.geometry.type.indexOf("LineString")>-1&&(a.stroke=!0,s="color"),e.properties._id===this.$store.state._col_features_selected&&(a.color="red",a.weight=3),i?(i.categories?a[s]=i.categories[o].color:i.range?a[s]=this.$store.state.colorScale(1-(o-r.colorRange[0])/r.colorConstant).hex():(a.fillOpacity=0,a.opacity=0),a):a},getAreaStyle:function(e){var t=this,a={weight:2,color:"grey",opacity:.4,fillColor:"grey",fillOpacity:e?0:.2};return function(e){if(t.$store.state.neighbourhood===e.properties.areaCode){var r={weight:4,fillColor:"orange"};return t.highlightColor&&(r.color=t.highlightColor),(0,l.default)({},a,r)}return a}},updateBaseMap:function(e,t){this.baseMap=t?e:"",this.baseMaps.forEach(function(a){return a.selected=a.type==e&&t})},zoomUpdate:function(e){this.currentZoom=e},centerUpdate:function(e){this.currentCenter=e},getCoordsPoint:function(e){var t=e.geometry.coordinates[0][0];return _.default.latLng(t[1],t[0])},getSurveyNames:function(){var e=this;f.default.distinct("buildings","feature.properties.neighbourhood").then(function(t){e.surveyNames=t.data})},getSurveyData:function(e){var t=this;f.default.getSurveyData(e).then(function(e){e.data.forEach(function(e){e.feature.properties.Id=e._id,e.feature.properties.survey=e.feature.properties.survey||{}}),t.surveyData=e.data,t.styleSurveyData(),t.survey=!0,t.center=t.editMapCenter=t.getCoordsPoint(e.data[0].feature)})},toggleOptionsDialog:function(){this.optionsDialog=!this.optionsDialog,this.optionsDialog&&setTimeout(function(){document.getElementsByClassName("v-toolbar__extension")[0].style.overflow="auto"},500)},update:function(){var e=this;this.$nextTick(function(){return e.$forceUpdate()});var t=this.$children[0]?this.$children[0].mapObject:null;t&&setTimeout(function(){return t.invalidateSize()},500)},layerOn:function(e,t){console.log("turning on layer: "+e,t),e="number"==typeof e?(0,o.default)(this.layers)[e]:e,this.layers[e]&&(this.$set(this.layers[e],"on",t),this.$set(this.layers[e],"showLegend",this.allLayers||t));var a=(0,o.default)(this.layers).indexOf(e);this.$set(this.layerPanels,a,t)},updateLayer:function(e,t,a){console.log("updating Layer");var r=this.layers[e],n=a?b.getNested(a,r):r;if("object"===(0,i.default)(t.value))for(var o in n[t.key]||this.$set(n,t.key,{}),t.value)this.$set(n[t.key],o,t.value[o]);else n[t.key]=t.value;if(console.log("has range",r.attributes[r.attribute].range),"range"===t.key)this.setRanges(r,t.value[0],t.value[1]);else if(r.attributes[r.attribute].range){console.log("setting ranges");var s=r.attributes[r.attribute].range;this.setRanges(r,s.min,s.max)}this.filterFeatures(e)},addRanges:function(e,t){var a=this;console.log("range",e);var r=this.layers[e];if(!t)return null;(0,o.default)(r.attributes).forEach(function(e){if("Number"===r.attributes[e].type){var n=b.sortNumbers(t,"feature.properties."+e);n.defaultMin=n.min,n.defaultMax=n.max,a.$set(r.attributes[e],"range",n),e===r.attribute&&(a.setRanges(r,n.min,n.max),console.log("range attribute",e))}})},setRanges:function(e,t,a){this.$set(e,"colorRange",[t,a]),this.$set(e,"colorConstant",a-t)},updateCollection:function(e,t){return this.$store.dispatch("UPDATE_COLLECTION",{name:e,layer:t})},checkForUpdate:function(){var e=this;if(!this.layers)return null;console.log("checking for update");var t=this.$store.state["_col_"+this.featuresCollection],a=(0,o.default)(this.layers).reduce(function(a,r){var i=e.layers[r];return i.on?(a.push(new n.default(function(a,n){var o={},s=i.filtered,l=t[r]?t[r].length:0;if(e.loading||0!==l&&!s)return o[r]=t[r],a(o);e.loading=!0,e.updateCollection(e.featuresCollection,r).then(function(t,n){return n&&console.log("update error",n),e.loading=!1,o[r]=t,a(o)})})),a):a},[]);n.default.all(a).then(function(t){t.forEach(function(t){var a=(0,o.default)(t)[0];e.addRanges(a,t[a]),e.filterFeatures(a)}),e.update()})},setLayers:function(){var e=this,t=this.$store.getters.styles,a=x[this.featuresCollection||"features"],r=(this.allLayers,this.$store.state["_col_"+a.layerCollection]);console.log("running set layers. total layers: "+r.length),r.forEach(function(a,r){var n=(0,l.default)({features:"",legend:"",fillOpacity:60,strokeOpacity:80,filters:{0:{}},colorRange:null,colorConstant:null},a),i=t[n._id],s=e.featureLayersArray.indexOf(n._id)>-1;e.layerPanels.push(s),s&&e.layerPanelsSelected.push(n._id),n.on=e.layerPanels[r],n.showLegend=e.allLayers||e.layerPanels[r],n.attributes=e.$store.state._col_layerAttributes.reduce(function(e,t){return t.legend&&t.layer===n._id&&(e[t.name]=t),e[t.name]&&i&&(e[t.name].categories=i[t.name]),e},{}),n.attribute=e.attribute||(0,o.default)(n.attributes)[0],n.filters[0].attribute=n.attribute,e.$set(e.layers,n._id,n)}),this.layersSet=!0},openEditor:function(e){console.log("editor",e),this.editable&&(this.dialog=!0)},loadSurveyLayer:function(){var e=this,t=this.$store.state._col_surveyLayers.filter(function(t){return t._id===e.$store.state._col_surveyLayers_selected})[0];(0,o.default)(this.layers).forEach(function(a){var r=t.featureLayer.indexOf(a)>-1;e.$set(e.layers[a],"on",r),e.filterFeatures(a)}),this.update()},addUnlinkedSurveyFeatures:function(){if(!this.editable)return null;var e=this.$store.state._col_surveyRecords[this.$store.state._col_surveyLayers_selected];this.newSurveyFeatures=e.filter(function(e){return!e.linkedFeature}).map(function(e){return e.feature})},resetClickTimer:function(){this.clickInterval&&clearInterval(this.clickInterval),this.clickInterval=!1,this.clickTimer=0},exportLayersAsCSV:function(){var e=this;(0,o.default)(this.layers).forEach(function(t){e.layers[t].on&&(console.log("exporting layer "+t),e.exportToCsv(e.layers[t]))})},exportToCsv:function(e){var t=function(e){for(var t="",a=0;a<e.length;a++){var r=null===e[a]?"":e[a].toString();e[a]instanceof Date&&(r=e[a].toLocaleString());var n=r.replace(/"/g,'""');n.search(/("|,|\n)/g)>=0&&(n='"'+n+'"'),a>0&&(t+=","),t+=n}return t+"\n"},a=[],n=this.$store.state._col_layerAttributes.reduce(function(t,a){return a.layer===e._id&&t.push(a.name),t},[]);a=e.features.map(function(e){var t=n.map(function(e){return""});return(0,o.default)(e.properties).reduce(function(t,a){var r=n.indexOf(a),o=e.properties[a];return"object"!==(void 0===o?"undefined":(0,i.default)(o))&&r>-1&&t.splice(r,1,o),t},t)}),a=[n].concat((0,r.default)(a)),console.log(a);for(var s=e.name.toLowerCase().replace(/[\s\.]/g,"_")+".csv",l="",c=0;c<a.length;c++)l+=t(a[c]);var u=new Blob([l],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(u,s);else{var d=document.createElement("a");if(void 0!==d.download){var f=URL.createObjectURL(u);d.setAttribute("href",f),d.setAttribute("download",s),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}}},created:function(){this.setLayers()},watch:{featureLayers:function(e,t){if(e===t)return null;console.log("layeron: "+e+" layerOff:"+t),this.layerOn(t,!1),this.layerOn(e,!0)},layerPanels:function(e,t){var a=this;this.$nextTick(function(){for(var r=0;r<e.length;r++)if(e[r]!==t[r]){a.layerOn((0,o.default)(a.layers)[r],e[r]);break}}),this.checkForUpdate()},layerPanelsSelected:function(e,t){var a=this;t.forEach(function(t){-1===e.indexOf(t)&&a.layerOn(t,!1)}),e.forEach(function(e){-1===t.indexOf(e)&&a.layerOn(e,!0)})},legendBottom:function(e){var t=this;this.$nextTick(function(){return t.$refs.map.mapObject.invalidateSize()})},editable:function(e){var t=this;if(!e)return null;this.updateCollection("surveyRecords",this.$store.state._col_surveyLayers_selected).then(function(){return t.addUnlinkedSurveyFeatures()})}},mounted:function(){var e=this;this.$nextTick(function(){e.editFeatureDefaults=(0,l.default)({},e.editFeature)});var t=this;this.$nextTick(function(){_.default.mapboxGL({accessToken:"not-needed",style:e.baseMapLink||"https://api.maptiler.com/maps/cf2300ae-87ee-48ba-8e4f-cfd93d0d461e/style.json?key=ArAI1SXQTYA6P3mWFnDs"}).addTo(e.$refs.map.mapObject),e.hideControls&&e.$refs.map.mapObject,e.editable&&(t.$refs.map.$el.style.cursor="crosshair",e.$refs.map.mapObject.on("contextmenu",function(e){t.$nextTick(function(){if(t.featureClick)return null;console.log("mapclick",e),t.$store.commit("UPDATE",{key:["map","center"],value:e.latlng}),t.$store.commit("UPDATE",{key:"_col_"+t.featuresCollection+"_selected",value:""}),t.addNewSurveyFeature([e.latlng.lng,e.latlng.lat]),t.openEditor()})}))}),this.editable&&this.updateCollection("surveyRecords",this.$store.state._col_surveyLayers_selected).then(function(){return e.addUnlinkedSurveyFeatures()}),this.$store.watch(function(e){return e.neighbourhood},this.checkForUpdate)}}},function(e,t,a){"use strict";a.r(t);var r=a(79),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(1),i=(r=n)&&r.__esModule?r:{default:r};if(a(452),void 0===i.default)throw new Error("leaflet library must be installed in order to use vue2-leaflet-vectorgrid.");if(void 0===i.default.vectorGrid)throw new Error("leaflet.vectorgrid library must be installed in order to use vue2-leaflet-vectorgrid.");t.default={props:{url:{type:String,required:!0},options:{type:Object,default:function(){return{}}}},watch:{url:function(){this.updateLayer()},options:function(){this.updateLayer()}},mounted:function(){this.mapObject=i.default.vectorGrid.protobuf(this.url,this.options),this.$parent._isMounted&&this.deferredMountedTo(this.$parent.mapObject)},beforeDestroy:function(){this.removeLayer()},methods:{deferredMountedTo:function(e){this.mapObject.addTo(e),this.attributionControl=e.attributionControl;for(var t=0;t<this.$children.length;t++)"function"==typeof this.$children[t].deferredMountedTo&&this.$children[t].deferredMountedTo(this.mapObject)},setAttribution:function(e,t){this.attributionControl.removeAttribution(t),this.attributionControl.addAttribution(e)},setToken:function(e){this.options.token=e},removeLayer:function(){this.$parent.mapObject.removeLayer(this.mapObject)},updateLayer:function(){this.removeLayer(),this.mapObject=i.default.vectorGrid.protobuf(this.url,this.options),this.deferredMountedTo(this.$parent.mapObject)}}}},function(e,t,a){"use strict";a.r(t);var r=a(81),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["layer","attributeName","attributes","small"],data:function(){return{range:[],fillOpacity:100*this.layer.fillOpacity,strokeOpacity:100*this.layer.strokeOpacity,rangeMin:"",rangeMax:""}},computed:{attribute:function(){return this.attributes[this.attributeName]},valueStyles:function(){return this.$store.getters.styles[this.layer._id]?this.$store.getters.styles[this.layer._id][this.attributeName]:null}},methods:{updateLayer:function(e,t){this.$emit("layerChange",{key:e,value:t})},updateFilter:function(e,t){this.$emit("filterChange",{key:e,value:t})},updateFilterObject:function(e,t,a){var r={};r[t]=a,this.updateFilter(e,r)},setRange:function(){console.log("setting range"),this.attribute&&this.attribute.range&&(this.rangeMin=this.attribute.range.defaultMin,this.rangeMax=this.attribute.range.defaultMax,this.range=[this.rangeMin,this.rangeMax].slice(0))},toggleFeature:function(e,t){this.$emit("input",{val:e,attribute:t,range:this.range})}},watch:{attributeName:function(e,t){this.setRange()}},mounted:function(){this.setRange()}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(84),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["icon","childStyle"],data:function(){return{selected:""}},computed:{items:function(){return this.$store.getters.selectedAreas?this.$store.getters.selectedAreas.map(function(e){return{name:e.feature.properties.name,value:e.feature.properties}}):null}},methods:{update:function(e){this.$store.commit("UPDATE",{key:"neighbourhood",value:e.areaCode}),this.$store.commit("UPDATE",{key:["map","center"],value:{lon:e.centroid_lng,lat:e.centroid_lat}})}},watch:{selected:function(e,t){console.log(e,t),e!==t&&this.update(e.value)}},created:function(){var e=this.$store.getters.selectedArea;this.selected={name:e.feature.properties.name,value:e.feature.properties}},mounted:function(){var e=this;this.$store.watch(function(e,t){return t.selectedArea},function(t,a){e.selected={name:t.feature.properties.name,value:t.feature.properties}})}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(87),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(154)),n=u(a(30)),i=u(a(20)),o=u(a(63)),s=u(a(21)),l=u(a(485)),c=u(a(233));function u(e){return e&&e.__esModule?e:{default:e}}var d=a(23),f=a(54);t.default={components:{VueJsonPretty:o.default,Calculator:l.default,NestedMenu:c.default},props:["collection","filter","nestedPath","editItem","attributes","linkedFeature","permanent","title"],data:function(){return{activeTab:null,saving:!1,editedIndex:null,pasted:null,attributeTypes:["String","Number","Boolean"],editedCollection:null,edited:{},uploadDialog:!1,featureEdit:[],datatableTab:null,selectAll:!1,runedit:!1,success:!1}},computed:{mode:function(){return this.editItem?"Edit":"Add"},filterId:function(){return this.$store.state["_col_"+this.filter+"_selected"]},schema:function(){return this.$store.getters.collectionSchema(this.collection,this.filter)},schemaNames:function(){return this.schema.name?[this.schema.name,this.relatedSchema.name].reduce(function(e,t){return t&&e.push(t.slice(0,t.length-1)),e},[]):null},pastedComputed:function(){var e=this,t=this.pasted;if(!t)return[];t=t.replace(/\t/g,","),console.log("replaced",t);var a=(0,i.default)(this.schema.schema);return t.split("\n").reduce(function(t,r){var n=r.split(",");return n.length<2?t:(t.push(n.reduce(function(t,r,n){var i=a[n];return r=r.trim(),e.schema.schema[i].type===Boolean&&(r="true"===r.toLowerCase()),t[i]=r,t},{})),t)},[])}},methods:{validateItem:function(e,t){return!(t.required&&!e&&0!==e)||t._text_en+" is required"},addItem:function(e){var t=(0,n.default)({value:e.length.toString()},this.$store.state.languages.reduce(function(e,t){return e["text_"+t.name]="",e},{}));this.$set(e,e.length,t)},edit:function(){console.log("edited 1",this.edited),this.runedit=!0;var e=this.templateFromSchema(this.schema.schema),t=(0,n.default)({},e,f.getNested(this.nestedPath,this.editItem));console.log("edited",t),this.edited=(0,n.default)({},e,f.getNested(this.nestedPath,this.editItem)),console.log("editItem",this.edited,e,this.editItem,t)},save:function(e){var t=this;if(this.saving=!0,console.log(this.$refs.form.validate()),!e&&!this.$refs.form.validate())return this.saving=!1,null;var a=this.editItem?this.editItem._id:null,r=e?a:{id:a},o=this,l=(0,n.default)({},this.edited);Array.isArray(l._options)&&(0,i.default)(l._options[0]).indexOf("value")>-1&&l._options.forEach(function(e){e.value=e.value.toString()}),this.nestedPath&&(l=(0,i.default)(this.edited).reduce(function(e,a){var r=o.edited[a];return"string"==typeof r&&""===r.trim()?r=null:r&&t.schema.schema[a]&&("Number"===t.schema.schema[a].type?r=parseInt(r):"Text"===t.schema.schema[a].type&&(r=r.toString())),e[o.nestedPath+"."+a]=r,e},{})),d[this.collection].create&&(l=d[this.collection].create(this),console.log("updated object",l)),this.filter&&(l.layer=this.filterId);var c=d[this.collection].params?this.filterId:"";console.log("saving",[this.collection,r.id,l]);var u=e?"del":"update";s.default[u](this.collection,r,l,{},c).then(function(){t.edit(),t.$emit("update",!0),t.saving=!1,t.success=!0,t.$forceUpdate(),t.permanent||t.$emit("close",!0)}).catch(function(e){alert(e)})},close:function(){this.edited={},this.$emit("close",!0)},saveMany:function(){var e=this;if(this.saving=!0,console.log("filterId: "+this.filterId+" collection: "+this.collection),this.pastedComputed[0]&&(0,i.default)(this.pastedComputed[0]).length>1){this.pastedComputed=this.pastedComputed.map(function(t){return t.layer=e.filterId,t});var t=new FormData;t.append("data",(0,r.default)(this.pastedComputed)),console.log("making request..."),s.default.create(this.collection,"",t).then(function(t){console.log("uploaded"),e.close(),e.pasted=""})}},templateFromSchema:function(e){if(e)return(0,i.default)(e).reduce(function(t,a){return e[a].type===Array?t[a]=[]:e[a].type===Boolean?t[a]=!1:t[a]="",t},{})}},watch:{editItem:function(){this.edit()}},mounted:function(){var e=d[this.collection].schema;"string"==typeof e&&(e=this.attributes),this.edit()}}},function(e,t,a){"use strict";a.r(t);var r=a(89),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(a(153)),n=i(a(233));function i(e){return e&&e.__esModule?e:{default:e}}var o=a(23);t.default={props:["value","filter"],components:{NestedMenu:n.default},data:function(){return{combobox:null,operators:["+","-","*","/"],openBracket:"(",closeBracket:")",selected:null}},methods:{push:function(e){if(e||0===e){e=e.trim();var t=this.formula[this.formula.length-1];t&&this.operators.indexOf(t.text)>-1&&this.operators.indexOf(e)>-1||(this.$set(this.formula,this.formula.length,this.makeItem(e)),this.$emit("change",this.formula.map(function(e){return e.text})))}},update:function(e){console.log("updating"),this.$set(this.formula,this.selected,this.makeItem(e)),this.$emit("change",this.formula.map(function(e){return e.text}))},makeItem:function(e){return{text:e,selected:!1}},sel:function(e){console.log("sel "+e),this.selected=this.formula[e].selected?null:e,this.formula=this.formula.map(function(t,a){return t.selected=a===e&&!t.selected,t}),this.$forceUpdate()},remove:function(e){this.selected=null,this.formula=this.formula.splice(e,1),this.$emit("change",this.formula.map(function(e){return e.text}))},clear:function(){this.$emit("change",[])}},computed:{formula:function(){var e=this;return this.value?this.value.map(function(t){return e.makeItem(t)}):[]},controls:function(){return[].concat((0,r.default)(this.operators),[this.openBracket,this.closeBracket])},items:function(){return o.indicatorBlocks.schema.figure._options(this.$store,{})}}}},function(e,t,a){"use strict";a.r(t);var r=a(91),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["items","title"],data:function(){return{}},methods:{change:function(e){this.$emit("change",e)}}}},function(e,t,a){"use strict";a.r(t);var r=a(93),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(a(30)),n=i(a(551));i(a(25)),i(a(61)),i(a(34));function i(e){return e&&e.__esModule?e:{default:e}}var o=a(54);t.default={props:["features","figure","dateKey","attribute","labelKey","slider","legend","attributeStyle","title"],components:{chartTimeline:n.default},data:function(){return{processing:!1,layerSelected:"",areaLayerSelected:"",dateRange:null,dateMin:null,dateMax:null,dateLabels:null}},methods:{setDateRange:function(){var e=this.featuresFiltered;if(!e[0])return null;var t=e[0].properties.year,a=e[e.length-1].properties.year;this.dateMin=parseInt(t),this.dateMax=parseInt(a),this.dateRange=[parseInt(t),parseInt(a)]},getColor:function(e){var t=this.attributeStyle;return t&&t.range?this.$store.state.colorScale(1-(e-t.range.min)/t.range.constant).hex():t.categories[e].color}},computed:{timelineStyle:function(){return{height:document.getElementById("map_features").clientHeight+"px",display:"flex",flexDirection:"column"}},chartStyle:function(){return{height:15*this.featuresFiltered.length+"px",minHeight:this.timelineStyle.height,marginTop:"0px"}},featuresFiltered:function(){var e=this,t=this.features.filter(function(t){return t.properties[e.figure]});return o.sort(t,!1,"feature.properties.year")},chartData:function(){var e=this;if(!this.dateRange)return null;var t={borderColor:"#e3e3e3",type:"line",fill:!1};return{datasets:this.featuresFiltered.map(function(a,n){var i=a.properties[e.figure];return(0,r.default)({},t,{label:a.properties[e.labelKey],borderColor:e.getColor(a.properties[e.attribute]),data:i.map(function(t){return{t:t[e.dateKey],y:n}})})})}}},mounted:function(){this.setDateRange()}}},function(e,t,a){"use strict";a.r(t);var r=a(95),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["collection","label","prependIcon","appendIcon","text","childStyle","value","unselected"],data:function(){return{selected:""}},computed:{},methods:{update:function(e){this.$emit("change",e),this.$store.commit("UPDATE",{key:"_col_"+this.collection+"_selected",value:e})}},watch:{selected:function(e,t){console.log(e,t),e!==t&&this.update(e)}},created:function(){this.unselected||(this.selected=this.value||this.$store.state["_col_"+this.collection+"_selected"])},mounted:function(){var e=this;this.$store.watch(function(t,a){return t["_col_"+e.collection+"_selected"]},function(t,a){e.selected=t})}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(98),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],desserts:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]}}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(101),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(a(393)),n=h(a(72)),i=h(a(179)),o=h(a(394)),s=(h(a(25)),a(395),a(178)),l=h(a(37)),c=h(a(396)),u=h(a(180)),d=h(a(62)),f=h(a(71)),p=h(a(398));function h(e){return e&&e.__esModule?e:{default:e}}t.default={components:{MapView:l.default,MapNavigator:c.default,BarHorizontal:r.default,BarVertical:n.default,IndicatorKeyStat:i.default,IndicatorHeading:o.default,EditableDataList:u.default,AreaSelect:d.default,IndicatorCard:p.default,LayerSelect:f.default},data:function(){return{nav:!0,selected:null,activeTab:null,selectedData:this.$store.getters.selected}},computed:{items:function(){var e=this.$store.getters.selectedIndicatorBlocks;console.log("indicator blocks",e);var t=(0,s.translate)(e,["text","description"],this.$store.state.language);return console.log("translateion",t),console.log("indicatorsByArea",this.$store.getters.indicatorsByArea),t},figures:function(){return this.items.filter(function(e){return"Figure"===e.type})},charts:function(){var e=this.items.filter(function(e){return"Chart"===e.type||"List"===e.type});return e[0]?e:null},map:function(){return this.items.filter(function(e){return"Map"===e.type})[0]},featureLayers:function(){var e=this.$store.getters.selectedIndicatorSection;return e?e.geodata:null},section:function(){var e=this;return this.$store.state._col_indicatorSections.filter(function(t){return t._id===e.$store.state._col_indicatorSections_selected})[0]},carouselHeight:function(){return window.innerHeight/100*45}},methods:{updateSelected:function(e){this.selected=e,console.log("updated select",this.selected)}},mounted:function(){var e=this;this.$store.watch(function(e,t){return t.selectedIndicatorSection},function(t,a){if(console.log("section changed",t),e.selected=0,!t||!Array.isArray(t.geodata)||0===t.geodata.length)return null})}}},function(e,t,a){"use strict";a.r(t);var r=a(103),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(a(20)),n=l(a(153)),i=l(a(560)),o=l(a(72)),s=l(a(25));function l(e){return e&&e.__esModule?e:{default:e}}t.default={components:{BarVertical:o.default,ComparativeChart:i.default},data:function(){return{expand:!1,rotation:0,selectedYear:""}},props:["name","figure","description","unit","type","small","noChart","selected","compact"],methods:{makeSliderLabels:function(e){for(var t=e[0],a=e[e.length-1]-t+1,r=[],n=0;n<a;n++){var i=t+n;r.push(e.indexOf(i)>-1?i:"")}return r},clickHandler:function(){},toggleRotate:function(){this.selected||(this.rotation=0===this.rotation?180:0)},updateIndicator:function(){if(this.$emit("childClick"),!this.figure[0]||!this.selectedYear||this.figure[1])return null;this.$store.commit("UPDATE",{key:["navigator","indicator"],value:{figure:this.figure[0],name:this.name}}),this.$store.commit("UPDATE",{key:"year",value:this.selectedYear})},getNested:function(e,t){return(e="string"==typeof e?e.split("."):e)?e.reduce(function(e,t){return e&&e[t]?e[t]:null},t):t},validateYear:function(e){for(var t=e,a=0;a<this.dataYears.length;a++){if(-1!==this.dataYears.indexOf(t)){this.selectedYear=t;break}t++}return!0},exportToCsv:function(){var e=this,t=function(e){for(var t="",a=0;a<e.length;a++){var r=null===e[a]?"":e[a].toString();e[a]instanceof Date&&(r=e[a].toLocaleString());var n=r.replace(/"/g,'""');n.search(/("|,|\n)/g)>=0&&(n='"'+n+'"'),a>0&&(t+=","),t+=n}return t+"\n"},a=this.figure[0],i=this.unit?this.name+" ("+this.unit+")":this.name,o=this.$store.getters.allIndicatorsByAreaYear,s=[[i],["Source",this.layer.sourceLong||""],["Link",this.layer.sourceUrl||""],["-"],["Name","Code"].concat((0,n.default)(this.dataYears))];s=(0,r.default)(o).reduce(function(t,r){var n=[e.$store.getters.areaNames[r],r];return e.dataYears.forEach(function(e){var t=o[r][e][a]||"";n.push(t)}),t.push(n),t},s);for(var l=this.name.toLowerCase().replace(/[\s\.]/g,"_")+".csv",c="",u=0;u<s.length;u++)c+=t(s[u]);var d=new Blob([c],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(d,l);else{var f=document.createElement("a");if(void 0!==f.download){var p=URL.createObjectURL(d);f.setAttribute("href",p),f.setAttribute("download",l),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f)}}}},computed:{chartColor:function(){return this.selected?this.$vuetify.theme.primary:s.default.grey.lighten2},layer:function(){var e=this.figure[0].split(".")[0],t=this.$store.state._col_layers.filter(function(t){return t._id===e})[0];return t||{}},rotateStyle:function(){return{transform:"rotate("+this.rotation+"deg)"}},areaDataMatched:function(){var e=this;return this.dataYears?this.$store.getters.indicatorsForSelectedArea.filter(function(t){return e.dataYears.some(function(e){return t.year===e})}):null},areaDataLatest:function(){return this.areaDataMatched?this.areaDataMatched[this.areaDataMatched.length-1]:null},selectedIndicator:function(){if(!this.dataYears||!this.selectedYear)return{};var e=this.areaDataMatched[this.dataYears.indexOf(this.selectedYear)];return e||((e={})[this.figure[0]]=0),e},dataYears:function(){return this.$store.getters.allIndicatorKeyYears[this.figure[0]]||[]},generateChartDataSets:function(){var e=this;if("Chart"!==this.type||!this.selectedIndicator)return null;var t=this.dataYears.slice(-1)[0],a=this.selected?this.$vuetify.theme.primary:this.$vuetify.theme.grey;return console.log("this.$store.getters.allIndicatorsByAreaYear",this.$store.getters.allIndicatorsByAreaYear),{datasets:(0,r.default)(this.$store.getters.allIndicatorsByAreaYear).map(function(r){var n=e.$store.state.neighbourhood===parseInt(r);return{data:e.figure.map(function(a){return e.$store.getters.allIndicatorsByAreaYear[r][t][a]}),borderColor:n?a:e.$vuetify.theme.grey_lighten1,borderWidth:n?1:.5,borderOpacity:.2,type:"line",fill:!1,pointRadius:n?1:0}}),labels:this.figure.map(function(e){return e.split(".").slice(-1)[0]})}},chartWidthClass:function(){var e={position:"relative",width:"95%"};return"Chart"!==this.type&&(e.marginTop="-60px"),"Chart"!==this.type&&this.$vuetify.breakpoint.smAndUp&&(e.marginTop="-60px",e.width="100%",e.paddingLeft="0"),e},timeChartData:function(){var e=this,t=this.figure[0];return this.$store.getters.indicatorsForSelectedArea.filter(function(t){return e.dataYears.indexOf(t.year)>-1}).map(function(e){return e[t]})}},watch:{selectedYear:function(e,t){this.validateYear(e)},areaDataLatest:function(e){this.selectedYear=e.year}},mounted:function(){var e=this;this.$nextTick(function(){e.areaDataLatest?e.selectedYear=e.areaDataLatest.year:e.selectedYear=e.dataYears[e.dataYears.length-1],e.selected&&e.updateIndicator()})}}},function(e,t,a){"use strict";a.r(t);var r=a(105),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(a(72)),n=i(a(25));function i(e){return e&&e.__esModule?e:{default:e}}t.default={props:["name","figure","selected","year","compact"],components:{BarVertical:r.default},data:function(){return{}},methods:{prepBarChartData:function(){var e=this.figure,t=this.$store.state.neighbourhood,a=this.name,r=this.selected?this.$vuetify.theme.primary:n.default.grey.lighten1,i=this.$store.getters.allIndicatorsByYear;if(!i||!this.year)return{};var o=(i=(i=i[this.year]).map(function(t){return t[e]=t[e]||0,t})).sort(function(t,a){return!a[e]-!t[e]||+(t[e]>a[e])||-(t[e]<a[e])}),s=this.$store.getters.areaNames;this.$store.getters.selectedAreas;return{labels:o.map(function(e){return s[e.areaCode]}),area_code:t,datasets:[{label:a,backgroundColor:o.map(function(e){return e.areaCode===t?r:n.default.grey.lighten3}),borderWidth:1,borderColor:n.default.grey.lighten2,data:o.map(function(t){return t[e]})}]}}}}},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(109),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["text"]}},function(e,t,a){"use strict";a.r(t);var r=a(111),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(399),n=(o(a(21)),o(a(61))),i=o(a(1));o(a(563));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"MapView",components:{LMap:r.LMap,LTileLayer:r.LTileLayer,LMarker:r.LMarker,LPopup:r.LPopup,LTooltip:r.LTooltip,LPolygon:r.LPolygon,LGeoJson:r.LGeoJson},data:function(){var e=this;return{zoom:15,attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',showParagraph:!1,details:{neighbourhood:"",value:"",key:""},detailsDefault:{neighbourhood:"",value:"",key:""},mapOptions:{zoomSnap:.5},areasGeoJsonOptions:{onEachFeature:function(t,a){var r=e,n=r.$store.getters.indicatorsForSelectedYear.filter(function(e){return e.areaCode===t.properties.id})[0];a.bindPopup("<p><b>"+t.properties.name+"</b></p><p>"+r.$store.state.navigator.indicator.name+": "+n[r.$store.state.navigator.indicator.figure]+"</p>"),a.on({click:function(e){console.log("nnnnn",n);var t=e.target.feature.properties;r.$store.commit("UPDATE",{key:"neighbourhood",value:t.id}),r.$store.commit("UPDATE",{key:["map","zoom"],value:15}),console.log("coords",e.target._map.getCenter()),r.$store.commit("UPDATE",{key:["map","center"],value:{lon:t.centroid_lng,lat:t.centroid_lat}})},mouseover:function(e){e.target.openPopup()},mouseout:function(e){r.details=r.detailsDefault,e.target.closePopup()}})}},layers:{areas:!0}}},computed:{scale:function(){var e=this,t=this.$store.getters.indicatorsForSelectedYear.map(function(t){return parseInt(t[e.$store.state.navigator.indicator.figure])}).sort(function(e,t){return e-t});return console.log("scale sorted",this.$store.state.navigator.indicator.figure,t),{min:t[0]||0,constant:t[t.length-1]-t[0]||0,max:t[t.length-1]||0}}},methods:{log:function(){},getAreaStyle:function(e){var t=n.default.scale(["#eaeaea",this.$vuetify.theme.primary]),a=this.$store.getters.indicatorsForSelectedYear.filter(function(t){return t.areaCode===e})[0];if(!a)return{opacity:0,fillOpacity:0};var r=t((a[this.$store.state.navigator.indicator.figure]-this.scale.min)/this.scale.constant),i=this.$store.state.neighbourhood===e?this.$vuetify.theme.tertiary:"#eee";return{weight:(this.$store.state.neighbourhood,1),color:i,opacity:1,fillColor:r,fillOpacity:1}},selectArea:function(e){},mouseoverArea:function(e){},centerMap:function(){var e=35.13-16175e-8*(window.innerWidth-800);console.log("navigation lng",e),this.$store.commit("UPDATE",{key:["navigator","center"],value:{lon:e,lat:this.$store.state.navigator.center.lat}})}},mounted:function(){var e=this;this.$refs.map.mapObject.on("click",function(e){console.log(e)}),this.$refs.map.mapObject.zoomControl.setPosition("bottomright"),this.$refs.map.mapObject.eachLayer(function(e){console.log("maplayer2",e)}),this.$nextTick(function(){var t=e.$refs.map.mapObject;console.log("panes",t.getPanes()),t.createPane("leaflet-top-pane",t.getPanes().mapPane);var a=t.getPane("leaflet-top-pane");a.style.zIndex=1e3,a.style.pointerEvents="none",t.getPanes().popupPane.style.zIndex=1010,i.default.mapboxGL({attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>',accessToken:"not-needed",pane:"leaflet-top-pane",style:"https://api.maptiler.com/maps/2785ad5b-ec8f-4c26-b65b-0fd7a95f2a2e/style.json?key=ArAI1SXQTYA6P3mWFnDs"}).addTo(e.$refs.map.mapObject)}),this.$vuetify.breakpoint.xsOnly&&(this.$store.commit("UPDATE",{key:["navigator","zoom"],value:11}),this.$store.commit("UPDATE",{key:["navigator","center"],value:this.$store.state.map.defaultCenter}))}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(114),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(49)),n=u(a(149)),i=u(a(20)),o=u(a(63)),s=u(a(181)),l=u(a(232)),c=u(a(21));function u(e){return e&&e.__esModule?e:{default:e}}var d=a(54),f=a(23);a(397)();t.default={components:{VueJsonPretty:o.default,Upload:s.default,Editor:l.default},props:["collection","filter","datatable","listKey","nestedPath","cssclass","addtop","addbottom","multiselect","disabled","searchable","title"],data:function(){return{search:"",updateKey:0,dialog:!1,mode:null,saving:!1,editedIndex:null,layerDialog:!1,attributeDialog:!1,selected:0,selectedId:"",editedCollection:null,edited:{},editItem:null,selectAll:!1,items:[]}},computed:{schema:function(){return this.$store.getters.collectionSchema(this.collection,this.filter)},menuItems:function(){return this.$store.getters.areaLayers},filterId:function(){return this.$store.state["_col_"+this.filter+"_selected"]},listItems:function(){var e=this;return this.items.map(function(t,a){return t.active=e.selected===a,t})},firstItem:function(){return this.$store.state["_col_"+self.collection]?this.$store.state["_col_"+self.collection][0]:{}},tabledata:function(){if(this.layer)return this.layer.attributes},featureHeaders:function(){var e=this;if(!this.schema.schema)return[];var t=this.multiselect?[{value:"_selected",type:"select",_text:"",sortable:!1}]:[];return(0,i.default)(this.schema.schema).reduce(function(t,a){return e.schema.schema[a]._text&&t.push({value:e.nestedPath?e.nestedPath+"."+a:a,text:e.schema.schema[a]._text,type:e.schema.schema[a].type,class:["datatable-header","theme--dark"]}),t},t)}},methods:{prepareItems:function(){var e=this;console.log("preparing items",this.collection,this.filterId);var t=[];return f[this.collection].storeByLayer?(t=this.$store.state["_col_"+this.collection][this.filterId]||[],t=Array.isArray(t)?t:t[this.$store.state.neighbourhood]):(t=(0,n.default)(this.$store.state["_col_"+this.collection]),this.filter&&t[0]&&(t=t.filter(function(t){return t.layer===e.filterId}))),console.log("items",t),this.multiselect?this.addSelects(t):t||[]},getNested:function(e,t){return e?d.getNested(e,t):t},openEditor:function(e){this.editItem=e,this.dialog=!0},addSelects:function(e,t){return this.multiselect?e.map(function(e,a){return e._selected=t||!1,e._index=a,e}):e},updateCollection:function(e){var t=this;if(!e&&!f[this.collection].storeByLayer&&this.$store.state["_col_"+this.collection+"_selected"])return this.items=this.prepareItems(),console.log("rejecting"),r.default.reject();var a=this;return new r.default(function(r,n){var i=t.collection;if(f[t.collection].storeByLayer){var o=a.filterId;i={name:t.collection,layer:o},(!o||!e&&t.$store.state._col_features[o])&&n("No layer specified")}a.$store.dispatch("UPDATE_COLLECTION",i).then(function(e){t.items=t.prepareItems(),a.$forceUpdate(),r(e)}).catch(function(e){console.log("update failed",e),n()})})},setMode:function(){this.$store.commit("UPDATE",{key:"mode",value:this.collection})},select:function(e,t){this.selected=e,this.selectedId=t,this.$store.commit("UPDATE",{key:"_col_"+this.collection+"_selected",value:t}),this.setMode();var a=this;this.$nextTick(function(){return a.$forceUpdate()})},del:function(e,t){var a=this;this.loading=!0,confirm("Are you sure you want to delete this item?")&&c.default.del(e,t).then(function(e){a.updateCollection(!0),a.selected=a.selected>0?a.selected-1:0,a.loading=!1})},close:function(){this.dialog=!1},toggleSelectAll:function(){var e=this.addSelects(this.items,this.selectAll),t={name:"features",layer:this.$store.state["_col_"+this.filter+"_selected"],data:e},a=this;this.$store.dispatch("UPDATE_COLLECTION",t).then(function(){return a.$forceUpdate()})},deleteSelected:function(){var e=this,t=void 0,a=this.items.reduce(function(t,a,r){return a._selected?(a._selected=!1,e.$set(e.items,r,a),t.push(a),t):t},[]),r=f[this.collection].params?this.filterId:null;if(!confirm("Are you sure you want to delete "+a.length+" items?"))return null;t=this.selectAll&&this.filter?{layer:this.$store.state["_col_"+this.filter+"_selected"]}:a.map(function(e){return e._id}),c.default.deleteMany(this.collection,"",t,"",r).then(function(){console.log("deleted"),e.updateCollection(!0)})},logStore:function(){}},watch:{dialog:function(e){e||this.close()},menuItems:function(e){},filterId:function(e){var t=this;"features"===this.collection&&this.updateCollection(),this.$nextTick(function(){return t.items=t.prepareItems()})}},created:function(){console.log("created"),this.updateCollection().then(function(e){}).catch(function(e){return console.log("failed to update store")}),this.datatable||this.setMode()},mounted:function(){}}},function(e,t,a){"use strict";a.r(t);var r=a(116),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(a(20)),n=o(a(154)),i=(o(a(38)),o(a(21)));function o(e){return e&&e.__esModule?e:{default:e}}var s=a(23);t.default={props:["layer","layerCollection"],data:function(){return{processing:!1,isSaving:!1,uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"GeoJSON",file:"",neighbourhood:"",collection:"",layerSelected:"",indicatorFormats:["geojson","json","csv"],indicatorFormat:null,discardOutliers:!1,uploadFunction:"create",uploadFunctions:["create","update"],update:{key:"",matchUpload:"",matchExisting:""}}},methods:{filesChange:function(){this.isSaving=!0,this.file=this.$refs.file.files[0],this.neighbourhood=this.file.name.split(".")[0],this.indicatorFormat=this.file.name.split(".")[1]},close:function(){this.processing=!1,this.$emit("close",!0)},processForm:function(){var e=this;this.processing=!0;var t=s[this.collection].params?this.layerSelected:"",a=this.collection||alert("Collection required"),o="update"===this.uploadFunction?"updateMany":"create",l=new FormData;l.append("neighbourhood",this.neighbourhood),l.append("layer",this.layerSelected),l.append("file",this.file),l.append("format",this.indicatorFormat),l.append("update",(0,n.default)(this.update)),l.append("discardOutliers",this.discardOutliers),i.default[o](a,null,l,{"Content-Type":"multipart/form-data"},t).then(function(){return console.log("SUCCESS!!"),e.$store.dispatch("UPDATE_COLLECTION",{name:a,layer:e.layerSelected})}).then(function(){e.$forceUpdate(),e.close()}).catch(function(t){if(e.processing=!1,console.log("err.response",t.response),!t.response)return alert(t),null;var a=t.response.data.errors;alert((0,r.default)(a).reduce(function(e,t){return e=e+"\n"+a[t].name+": "+a[t].message},""))})}},computed:{layers:function(){var e=this.$store.state["_col_"+this.layerCollection];if(e)return e.map(function(e){return{text:e.name,value:e._id}})},collections:function(){return console.log("generating collections"),(0,r.default)(s).reduce(function(e,t){return s[t].canUpload&&e.push(t),e},[])}},mounted:function(){this.layerSelected=this.layer}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(119),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(a(179)),n=s(a(37)),i=s(a(265)),o=s(a(568));function s(e){return e&&e.__esModule?e:{default:e}}t.default={components:{MapView:n.default,IndicatorKeyStat:r.default,Timeline:i.default,PieChart:o.default},props:["selected","item","compact"],data:function(){return{}},methods:{childClick:function(){this.$emit("childClick")}}}},function(e,t,a){"use strict";a.r(t);var r=a(121),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(a(20)),n=o(a(569)),i=o(a(25));function o(e){return e&&e.__esModule?e:{default:e}}t.default={props:["name","figure","selected","year","compact"],components:{chartDoughnut:n.default},data:function(){return{}},computed:{indicator:function(){return this.$store.getters.selectedIndicator},layer:function(){return this.figure.split(".")[0]},attribute:function(){return this.figure.split(".")[1]},keys:function(){var e=this;return this.indicator?(0,r.default)(this.indicator).filter(function(t){return t.indexOf(e.figure)>-1}):[]},labels:function(){return this.keys.map(function(e){return e.split(".").slice(-1)[0]})},style:function(){return this.$store.getters.styles[this.layer][this.attribute]},colors:function(){var e=this;return this.labels.map(function(t){return e.style[t]?e.style[t].color+"99":""})},prepData:function(){var e=this;if(!this.indicator)return null;var t=this.$store.state.neighbourhood,a=this.name;this.selected?this.$vuetify.theme.primary:i.default.grey.lighten1;return{labels:this.labels,area_code:t,datasets:[{label:a,borderWidth:1,backgroundColor:this.colors,borderColor:i.default.grey.lighten2,data:this.keys.map(function(t){return e.indicator[t]})}]}}}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(124),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(a(393)),n=h(a(72)),i=h(a(179)),o=h(a(394)),s=(h(a(25)),a(395),a(178)),l=h(a(37)),c=h(a(396)),u=h(a(180)),d=h(a(62)),f=h(a(71)),p=h(a(398));function h(e){return e&&e.__esModule?e:{default:e}}t.default={components:{MapView:l.default,MapNavigator:c.default,BarHorizontal:r.default,BarVertical:n.default,IndicatorKeyStat:i.default,IndicatorHeading:o.default,EditableDataList:u.default,AreaSelect:d.default,IndicatorCard:p.default,LayerSelect:f.default},data:function(){return{nav:!0,selected:null,activeTab:null,selectedData:this.$store.getters.selected}},computed:{sections:function(){var e=this,t=this.$store.state._col_indicatorBlocks;console.log("indicator blocks",t);var a=(0,s.translate)(t,["text","description"],this.$store.state.language).reduce(function(t,a){return a.active?(t[a.layer]=t[a.layer]||{},t[a.layer].figures=t[a.layer].figures||[],t[a.layer].charts=t[a.layer].charts||[],t[a.layer].section=t[a.layer].section||e.$store.state._col_indicatorSections.filter(function(e){return e._id===a.layer})[0],"Map"===a.type?t[a.layer].map=a:"Figure"===a.type?t[a.layer].figures.push(a):"Chart"!==a.type&&"List"!==a.type||t[a.layer].charts.push(a),t):t},{});return console.log("sections",a),a}},methods:{updateSelected:function(e){this.selected=e,console.log("updated select",this.selected)}},mounted:function(){var e=this;this.$store.commit("UPDATE",{key:"hideToolbar",value:!0}),this.$store.watch(function(e,t){return t.selectedIndicatorSection},function(t,a){if(console.log("section changed",t),e.selected=0,!t||!Array.isArray(t.geodata)||0===t.geodata.length)return null}),this.$store.watch(function(e){return e.neighbourhood},function(t){e.$refs.page.getRootNode().title="EJ_Profile_2019_"+e.$store.getters.areaNames[e.$store.state.neighbourhood]}),this.$nextTick(function(){e.$refs.page.getRootNode().title="EJ_Profile_2019_"+e.$store.getters.areaNames[e.$store.state.neighbourhood],console.log("page",e.$refs.page.getRootNode())})}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(127),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(37),i=(r=n)&&r.__esModule?r:{default:r};t.default={components:{MapView:i.default},computed:{legendBottom:function(){return this.$vuetify.breakpoint.xsOnly},mapStyle:function(){return{flexDirection:"row-reverse"}},legendStyle:function(){return{maxHeight:"100%",width:this.legendBottom?"100%":"25%",maxWidth:this.legendBottom?"auto":"300px",minWidth:this.legendBottom?"100%":"200px",left:0,borderRight:this.legendBottom?"none":"1px solid #e3e3e3",backgroundColor:"#fff"}}}}},function(e,t,a){"use strict";a.r(t);var r=a(129),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(a(180)),n=d(a(181)),i=d(a(575)),o=d(a(37)),s=d(a(576)),l=d(a(62)),c=d(a(63)),u=d(a(71));d(a(21)),d(a(38));function d(e){return e&&e.__esModule?e:{default:e}}t.default={components:{EditableDataList:r.default,MapView:o.default,Upload:n.default,VueJsonPretty:c.default,Analysis:i.default,AreaSelect:l.default,LayerSelect:u.default,DeleteAll:s.default},data:function(){return{deleteAllDialog:!1,uploadDialog:!1,analysisDialog:!1,activeTab:null,pages:null,tab:"features",scrollLow:!1,minimap:{position:"fixed",top:"20px",left:"20px",width:"20%",height:"200px"}}},computed:{minimapOn:function(){return this.scrollLow&&this.$vuetify.breakpoint.mdAndUp},iconise:function(){return this.$vuetify.breakpoint.smAndDown},tabs:function(){return{features:{text_en:"Features",uploadLayer:this.$store.state._col_layers_selected,uploadLayerCol:"layers",filter:{collection:"layers",listKey:"data_type"},map:{featuresCollection:"features",featureLayers:this.$store.state._col_layers_selected},tables:[{type:"datalist",heading:"Attributes",collection:"layerAttributes",filter:"layers"},{type:"datalist",heading:"Calculations",collection:"layerCalcs",filter:"layers"},{type:"datalist",heading:"Features Table",multiselect:!0,collection:"features",filter:"layers",nestedPath:"feature.properties",searchable:!0},{type:"datalist",heading:"Style",collection:"styles",filter:"layers",searchable:!0}]},areas:{text_en:"Areas",uploadLayer:"areas",uploadLayerCol:"areaLayers",filter:{collection:"areaLayers"},map:{featuresCollection:"areas"},tables:[{type:"datalist",heading:"Attributes",collection:"areaAttributes",filter:"areaLayers"},{type:"datalist",heading:"Areas",collection:"areas",filter:"areaLayers",multiselect:!0,nestedPath:"feature.properties",searchable:!0}]},indicatorAttributes:{text_en:"Indicators",uploadLayer:this.$store.state._col_areaLayers_selected,uploadLayerCol:"areaLayers",filter:{collection:"areaLayers"},map:{featuresCollection:"areas"},tables:[{type:"datalist",heading:"Attached Attributes",collection:"indicatorAttributes",filter:"areaLayers"},{type:"datalist",heading:"Attached Calculations",collection:"layerCalcs",filter:"areaLayers"},{type:"json"}]},indicatorSections:{text_en:"Sections",filter:{collection:"indicatorSections"},tables:[{type:"datalist",heading:"Blocks",collection:"indicatorBlocks",filter:"indicatorSections"}]},surveys:{text_en:"Surveys",uploadLayer:this.$store.state._col_surveyLayers_selected,uploadLayerCol:"surveyLayers",filter:{collection:"surveyLayers"},map:{featuresCollection:"features",featureLayers:this.$store.getters.getSelected("surveyLayers").featureLayer,editable:!0},tables:[{type:"datalist",heading:"Questions",collection:"surveyLayerAttributes",filter:"surveyLayers"},{type:"datalist",heading:"Survey Results",multiselect:!0,collection:"surveyRecords",filter:"surveyLayers",nestedPath:"feature.properties"}]}}}},methods:{update:function(e){var t=this;this.tab=e,this.$store.commit("UPDATE",{key:"tab",value:e}),this.$nextTick(function(){t.$forceUpdate()})},log:function(){console.log("data",this),console.log("store",this.$store.state)}},mounted:function(){var e=this;window.addEventListener("scroll",function(t){window.scrollY>500&&!e.scrollLow?e.scrollLow=!0:window.scrollY<500&&e.scrollLow&&(e.scrollLow=!1)})}}},function(e,t,a){"use strict";a.r(t);var r=a(131),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(21),i=(r=n)&&r.__esModule?r:{default:r};a(23);t.default={props:["layer","areaLayer","layerCollection"],data:function(){return{processing:!1,layerSelected:"",areaLayerSelected:""}},methods:{close:function(){this.processing=!1,this.$emit("close",!0)},updateAnalysis:function(){var e=this;this.processing=!0,i.default.updateAnalysis("features",this.areaLayerSelected,{},{},this.layerSelected).then(function(t,a){a&&console.log(a),e.processing=!1,e.$store.dispatch("UPDATE_COLLECTION",{name:"indicators",layer:e.$store.state._col_areaLayers_selected})})}},computed:{layers:function(){return this.$store.state["_col_"+this.layerCollection].map(function(e){return{text:e.name,value:e._id}})||[]},areaLayers:function(){return this.$store.state._col_areaLayers.map(function(e){return{text:e.name,value:e._id}})||[]}},mounted:function(){this.layerSelected=this.$store.state["_col_"+this.layerCollection+"_selected"],this.areaLayerSelected=this.areaLayer||this.$store.state._col_areaLayers_selected}}},function(e,t,a){"use strict";a.r(t);var r=a(133),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(21),i=(r=n)&&r.__esModule?r:{default:r};t.default={data:function(){return{processing:!1,deleteConfirm:""}},methods:{close:function(){this.$emit("close",!0)},deleteAll:function(){var e=this;if("DELETE"!==this.deleteConfirm)return null;this.processing=!0,i.default.deleteMany("features","",{layer:"ObjectId:"+this.$store.state._col_layers_selected},"",this.$store.state._col_layers_selected).then(function(){console.log("deleted"),e.processing=!1,e.$store.dispatch("UPDATE_COLLECTION",{name:"features",layer:e.$store.state._col_layers_selected})}).catch(function(e){console.log(e)})}},computed:{layer:function(){return this.$store.getters.selectedLayer}}}},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(136),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);t.default=n.a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(63),i=(r=n)&&r.__esModule?r:{default:r};t.default={components:{VueJsonPretty:i.default},data:function(){return{itemsX:[{heading:"Features"},{heading:"Features"},{heading:"Features"}],items:[{heading:"Features",text:"Spatial data points (either points, polygons or lines) with attribute information including which feature layer it is associated with.",code:{type:"point",geometry:[],properties:{year:2015,feature_layer:"education",type:"college",students:500,gender:"mixed",quality_rating:10}}},{heading:"Feature Layers",text:"Feature layers determine the layer type and methods of analysis to be performed on it.",code:{name:"education",type:"point",columns:{type:{type:"string",func:"count"},students:{type:"integer",func:"sum"},gender:{type:"string",func:"count"},quality_rating:{type:"integer",func:"average"}}}},{heading:"Areas",text:"Statistical areas with which the features should be grouped for analysis"},{heading:"Area Indicators",text:"Area indicators include the results of spatial analysis between the Areas and Features and any additional secondary data e.g from JIIS"},{heading:"Surveys",text:"Surveys are extensions of Feature Layers that can be used for collecting field data.\n\nSurveys can use an existing Feature Layer as a template or create a new one. In most cases spatial data will need to be uploaded in advance of the conducting the survey.However, point data can be added live via the survey map"}]}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(a(20)),n=i(a(43));function i(e){return e&&e.__esModule?e:{default:e}}t.translate=function(e,t,a){return t="string"==typeof t?[t]:t,function e(t,a,i){return t.reduce(function(t,o){if("object"===(void 0===o?"undefined":(0,n.default)(o)))return a.forEach(function(e){o[e+"_"+i]&&(o[e]=o[e+"_"+i])}),(0,r.default)(o).forEach(function(t){Array.isArray(o[t])&&e(o[t],a,i)}),(t=t||[]).push(o),t},[])}(e=Array.isArray(e)?e:[e],t,a)}},function(e,t,a){"use strict";a.r(t);var r=a(192),n=a(102);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(562);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/IndicatorKeyStat.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(198),n=a(113);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(567);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/EditableDataList.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(185),n=a(115);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Upload.vue",t.default=s.exports},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"pa-3"},[a("v-select",{attrs:{name:"layer",items:e.layers,label:"Layer"},model:{value:e.layerSelected,callback:function(t){e.layerSelected=t},expression:"layerSelected"}}),e._v(" "),a("v-select",{attrs:{name:"areaLayer",items:e.areaLayers,label:"Area"},model:{value:e.areaLayerSelected,callback:function(t){e.areaLayerSelected=t},expression:"areaLayerSelected"}}),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",dark:"",depressed:""},on:{click:function(t){return e.close()}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"blue",dark:"",depressed:"",loading:e.processing},on:{click:function(t){return e.updateAnalysis()}}},[e._v("Analyse")])],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.items,function(t,r){return a("v-flex",{attrs:{xs12:"","py-4":""}},[a("div",{staticClass:"title pb-2"},[e._v(e._s(t.heading))]),e._v(" "),a("div",{staticClass:"subheading",staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(t.text))]),e._v(" "),t.code?a("vue-json-pretty",{staticClass:"pa-3 my-2 code",attrs:{data:t.code}}):e._e()],1)}),1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{staticClass:"px-3 pt-0",attrs:{fluid:"","grid-list-xl":""}},[a("div",{staticStyle:{}},[a("div",{staticClass:"data-toolbar",style:{top:e.$vuetify.breakpoint.xsOnly?"140px":0}},[a("v-tooltip",{attrs:{bottom:"","open-delay":"100"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"grey",flat:"",icon:e.iconise},on:{click:function(t){e.uploadDialog=!0}}},r),[a("v-icon",{},[e._v("cloud_upload")]),e._v(" "),a("span",{staticClass:"hidden-sm-and-down ml-2"},[e._v("Upload")])],1)]}}])},[e._v(" "),a("span",[e._v("Upload Data")])]),e._v(" "),a("v-tooltip",{attrs:{bottom:"","open-delay":"100"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"grey",flat:"",icon:e.iconise},on:{click:function(t){e.analysisDialog=!0}}},r),[a("v-icon",{},[e._v("assessment")]),e._v(" "),a("span",{staticClass:"hidden-sm-and-down ml-2"},[e._v("Update Feature Analysis")])],1)]}}])},[e._v(" "),a("span",[e._v("Update Feature Analysis")])]),e._v(" "),a("v-menu",{attrs:{"offset-y":"","min-width":"300px",dark:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",{attrs:{color:"grey"}},[e._v("more_vert")])],1)]}}])},[e._v(" "),a("v-list",{attrs:{dense:"",dark:""}},[a("v-list-tile",{on:{click:function(t){e.deleteAllDialog=!0}}},[a("v-list-tile-action",[a("v-icon",[e._v("delete")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Delete All")])],1)],1)],1)],1)],1)]),e._v(" "),a("v-tabs",{staticClass:"mt-2 mx-4 manage-data",attrs:{color:"background","slider-color":"primary","show-arrows":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[e._l(e.tabs,function(t,r,n){return a("v-tab",{key:n,attrs:{ripple:""},on:{click:function(t){return e.update(r)}}},[e._v(e._s(t.text_en))])}),e._v(" "),e._l(e.tabs,function(t,r,n){return a("v-tab-item",{key:n,staticClass:"pt-4",attrs:{lazy:""}},[e.$vuetify.breakpoint.xsOnly?a("layer-select",{staticClass:"ejmap-border pa-2",staticStyle:{"background-color":"white"},attrs:{collection:t.filter.collection}}):e._e(),e._v(" "),a("div",{staticClass:"text-xs-right caption grey--text",style:{marginTop:e.$vuetify.breakpoint.xsOnly?"10px":"-20px"}},[a("span",[e._v("Layer id: "+e._s(e.$store.state["_col_"+t.uploadLayerCol+"_selected"]))])]),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm3:"",xs12:""}},[e.$vuetify.breakpoint.smAndUp?a("editable-data-list",{attrs:{collection:t.filter.collection,listKey:t.filter.listKey,addbottom:!0}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm9:"",xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[t.map?a("v-flex",{staticClass:"mb-2",style:{height:e.$vuetify.breakpoint.xsOnly?"602px":"402px"},attrs:{xs12:""}},[a("map-view",{class:t.map.classObj||{minimap:e.minimapOn,fullmap:!e.minimapOn,"ejmap-border":!0},style:t.map.style||"position:relative;height:402px;",attrs:{featuresCollection:t.map.featuresCollection,height:t.map.height||"400px",featureLayers:t.map.featureLayers,editable:t.map.editable,options:t.map.options||{areaSelect:!0},legendBottom:e.scrollLow||e.$vuetify.breakpoint.xsOnly}})],1):e._e(),e._v(" "),e._l(t.tables,function(t,r){return["datalist"===t.type&&t.collection?a("v-flex",{key:r,attrs:{xs12:""}},[a("div",{staticClass:"subheading font-weight-light ejmap-border-bottom pl-3 py-2"}),e._v(" "),"datalist"===t.type&&t.collection?a("editable-data-list",{attrs:{collection:t.collection,filter:t.filter,title:t.heading,datatable:!1!==t.datatable,multiselect:t.multiselect,nestedPath:t.nestedPath,searchable:t.searchable,childClass:t.childClass,addtop:!t.addbottom,addbottom:t.addbottom,areas:"areas"===t.collection}}):e._e()],1):"json"===t.type?a("v-flex",{key:r,staticClass:"py-5",attrs:{xs12:""}},[a("div",{staticClass:"py-2 subheading font-weight-light  ejmap-border-bottom"},[e._v("Indicators ")]),e._v(" "),a("v-tabs",{attrs:{"slider-color":"primary",color:"background","show-arrows":""}},[e._l(e.$store.getters.indicatorsForSelectedArea,function(t,r){return a("v-tab",{key:r,attrs:{ripple:""}},[e._v("\n        "+e._s(t.year)+"\n      ")])}),e._v(" "),e._l(e.$store.getters.indicatorsForSelectedArea,function(e,t){return a("v-tab-item",{key:t},[a("v-card",{attrs:{flat:""}},[a("vue-json-pretty",{staticClass:"pa-3 mb-2 code caption",attrs:{data:e}})],1)],1)})],2)],1):e._e()]})],2)],1)],1)],1)})],2)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.uploadDialog,callback:function(t){e.uploadDialog=t},expression:"uploadDialog"}},[a("upload",{attrs:{layer:e.tabs[e.tab].uploadLayer,layerCollection:e.tabs[e.tab].uploadLayerCol},on:{close:function(t){e.uploadDialog=!1}}})],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.analysisDialog,callback:function(t){e.analysisDialog=t},expression:"analysisDialog"}},[a("analysis",{attrs:{layerCollection:e.tabs[e.tab].uploadLayerCol,areaLayer:e.$store.state._col_areaLayers_selected},on:{close:function(t){e.analysisDialog=!1}}})],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.deleteAllDialog,callback:function(t){e.deleteAllDialog=t},expression:"deleteAllDialog"}},[a("delete-all",{on:{close:function(t){e.deleteAllDialog=!1}}})],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{enctype:"multipart/form-data",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.processForm(t)}}},[a("div",{staticClass:"dropbox pa-3",staticStyle:{"background-color":"#fff"}},[a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:e.uploadFieldName},on:{change:function(t){return e.filesChange()}}}),e._v(" "),e.isSaving?a("v-select",{attrs:{name:"function",items:e.uploadFunctions,label:"Function"},model:{value:e.uploadFunction,callback:function(t){e.uploadFunction=t},expression:"uploadFunction"}}):e._e(),e._v(" "),"update"==e.uploadFunction?a("div",[a("v-combobox",{attrs:{items:[],chips:"",multiple:"",label:"Match Keys for Existing Records"},model:{value:e.update.matchExisting,callback:function(t){e.$set(e.update,"matchExisting",t)},expression:"update.matchExisting"}}),e._v(" "),a("v-combobox",{attrs:{items:[],chips:"",multiple:"",label:"Match Keys for Upload"},model:{value:e.update.matchUpload,callback:function(t){e.$set(e.update,"matchUpload",t)},expression:"update.matchUpload"}}),e._v(" "),a("v-text-field",{attrs:{label:"Update Key"},model:{value:e.update.key,callback:function(t){e.$set(e.update,"key",t)},expression:"update.key"}})],1):e._e(),e._v(" "),a("v-select",{attrs:{name:"collection",items:e.collections,label:"Collection"},model:{value:e.collection,callback:function(t){e.collection=t},expression:"collection"}}),e._v(" "),a("v-select",{attrs:{name:"layer",items:e.layers,label:"Layer"},model:{value:e.layerSelected,callback:function(t){e.layerSelected=t},expression:"layerSelected"}}),e._v(" "),e.isSaving?a("v-select",{attrs:{name:"format",items:e.indicatorFormats,label:"Format"},model:{value:e.indicatorFormat,callback:function(t){e.indicatorFormat=t},expression:"indicatorFormat"}}):e._e(),e._v(" "),e.isSaving?a("v-checkbox",{attrs:{name:"discardOutliers",label:"Discard features outside of layer"},model:{value:e.discardOutliers,callback:function(t){e.discardOutliers=t},expression:"discardOutliers"}}):e._e(),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",dark:"",depressed:""},on:{click:function(t){return e.close()}}},[e._v("Cancel")]),e._v(" "),e.isSaving?a("v-btn",{attrs:{type:"submit",loading:e.processing,color:"blue",dark:"",depressed:""}},[e._v("Upload")]):e._e()],1)])])},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$vuetify.breakpoint.xsOnly?a("div",[a("div",{staticClass:"pa-2 px-3 mt-0 ejmap-border-top ejmap-border-bottom",staticStyle:{"z-index":"4",top:"56px",position:"fixed",width:"100%",display:"flex"}},[a("layer-select",{attrs:{collection:"indicatorSections",text:"text_en","prepend-icon":"bar_chart","append-icon":"",childStyle:{fontWeight:500}}}),e._v(" "),a("area-select",{attrs:{"append-icon":"",childStyle:{fontWeight:300}}})],1),e._v(" "),a("v-carousel",{staticStyle:{"z-index":"2","overflow-y":"auto"},attrs:{id:"indicators-carosel",cycle:!1,"hide-controls":"","hide-delimiters":"",light:"",height:400},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.items,function(t,r){return a("v-carousel-item",{key:r},[a("indicator-card",{attrs:{item:t,selected:e.selected===r,lazy:""}})],1)}),1),e._v(" "),a("div",{staticStyle:{top:"106px",position:"fixed",width:"100% !important",height:"44%"}},[a("map-navigator",{staticStyle:{height:"100% !important",width:"100% !important"},attrs:{id:"map-panel-navigator"}})],1)],1):a("div",{class:{"flex-contents-sm":e.$vuetify.breakpoint.xsOnly,"flex-contents-md":e.$vuetify.breakpoint.smOnly,"flex-contents-lg":e.$vuetify.breakpoint.mdAndUp},staticStyle:{display:"flex"}},[a("v-navigation-drawer",{staticStyle:{"z-index":"2","padding-top":"0px"},attrs:{permanent:"",clipped:"",width:"200"}},[a("editable-data-list",{staticStyle:{background:"none"},attrs:{disabled:!0,collection:"indicatorSections"}})],1),e._v(" "),a("div",{staticStyle:{flex:"2","overflow-y":"auto"}},[a("v-container",{attrs:{fluid:"","pa-0":"","pb-5":""}},[a("v-layout",{attrs:{row:"",wrap:"","fill-height":"",pb5:"","pa-0":""}},[a("v-flex",{staticStyle:{"z-index":"2"},attrs:{xs12:"","pa-4":"","d-flex":""}},[a("div",{staticStyle:{position:"relative",display:"block",width:"100%",flex:"1"}},[a("div",{staticClass:"title mb-4 pt-1 pb-3 hidden-xs-only ejmap-border-bottom"},[a("div",{staticClass:"mr-4",staticStyle:{display:"inline-block",float:"left","margin-top":"6px"}},[e._v("  "+e._s(e.section.text_en)+" ")]),e._v(" "),a("area-select",{staticClass:"title font-weight-light"})],1),e._v(" "),e._l(e.figures,function(t,r){return a("indicator-card",{key:r,staticClass:"indicator-hover ejmap-border",staticStyle:{"margin-bottom":"20px"},attrs:{item:t,selected:e.selected===t._id},on:{childClick:function(a){return e.updateSelected(t._id)}}})}),e._v(" "),e.charts?a("div",[a("div",{staticClass:"title mb-4 pt-1 pb-3 ejmap-border-bottom"}),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},e._l(e.charts,function(t,r){return a("indicator-card",{key:r,staticStyle:{"margin-bottom":"20px"},attrs:{item:t,selected:e.selected===t._id},on:{childClick:function(a){return e.updateSelected(t._id)}}})}),1)],1):e._e(),e._v(" "),e.map?a("div",[a("div",{staticClass:"subheading mt-5 pt-4 pb-2 ejmap-border-top"},[a("span",{staticClass:"mr-3"},[e._v("Map")]),a("span",{staticClass:"font-weight-light"},[e._v(e._s(e.map.text))])]),e._v(" "),a("map-view",{staticClass:"ejmap-border",staticStyle:{position:"relative"},attrs:{contextmenu:"",featuresCollection:"features",zoomLevel:"12",height:"400px",featureLayers:e.map.figure,areas:!0}})],1):e._e()],2)])],1)],1)],1),e._v(" "),a("v-navigation-drawer",{staticStyle:{flex:"1"},attrs:{permanent:"",clipped:"",right:""}},[a("map-navigator",{class:[{mobile:e.$vuetify.breakpoint.xsOnly},"ejmap-border-left"],attrs:{id:"map-panel-navigator"}})],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.calories))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.fat))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.carbs))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.protein))]),e._v(" "),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.iron))])]}}])})},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"main-map",style:e.mapStyle},[e.layersSet?a("l-map",{ref:"map",style:{height:e.mapHeight},attrs:{zoom:e.zoomLevel||e.$store.state.map.zoom,zoomControl:!1,center:e.$store.state.map.center,options:e.mapOptions,attribution:"",id:"map_"+e.featuresCollection},on:{"update:center":e.centerUpdate,"update:zoom":e.zoomUpdate}},[e.editable?a("l-geo-json",{attrs:{geojson:e.newSurveyFeatures,options:e.getGeoJsonOptions("","Point",!0)}}):e._e(),e._v(" "),e._l(e.layers,function(t,r){return e.layers[r].on&&e.layers[r].features?a("l-geo-json",{directives:[{name:"else-if",rawName:"v-else-if",value:e.layersSet,expression:"layersSet"}],key:r,attrs:{geojson:e.layers[r].features,options:e.getGeoJsonOptions(r),"options-style":e.geoJsonStyle(r)}}):e._e()}),e._v(" "),a("l-geo-json",{attrs:{geojson:e.areasGeoJson,options:e.getGeoJsonOptions("","MultiPolygon",!0),"options-style":e.getAreaStyle(!0)}}),e._v(" "),"areas"===e.featuresCollection?a("l-geo-json",{attrs:{geojson:e.areasGeoJson,options:e.getGeoJsonOptions("","MultiPolygon"),"options-style":e.getAreaStyle()}}):e._e(),e._v(" "),e.hideControls?e._e():a("v-btn",{staticStyle:{position:"absolute",bottom:"5px",right:"5px","z-index":"1000"},attrs:{icon:""},on:{click:e.exportLayersAsCSV}},[a("v-icon",{attrs:{color:"grey"}},[e._v("get_app")])],1),e._v(" "),e.hideControls?e._e():a("div",{staticClass:"map-menu"},[a("v-menu",{attrs:{"min-width":"300px","close-on-content-click":!1,flat:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("more_vert")])],1)]}}],null,!1,3491234933),model:{value:e.mapMenu,callback:function(t){e.mapMenu=t},expression:"mapMenu"}},[a("v-spacer"),e._v(" "),e._v(" "),a("v-btn",{staticStyle:{float:"right"},attrs:{icon:""},on:{click:function(t){e.mapMenu=!1}}},[a("v-icon",[e._v("close")])],1),e._v(" "),a("v-list",{staticClass:"pb-4",attrs:{dense:""}},[a("v-subheader",[e._v("Base Map")]),e._v(" "),e._l(e.baseMaps,function(t,r){return a("v-list-tile",[a("v-switch",{key:r,attrs:{color:"primary",label:t.text},nativeOn:{click:function(a){return e.updateBaseMap(t.type,t.selected)}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"map.selected"}})],1)}),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Legend")]),e._v(" "),a("v-list-tile",[a("v-switch",{attrs:{color:"primary",label:"Hide legend"},model:{value:e.hideLegend,callback:function(t){e.hideLegend=t},expression:"hideLegend"}})],1),e._v(" "),e.surveyorAuth?[a("v-divider"),e._v(" "),a("v-subheader",[e._v("Surveys")]),e._v(" "),a("v-list-tile",[a("v-switch",{attrs:{color:"primary",label:"Survey Mode"},model:{value:e.editable,callback:function(t){e.editable=t},expression:"editable"}})],1),e._v(" "),e.editable?a("v-list-tile",[a("layer-select",{attrs:{collection:"surveyLayers",label:"Select Survey",icon:"add",unselected:!0},on:{change:e.loadSurveyLayer}})],1):e._e()]:e._e()],2)],1)],1)],2):e._e(),e._v(" "),e._l(e.layers,function(t,r){return!e.minimiseLegend&&"5d2f0b46fe977fdb42180cd2"===r&&t.on&&t.features?a("div",{staticClass:"map-info-panel ejmap-border-left ejmap-border-right"},[a("timeline",{attrs:{title:"Plan Submissions",features:t.features,figure:"timeline",dateKey:"date",attribute:t.attribute,labelKey:"plan_no",attributeStyle:t.attributes[t.attribute]}})],1):e._e()}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],style:{position:"absolute",top:"180px",zIndex:10,width:e.legendBottom?"100%":"70%"}},[a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{indeterminate:""}}),e._v(" "),a("div",{staticClass:"mt-5"},[e._v("Loading data...")])],1)]),e._v(" "),e.hideLegend?e._e():a("div",{style:e.legendStyle,attrs:{id:"map-legend"}},[e._t("default"),e._v(" "),e.minimiseLegend?e._e():a("div",{staticClass:"text-xs-center"},[e.legendBottom?a("v-icon",{attrs:{color:"grey lighten-2"}},[e._v("remove")]):e._e(),e._v(" "),e.options&&e.options.areaSelect?a("area-select",{staticClass:"ejmap-border-bottom px-3 py-1",staticStyle:{flex:"0"},attrs:{titleclass:"pb-0 pt-3 px-3 font-weight-medium"}}):e._e(),e._v(" "),e.allLayers&&e.legendBottom?a("v-select",{staticClass:"ejmap-border-bottom px-3 pt-2",attrs:{items:Object.values(e.layers),"item-text":"text_en","item-value":"_id",multiple:"",flat:""},model:{value:e.layerPanelsSelected,callback:function(t){e.layerPanelsSelected=t},expression:"layerPanelsSelected"}}):e._e()],1),e._v(" "),a("div",{style:{flex:2,maxHeight:"85vh",overflowY:e.allLayers?"none":"auto"}},[a("v-expansion-panel",{attrs:{expand:""},model:{value:e.layerPanels,callback:function(t){e.layerPanels=t},expression:"layerPanels"}},e._l(e.layers,function(t,r,n){return a("v-expansion-panel-content",{directives:[{name:"show",rawName:"v-show",value:t.showLegend,expression:"layer.showLegend"}],key:r,scopedSlots:e._u([e.allLayers&&!e.legendBottom?{key:"header",fn:function(){return[a("div",{on:{click:function(e){}}},[e._v("\n          "+e._s(t.text_en)+"\n        ")])]},proxy:!0}:null],null,!0)},[e._v(" "),a("v-card",{staticClass:"pt-2"},[a("v-card-text",{staticClass:"pa-0"},[e.minimiseLegend?e._e():a("div",{staticClass:"pt-1 px-3 grey--text text-uppercase"},[e._v("Filter")]),e._v(" "),a("v-list",e._l(t.filters,function(n,i,o){return t.on&&t.features?a("v-list-tile",{key:o,on:{click:function(a){return e.updateLayer(t._id,{key:"attribute",value:n.attribute})}}},[0!==o?[a("v-select",{staticClass:"caption",staticStyle:{flex:"3","margin-top":"-20px"},attrs:{items:["AND","OR"],value:"AND"}}),e._v(" "),a("v-btn",{staticStyle:{margin:"0px -10px -10px 10px"},attrs:{icon:""},on:{click:function(a){return e.removeFilter(t,i)}}},[a("v-icon",{attrs:{small:""}},[e._v("close")])],1)]:e._e(),e._v(" "),a("v-list-tile-content",[a("map-legend",{key:o,staticClass:"ejmap-border-bottom",staticStyle:{width:"100%"},attrs:{layer:t,attributes:t.attributes,attributeName:t.filters[i].attribute,small:e.minimiseLegend},on:{filterChange:function(a){e.updateLayer(t._id,a,"filters."+i),e.updateLayer(t._id,a)},layerChange:function(a){e.updateLayer(t._id,a)},toggleFeature:function(t){e.filterFeatures(r,t)}}})],1)],2):e._e()}),1),e._v(" "),e.minimiseLegend?e._e():[a("div",{staticClass:"text-xs-right",staticStyle:{width:"100%"}},[a("v-btn",{staticClass:"caption grey--text",attrs:{depressed:"",color:"rgba(0,0,0,0)"},on:{click:function(a){return e.addFilter(t)}}},[e._v("Add filter"),a("v-icon",{attrs:{small:""}},[e._v("add")])],1)],1),e._v(" "),a("div",{staticClass:"px-3 grey--text text-uppercase"},[e._v("Opacity")]),e._v(" "),a("div",{staticClass:"px-3 caption grey--text text--darken-2",staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("div",{staticClass:"caption mt-2",staticStyle:{flex:"1"}},[e._v("Fill")]),e._v(" "),a("v-slider",{staticClass:"px-2 mt-0",attrs:{min:"0",max:"100","track-color":"rgba(0,0,0,0)"},model:{value:t.fillOpacity,callback:function(a){e.$set(t,"fillOpacity",a)},expression:"layer.fillOpacity"}}),e._v(" "),a("div",{staticStyle:{"flex-basis":"100%"}}),e._v(" "),a("div",{staticClass:"caption mt-2",staticStyle:{flex:"1"}},[e._v("Stroke")]),e._v(" "),a("v-slider",{staticClass:"px-2 mt-0",attrs:{min:"0",max:"100","track-color":"rgba(0,0,0,0)"},model:{value:t.strokeOpacity,callback:function(a){e.$set(t,"strokeOpacity",a)},expression:"layer.strokeOpacity"}})],1)]],2)],1)],1)}),1)],1)],2),e._v(" "),e.dialog&&e.editable?a("v-dialog",{attrs:{"max-width":"700px",fullscreen:e.$vuetify.breakpoint.xsOnly,persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.layersSet?a("l-map",{style:{height:"150px",backgroundColor:"white"},attrs:{zoom:18,center:e.$store.state.map.center,options:e.mapOptions,id:"preview_map"}},[e.editable?a("l-geo-json",{attrs:{geojson:e.newSurveyFeatures,options:e.getGeoJsonOptions("","Point",!0)}}):e._e(),e._v(" "),e._l(e.layers,function(t,r){return e.layers[r].on&&e.layers[r].features?a("l-geo-json",{directives:[{name:"else-if",rawName:"v-else-if",value:e.layersSet,expression:"layersSet"}],key:r,attrs:{geojson:e.layers[r].features,options:e.getGeoJsonOptions(r),"options-style":e.geoJsonStyle(r)}}):e._e()})],2):e._e(),e._v(" "),a("v-tabs",[e._l(e.editItems,function(t,r){return a("v-tab",{key:r},[e._v("\n    Record "+e._s(r+1)+"\n  ")])}),e._v(" "),a("v-tab",[e._v("\n    New Record\n  ")]),e._v(" "),e._l(e.editItems,function(t,r){return a("v-tab-item",{key:r},[a("editor",{attrs:{collection:"surveyRecords",filter:"surveyLayers",nestedPath:"feature.properties",linkedFeature:e.$store.state._col_features_selected,editItem:t,permanent:!0},on:{close:function(t){return e.close()},update:function(){e.updateCollection("surveyRecords",e.$store.state._col_surveyLayers_selected).then(function(){return e.update()})}}})],1)}),e._v(" "),a("v-tab-item",[a("editor",{attrs:{collection:"surveyRecords",filter:"surveyLayers",nestedPath:"feature.properties",linkedFeature:e.$store.state._col_features_selected,attributes:e.attributes,permanent:!0},on:{close:function(t){return e.close()},update:function(){e.updateCollection("surveyRecords",e.$store.state._col_surveyLayers_selected).then(function(){return e.update()})}}})],1)],2)],1):e._e()],2)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticStyle:{background:"rgba(0,0,0,0.02)",border:"none"},attrs:{flat:""}},[a("table",{class:{mobile:e.$vuetify.breakpoint.xsOnly},attrs:{id:"navigator-key"}},[a("tr",{staticClass:"hidden-xs-only",attrs:{id:"navigator-header"}},[a("td",{attrs:{colspan:"2"}},[a("div",{staticClass:"subheading grey--text text--darken-2"},[e._v("\n          "+e._s(e.$store.state.navigator.indicator.name)+" - "+e._s(e.$store.state.year)+"\n          ")]),e._v(" "),a("div",{staticClass:"caption py-1"},[e._v("\n          "+e._s(e.details.neighbourhood)+"\n          "),a("div",{staticStyle:{height:"15px"}},[e._v("\n          "+e._s(e.details.value)+"\n        ")])])])]),e._v(" "),a("tr"),e._v(" "),a("tr",[a("td",{staticClass:"key-gradient ejmap-border"}),e._v(" "),a("td",{staticClass:"key-figures"},[a("div",{staticClass:"key-max"},[e._v("\n            "+e._s(e.scale.max.toFixed(0))+"\n          ")]),e._v(" "),a("div",{staticClass:"key-min"},[e._v("\n            "+e._s(e.scale.min.toFixed(0))+"\n          ")])])])]),e._v(" "),a("l-map",{ref:"map",attrs:{zoom:e.$store.state.navigator.zoom,center:e.$store.state.navigator.center,options:e.mapOptions,id:"navigation-map"},on:{click:function(t){return e.log()}}},e._l(e.$store.state._col_areas.filter(function(e){return e.feature}),function(t,r){return a("l-geo-json",{key:t._id,attrs:{geojson:t.feature,options:e.areasGeoJsonOptions,"options-style":e.getAreaStyle(t.feature.properties.id)}})}),1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.items?a("v-select",{staticClass:"area-select",style:e.childStyle,attrs:{items:e.items,"item-text":"name","item-value":"value","return-object":"",color:"tertiary",solo:"",flat:"",dense:"","prepend-icon":e.icon},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):e._e()},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-select",{staticClass:"area-select",style:e.childStyle,attrs:{items:e.$store.state["_col_"+e.collection],"item-text":e.text||"name","item-value":"_id",flat:"",label:e.label,"prepend-icon":e.prependIcon,"append-icon":e.appendIcon},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{class:[{selected:e.selected&&e.$vuetify.breakpoint.smAndUp}],staticStyle:{background:"none"},attrs:{flat:""},on:{click:function(t){return e.updateIndicator()}}},["List"===e.type&&e.selectedIndicator?a("div",[a("v-list",e._l(e.selectedIndicator[e.figure[0]],function(t,r){return a("v-list-item",[a("v-list-tile-action",[e._v("\n            "+e._s(r)+"\n          ")]),e._v(" "),a("v-list-tile-content",[e._v("\n            "+e._s(t)+"\n          ")])],1)}),1)],1):"Figure"===e.type&&e.selectedIndicator?a("v-layout",{class:{"pa-3":!e.compact,"pa-2":e.compact},staticStyle:{position:"relative",background:"white"},attrs:{"align-center":"",wrap:""}},[a("v-flex",{class:{"xs8 sm8 md8":e.compact,sm4:!e.compact},style:{display:e.compact?"flex":"block"},attrs:{"align-center":"","order-xs1":"",xs4:""}},[a("div",{class:[{"body-1":e.compact,subheading:!e.compact},"font-weight-light"],style:{minWidth:e.compact?"180px":0}},[e._v("\n          "+e._s(e.name)+"\n        ")]),e._v(" "),"Figure"===e.type?a("div",{staticStyle:{"overflow-x":"visible",display:"inline-block","white-space":"nowrap"}},[a("span",{class:[{"display-1":!e.compact,subheading:e.compact},"py-0"]},[e._v("\n            "+e._s(e.selectedIndicator[e.figure[0]]||0)+"\n          ")]),e._v(" "),e.unit?a("span",{class:[{"subheading ml-1":!e.compact,caption:e.compact}]},[e._v("\n            "+e._s(e.unit)+"\n          ")]):e._e()]):e._e(),e._v(" "),a("div",{class:[{"caption pl-2":e.compact},"font-weight-light"]},[e._v(e._s(e.selectedYear&&e.selectedYear!==e.$store.state.year?"("+e.selectedYear+")":""))])]),e._v(" "),a("v-flex",{class:{"mb-5":e.selected&&e.$vuetify.breakpoint.smOnly&&!e.compact,"my-3":e.selected&&e.$vuetify.breakpoint.xsOnly&&!e.compact,"xs-offset2 sm8 md4":!e.compact,"xs4 sm4 md4":e.compact},attrs:{"order-xs3":"","order-sm2":"","sm-offset-4":"","pt-3":""}},[a("div",{style:e.chartWidthClass},["Figure"===e.type?a("comparative-chart",{attrs:{name:e.name,figure:e.figure,year:e.selectedYear,selected:e.selected||e.compact,compact:e.compact}}):e._e()],1)]),e._v(" "),e.compact?e._e():a("v-flex",{class:{"hidden-sm-and-down":!e.selected},attrs:{"order-xs2":"",xs8:"","offset-xs0":"","order-sm3":"","offset-md1":"",md3:"",mt4:""}},[a("v-sparkline",{attrs:{value:e.timeChartData,color:e.chartColor,height:"70",smooth:"","stroke-linecap":"square","line-width":"8",width:"700"}}),e._v(" "),a("v-slider",{staticStyle:{width:"100%","margin-top":"0px","margin-bottom":"-30px"},attrs:{"track-color":"transparent","always-dirty":"","inverse-label":"","tick-labels":e.makeSliderLabels(e.dataYears),ticks:"always","tick-size":2,min:e.dataYears[0],max:e.dataYears[e.dataYears.length-1],"z-index":"500"},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1)],1):"Chart"===e.type?a("div",{staticClass:"pa-3",staticStyle:{background:"white"}},[a("div",{staticClass:"subheading font-weight-light"},[e._v(e._s(e.name))]),e._v(" "),a("bar-vertical",{staticStyle:{height:"300px","margin-bottom":"-40px"},attrs:{"x-labels":!0,"y-labels":!0,"chart-data":e.generateChartDataSets}})],1):e._e(),e._v(" "),e.selected?a("div",{staticClass:"pa-3 ejmap-border-top",staticStyle:{"background-color":"white"}},[a("v-flex",{staticClass:"grey--text text--darken-1",attrs:{xs12:""}},[a("div",[a("span",[e._v("Source:")]),a("a",{attrs:{href:e.layer.sourceUrl}},[e._v(e._s(e.layer.sourceShort))])]),e._v(" "),a("div",[a("span",[e._v("Notes:")]),e._v(e._s(e.description))])]),e._v(" "),a("v-tooltip",{attrs:{bottom:"","open-delay":"100"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticStyle:{position:"absolute",bottom:"5px",right:"5px"},attrs:{icon:""},on:{click:e.exportToCsv}},r),[a("v-icon",{attrs:{color:"grey"}},[e._v("get_app")])],1)]}}],null,!1,547078210)},[e._v(" "),a("span",[e._v("Download data")])])],1):e._e()],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"pa-3"},[a("div",[e._v("Are you sure you want to delete all features in layer: "+e._s(e.layer.name)+" ?")]),e._v(" "),a("v-text-field",{attrs:{label:"Type DELETE to confirm"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}}),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",dark:"",depressed:""},on:{click:function(t){return e.close()}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{loading:e.processing,color:"red",dark:"",depressed:""},on:{click:function(t){return e.deleteAll()}}},[e._v("Delete")])],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return this.$store.state._col_features?t("map-view",{staticStyle:{position:"relative",height:"400px"},attrs:{contextmenu:"",height:this.legendBottom?"80%":"",featureLayers:this.$store.state._col_layers_selected,featuresCollection:"features",zoomLevel:"12",editable:!0,allLayers:!0,legendBottom:this.legendBottom,options:{legendStyle:this.legendStyle,areaSelect:!0,mapStyle:this.mapStyle}}}):this._e()},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item.datatable?a("div",{staticClass:"py-3"},[a("v-divider"),e._v(" "),a("div",{staticClass:"title py-3"},[e._v(e._s(e.item.name))]),e._v(" "),a("v-data-table",{attrs:{items:e.item.data,headers:e.item.headers,"rows-per-page-items":[-1]},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.item.headers,function(r){return a("td",[e._v(e._s(t.item[r.value]))])})}}],null,!1,119581540)})],1):"Figure"===e.item.type||"Chart"===e.item.type?a("indicator-key-stat",{attrs:{selected:e.selected,name:e.item.text,figure:e.item.figure,description:e.item.description,unit:e.item.unit,year:e.item.year,type:e.item.type,compact:e.compact},on:{childClick:e.childClick}}):"List"===e.item.type?a("pie-chart",{attrs:{figure:e.item.figure[0]}},[e._v(e._s(e.item.text))]):"Map"===e.item.type?a("div",[a("div",{staticClass:"subheading font-weight-light mb-2 mt-5 px-2 ejmap-border-bottom"},[e._v(e._s(e.item.text))]),e._v(" "),a("map-view",{staticClass:"ejmap-border",staticStyle:{position:"relative"},attrs:{contextmenu:"",featuresCollection:"features",zoomLevel:"12",height:"400px",featureLayers:e.item.figure,areas:!0}})],1):e._e()},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mt-5 mb-4",staticStyle:{background:"none"}},[t("div",{staticClass:"grey--text text--darken-2",staticStyle:{"text-transform":"uppercase","font-size":"18px",background:"none"}},[this._v(this._s(this.text))]),this._v(" "),t("v-divider",{staticClass:"my-2"})],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"keep",app:""}},[e.$store.state.hideToolbar?e._e():r("v-toolbar",{staticClass:"ejmap-border-bottom",attrs:{app:"",light:"","clipped-left":"",flat:"",color:"#fff"}},[r("img",{attrs:{src:a(444)},on:{click:function(t){return e.log()}}}),e._v(" "),r("v-toolbar-title",[r("div",{staticStyle:{"margin-bottom":"-5px"}},[e._v("Urban Analytics")]),e._v(" "),r("div",{staticClass:"grey--text",staticStyle:{"font-size":"0.6em"}},[e._v("East Jerusalem")])]),e._v(" "),r("v-spacer"),e._v(" "),e._l(e.items,function(t,a){return r("v-tooltip",{key:a,attrs:{bottom:"","open-delay":"100"},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-btn",e._g({staticClass:"hidden-xs-only",attrs:{to:t.route,icon:""}},n),[r("v-icon",{attrs:{color:"grey darken-1"}},[e._v(e._s(t.icon))])],1)]}}],null,!0)},[e._v(" "),r("span",[e._v(e._s(t.text))])])}),e._v(" "),r("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"hidden-sm-and-up",attrs:{icon:""}},a),[r("v-icon",[e._v("more_vert")])],1)]}}],null,!1,3692373890)},[e._v(" "),r("v-list",[e._l(e.items,function(t,a){return r("v-list-tile",{key:a,attrs:{bottom:"",to:t.route}},[r("v-list-tile-action",[r("v-icon",{attrs:{color:"grey darken-1"}},[e._v(e._s(t.icon))])],1),e._v(" "),r("v-list-tile-content",[e._v("\n              "+e._s(t.text)+"\n          ")])],1)}),e._v(" "),r("v-list-tile",{on:{click:e.toggleLogin}},[r("v-list-tile-action",[r("v-icon",{attrs:{color:"grey darken-1"}},[e._v("person")])],1),e._v(" "),e.activeUser?r("v-list-tile-content",[e._v("\n            Logout\n          ")]):r("v-list-tile-content",[e._v("\n            Login\n          ")])],1)],2)],1),e._v(" "),r("v-menu",{attrs:{"min-width":"300","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-tooltip",{attrs:{bottom:"","open-delay":"100"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-list-tile",{staticClass:"hidden-xs-only"},[r("v-list-tile-content",[e.activeUser?r("v-list-tile-title",{staticClass:"grey--text body-1"},[e._v("\n                "+e._s(e.activeUser.email)+"\n              ")]):r("v-list-tile-title",{staticClass:"grey--text hidden-xs-only"},[e._v("\n                Login\n              ")])],1),e._v(" "),r("v-list-tile-action",[r("v-btn",e._g({staticClass:"hidden-xs-only",attrs:{icon:""}},Object.assign({},a,n)),[r("v-icon",{attrs:{color:"grey darken-1"}},[e._v("person")])],1)],1)],1)]}}],null,!0)},[e._v(" "),r("span",[e._v("Account")])])]}}],null,!1,1750176535)},[e._v(" "),r("v-card",[r("v-list",[e.activeUser?r("v-list-tile",{attrs:{avatar:""}},[r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(e.activeUser.name))]),e._v(" "),r("v-list-tile-sub-title",[e._v("IPCC")])],1)],1):e._e()],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),e.activeUser?r("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.logout}},[e._v("Logout")]):r("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login")])],1)],1)],1)],2),e._v(" "),e.loading?r("v-container",[r("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[r("div",{staticClass:"text-xs-center"},[r("v-progress-circular",{attrs:{indeterminate:""}}),e._v(" "),r("div",{staticClass:"mt-5"},[e._v("Loading data...")])],1)])],1):r("v-content",[r("router-view",{staticStyle:{height:"100%"}})],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editable-datatable"},[a("div",[e.datatable?a("div",[a("v-toolbar",{attrs:{flat:"",color:"rgba(0,0,0,0)"}},[a("v-toolbar-title",{staticClass:"grey--text text--darken-2 font-weight-light"},[e._v(e._s(e.title))]),e._v(" "),a("v-spacer"),e._v(" "),e.searchable?a("v-text-field",{staticClass:"mt-2 mr-3",attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),e._v(" "),a("v-toolbar-items",{staticClass:"hidden-xs-only"},[e.multiselect?a("v-checkbox",{class:["mr-2",{"mt-3":e.$vuetify.breakpoint.mdAndUp,"mt-2":e.$vuetify.breakpoint.smAndDown}],attrs:{color:"grey",flat:"",label:"Select All"},on:{change:function(t){return e.toggleSelectAll()}},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[a("v-icon",[e._v("add")]),e._v("Add\n          ")],1):e._e(),e._v(" "),e.multiselect?a("v-btn",{attrs:{color:"grey",flat:""},on:{click:function(t){return e.deleteSelected(e.collection)}}},[e._v("\n            Delete Selected\n          ")]):e._e(),e._v(" "),a("v-btn",{attrs:{color:"grey",flat:""},on:{click:function(t){return e.openEditor()}}},[a("v-icon",[e._v("add")]),e._v("Add\n          ")],1)],1)],1),e._v(" "),e.items?a("v-data-table",{staticClass:"ejmap-border",class:e.cssclass,attrs:{headers:e.featureHeaders,items:e.items,"rows-per-page-items":[20,50,100],search:e.search},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{staticClass:"attribute-row",on:{dblclick:function(a){return e.openEditor(t.item)}}},e._l(e.featureHeaders,function(r,n){return a("td",{class:[0===n?"font-weight-medium":"",r.type===Boolean?"text-xs-center":""]},[r.type===Array?e._l(e.getNested(r.value,t.item),function(t){return a("v-chip",{class:"func-"+t,attrs:{outline:"",small:""}},[e._v("\n              "+e._s("object"==typeof t?t["text_"+e.$store.state.language]||t["name_"+e.$store.state.language]||t.text||t.name:t)+"\n            ")])}):r.type===Boolean&&!0===e.getNested(r.value,t.item)?a("v-icon",{attrs:{small:"",color:"primary"}},[e._v("\n           check_circle\n         ")]):"select"===r.type?a("v-checkbox",{staticStyle:{"padding-bottom":"0"},attrs:{color:"grey"},model:{value:t.item._selected,callback:function(a){e.$set(t.item,"_selected",a)},expression:"props.item._selected"}}):[e._v("\n          "+e._s(e.getNested(r.value,t.item))+"\n        ")]],2)}),0)]}}],null,!1,2993498078)}):e._e(),e._v(" "),e.addbottom?a("v-btn",{staticClass:"mb-2",staticStyle:{float:"right"},attrs:{color:"grey",flat:""},on:{click:function(t){return e.openEditor()}}},[a("v-icon",[e._v("add")]),e._v("Add\n  ")],1):e._e()],1):a("div",[e.addtop?a("v-btn",{staticClass:"mb-2",staticStyle:{"margin-top":"-40px",float:"right"},attrs:{color:"grey",flat:""},on:{click:function(t){return e.openEditor()}}},[a("v-icon",[e._v("add")]),e._v("Add\n  ")],1):e._e(),e._v(" "),a("v-list",{class:e.cssclass,attrs:{dense:""}},e._l(e.listItems,function(t,r){return a("v-list-tile",{key:r,staticClass:"attribute-row",on:{click:function(a){return e.select(r,t._id)},dblclick:function(a){return e.openEditor(t)}},model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"x.active"}},[e.listKey&&e.schema.schema[e.listKey]._options&&e.schema.schema[e.listKey]._options[0]?a("v-list-tile-action",[a("v-icon",[e._v(e._s(e.schema.schema[e.listKey]._options.filter(function(a){return a.name===t[e.listKey]})[0].icon)+" ")])],1):e._e(),e._v(" "),a("v-list-tile-content",[t._id?a("div",{staticClass:"attribute-controls-wrapper"},[e._v("\n        "+e._s(t.text||t.text_en||t.name)+"\n        ")]):e._e()]),e._v(" "),t.active?a("div",{staticStyle:{height:"100%"}}):e._e()],1)}),1),e._v(" "),e.addbottom?a("v-btn",{staticClass:"mb-2",staticStyle:{float:"right"},attrs:{color:"grey",flat:""},on:{click:function(t){return e.openEditor()}}},[a("v-icon",[e._v("add")]),e._v("Add\n")],1):e._e()],1)]),e._v(" "),e.schema&&e.dialog?a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("editor",{attrs:{collection:e.collection,filter:e.filter,editItem:e.editItem,nestedPath:e.nestedPath},on:{close:function(t){return e.close()},update:function(t){return e.updateCollection(!0)}}})],1):e._e()],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"page",staticClass:"page",staticStyle:{"padding-top":"400px"}},[a("v-container",{attrs:{fluid:"","pa-4":""}},[a("v-layout",{attrs:{row:"",wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs3:""}},[a("div",{staticClass:"title font-weight-light"},[e._v("Neighbourhood Profile")]),e._v(" "),a("div",{staticClass:"title mt-2"},[e._v(e._s(e.$store.state.year))])]),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("area-select",{staticClass:"display-1"})],1),e._v(" "),a("v-flex",{attrs:{xs12:"","py-4":""}}),e._v(" "),a("v-flex",{attrs:{xs9:""}},[a("map-view",{staticClass:"ejmap-border-top ejmap-border-bottom ejmap-border-right",attrs:{contextmenu:"",featuresCollection:"",featureLayers:["buildingslayerid"],zoomLevel:15,height:"300px",areas:!0,hideLegend:!0,hideControls:!0,highlightColor:"black",baseMapLink:"https://api.maptiler.com/maps/22b3d9af-6774-4072-8dcd-68392fec6910/style.json?key=ArAI1SXQTYA6P3mWFnDs"}})],1),e._v(" "),a("v-flex",{attrs:{xs3:""}},[a("map-view",{staticClass:"ejmap-border-top ejmap-border-bottom",attrs:{contextmenu:"",featuresCollection:"",zoomLevel:11,height:"300px",areas:!0,hideLegend:!0,hideControls:!0,highlightColor:"black",baseMapLink:"https://api.maptiler.com/maps/22b3d9af-6774-4072-8dcd-68392fec6910/style.json?key=ArAI1SXQTYA6P3mWFnDs"}})],1),e._v(" "),a("v-flex",{staticClass:"text-xs-center",staticStyle:{"padding-top":"100px"},attrs:{xs12:""}},[e._v("International Peace and Cooperation Center ")])],1)],1),e._v(" "),a("div",{staticStyle:{flex:"2","overflow-y":"auto"}},[a("v-container",{attrs:{fluid:"","pa-0":"","pb-5":""}},e._l(e.sections,function(t,r){return a("v-layout",{key:r,staticClass:"section",attrs:{row:"",wrap:"",pb5:"","pa-4":""}},[a("v-flex",{staticClass:"title mb-4 pt-1 pb-3 ejmap-border-bottom",attrs:{xs12:""}},[a("div",{staticClass:"mr-4",staticStyle:{display:"inline-block",float:"left","margin-top":"6px"}},[e._v("  "+e._s(t.section?t.section.text_en:"")+" ")])]),e._v(" "),a("v-flex",{staticStyle:{"z-index":"2"},attrs:{xs7:"","d-flex":""}},[a("div",{staticStyle:{position:"relative",display:"block",width:"100%",flex:"1"}},[e._l(t.figures,function(t,r){return a("indicator-card",{key:r,staticClass:"indicator-hover ejmap-border-bottom",staticStyle:{"margin-bottom":"0"},attrs:{item:t,selected:e.selected===t._id,compact:!0},on:{childClick:function(a){return e.updateSelected(t._id)}}})}),e._v(" "),e._l(t.charts,function(r,n){return t.charts.length&&t.map?a("indicator-card",{key:n,staticClass:"mt-4",staticStyle:{"margin-bottom":"20px"},attrs:{item:r,selected:e.selected===r._id},on:{childClick:function(t){return e.updateSelected(r._id)}}}):e._e()})],2)]),e._v(" "),t.map||t.charts.length?a("v-flex",{attrs:{xs5:"","pl-4":""}},[t.map?a("map-view",{staticStyle:{position:"relative"},attrs:{contextmenu:"",featuresCollection:"features",zoomLevel:14,height:"300px",featureLayers:t.map.figure,areas:!0,minimiseLegend:!0,legendBottom:!0,hideControls:!0,attribute:t.map.unit,baseMapLink:"https://api.maptiler.com/maps/22b3d9af-6774-4072-8dcd-68392fec6910/style.json?key=ArAI1SXQTYA6P3mWFnDs"}},[a("div",{staticClass:"body-1 pt-2"},[a("span",{staticClass:"font-weight-light"},[e._v(e._s(t.map.text))])])]):t.charts.length?e._l(t.charts,function(t,r){return a("indicator-card",{key:r,staticStyle:{"margin-bottom":"20px"},attrs:{item:t,selected:e.selected===t._id},on:{childClick:function(a){return e.updateSelected(t._id)}}})}):e._e()],2):e._e()],1)}),1)],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-select",{staticClass:"caption grey--text pt-1",staticStyle:{width:"100%","margin-top":"-10px"},attrs:{color:"grey",items:Object.keys(e.attributes),value:e.attributeName},on:{change:function(t){e.updateFilter("attribute",t)}}}),e._v(" "),e.attribute&&e.attribute.range?a("div",{staticClass:"caption"},[e.attribute&&e.attribute.range?a("v-range-slider",{staticClass:"px-2 scale-gradient",attrs:{min:e.rangeMin,max:e.rangeMax,"track-color":"rgba(0,0,0,0)"},on:{end:function(t){e.updateFilter("range",e.range)}},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}}):e._e(),e._v(" "),a("div",{staticStyle:{"margin-top":"-15px"}},[a("span",[e._v(e._s(e.range[0]))]),e._v(" "),a("span",{staticStyle:{float:"right"}},[e._v(e._s(e.range[1]))])])],1):e._e(),e._v(" "),e._l(e.valueStyles,function(t,r){return a("div",{key:r,staticClass:"caption px-0",staticStyle:{"background-color":"none"}},[e.small?a("div",{staticStyle:{width:"50%",display:"inline-block",float:"left"}},[a("div",{style:{display:"inline-block",height:"8px",width:"8px",borderRadius:"50%",backgroundColor:t.color,border:"1px solid #999",marginRight:"5px"}}),e._v(" "),a("span",{staticClass:"caption"},[e._v(e._s(t.name))])]):a("v-switch",{attrs:{color:t.color,"input-value":t.on,label:t.name},on:{change:function(a){return e.updateFilterObject("categories",t.name,a)}}})],1)})],2)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[e.title?a("v-card-title",[e.schema&&e.schema.name?a("span",{staticClass:"headline"},[e._v(e._s(e.mode)+" "+e._s(e.schema.name.slice(0,e.schema.name.length-1)))]):e._e()]):e._e(),e._v(" "),a("v-tabs",{attrs:{color:"#f3f3f3","slider-color":"grey",grow:"",height:e.schema.canPaste?null:"0px"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",{attrs:{ripple:""},on:{click:function(e){}}},[e._v("Single")]),e._v(" "),e.schema.canPaste?a("v-tab",{attrs:{ripple:""},on:{click:function(e){}}},[e._v("Multiple")]):e._e(),e._v(" "),a("v-tab-item",[a("v-form",{ref:"form"},[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},e._l(e.schema.schema,function(t,r){return a("v-flex",{attrs:{xs12:""}},[t._options&&Array.isArray(t._options)&&t._options.length>0?a("v-select",{attrs:{items:t._options,label:t._text,"small-chips":t._multiple,multiple:t._multiple,clearable:"","item-text":Object.keys(t._options[0]).filter(function(e){return e.indexOf("text")>-1||e.indexOf("name")>-1})[0],"item-value":"value",rules:[e.validateItem(e.edited[r],t)],box:"","validate-on-blur":""},model:{value:e.edited[r],callback:function(t){e.$set(e.edited,r,t)},expression:"edited[key]"}}):t._options&&t._options.component?a(t._options.component,{tag:"component",attrs:{value:e.edited[r]},on:{change:function(t){e.edited[r]=t}}}):t._options&&"dynamic"===t._options?a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("p",{staticClass:"subheading"},[e._v(" "+e._s(Object.keys(e.edited[r]).length?"Choices":"")+" ")]),e._v(" "),a("div",{staticStyle:{"flex-basis":"100%"}}),e._v(" "),e._l(e.edited[r],function(t,n){return a("div",{staticStyle:{width:"100%",display:"flex"}},[e._l(e.$store.state.languages,function(i){return a("v-text-field",{staticClass:"pl-2",attrs:{label:n+1+". "+i.text,rules:[e.validateItem(e.edited[r],n)],box:"","validate-on-blur":""},model:{value:t["text_"+i.name],callback:function(a){e.$set(t,"text_"+i.name,a)},expression:"item['text_'+l.name]"}})}),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.edited[r].splice(n,1)}}},[a("v-icon",{attrs:{color:"grey"}},[e._v("clear")])],1)],2)}),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",outline:"",color:"grey"},on:{click:function(t){return e.addItem(e.edited[r])}}},[e._v(e._s(Object.keys(e.edited[r]).length?"add option":"Make Multiple Choice"))])],2):"function"!=typeof t._options||t._categorised?t._categorised?a("div",{staticStyle:{display:"flex"}},[a("v-combobox",{attrs:{"small-chips":"",multiple:"",box:""},model:{value:e.edited[r],callback:function(t){e.$set(e.edited,r,t)},expression:"edited[key]"}}),e._v(" "),a("nested-menu",{attrs:{items:t._options(e.$store,e.edited),title:"add"},on:{change:function(t){e.edited[r].push(t)}}})],1):t.type===Boolean||"Boolean"===t.type?a("v-switch",{attrs:{label:t._text,color:"primary"},model:{value:e.edited[r],callback:function(t){e.$set(e.edited,r,t)},expression:"edited[key]"}}):t._text?a("v-text-field",{attrs:{label:t._text,type:"Number"===t.type?"number":"text",rules:[e.validateItem(e.edited[r],t)],box:"","validate-on-blur":""},model:{value:e.edited[r],callback:function(t){e.$set(e.edited,r,t)},expression:"edited[key]"}}):e._e():a("v-select",{attrs:{label:t._text,"small-chips":t._multiple,multiple:t._multiple,clearable:"",items:t._options(e.$store,e.edited,e.collection),"item-text":"name","item-value":"_id",box:"","validate-on-blur":"",rules:[e.validateItem(e.edited[r],t)]},model:{value:e.edited[r],callback:function(t){e.$set(e.edited,r,t)},expression:"edited[key]"}})],1)}),1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(t){return e.save(!0)}}},[e._v("Delete")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",flat:""},on:{click:function(t){return e.close()}}},[e._v("Close")]),e._v(" "),e.saving?a("v-progress-circular",{attrs:{indeterminate:"","mx-3":""}},[e._v("Saving...")]):a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)],1)],1),e._v(" "),a("v-tab-item",[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("div",{staticClass:"title pb-2"},[e._v("Paste attributes")]),e._v("\n      Paste as rows of text, separated by commas or tabs: "),a("br"),e._v(" "),a("v-text-field",{attrs:{hint:Object.keys(e.schema.schema).join(", "),textarea:"","auto-grow":"",rows:"3"},model:{value:e.pasted,callback:function(t){e.pasted=t},expression:"pasted"}}),e._v("\n\n      Preview\n      "),e.pastedComputed?a("vue-json-pretty",{staticClass:"pa-3 my-2 code",attrs:{data:e.pastedComputed}}):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",flat:""},on:{click:function(t){return e.close()}}},[e._v("Cancel")]),e._v(" "),e.saving?a("v-progress-circular",{attrs:{indeterminate:"","mx-3":""}},[e._v("Saving...")]):a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){return e.saveMany()}}},[e._v("Save")])],1)],1)],1),e._v(" "),a("v-snackbar",{attrs:{top:"",timeout:1e3,color:e.$store.state.colors[2]},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[a("v-icon",[e._v("check")]),e._v("Saved\n")],1)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:e.timelineStyle},[a("div",{staticClass:"pa-2 grey--text text--darken-2 ejmap-border-bottom",staticStyle:{height:"40px"}},[e._v(e._s(e.title))]),e._v(" "),e.slider&&e.dateRange?a("v-range-slider",{attrs:{min:e.dateMin,max:e.dateMax,"thumb-label":"always","thumb-color":"rgba(0,0,0,0)","thumb-size":"15",light:""},scopedSlots:e._u([{key:"thumb-label",fn:function(t){return[a("span",{staticStyle:{color:"black"}},[e._v("\n            "+e._s(t.value)+"\n          ")])]}}],null,!1,2136086678),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}):e._e(),e._v(" "),a("div",{staticStyle:{"overflow-y":"auto",flex:"1"}},[e.chartData?a("chart-timeline",{staticClass:"px-3 pb-5",style:e.chartStyle,attrs:{"x-labels":!0,"y-labels":!1,"chart-data":e.chartData}}):e._e()],1),e._v(" "),e.legend&&e.attributeStyle?a("table",{staticClass:"caption"},e._l(e.attributeStyle.categories,function(t,r){return a("tr",[a("td",{staticClass:"key-icon",style:{color:t}},[e._v("●")]),e._v(" "),a("td",{staticClass:"key-figures"},[a("span",{staticClass:"body-1 grey--text text--darken-2",staticStyle:{padding:"1px 5px"}},[e._v(e._s(r))])])])}),0):e._e()],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("div")},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("bar-vertical",{class:{"bar-chart-minimal":!this.compact,"bar-chart-minimal-small":this.compact},attrs:{"chart-data":this.prepBarChartData(),"click-handler":!0,"x-labels":!1,"y-labels":!1}})},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"pl-2"},[this._t("default")],2),this._v(" "),t("chart-doughnut",{staticStyle:{"margin-top":"-125px"},attrs:{"chart-data":this.prepData,"x-labels":!1,"y-labels":!1,showLegend:!0}})],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"subheading",attrs:{xs12:""}},[e._v("Calculation")]),e._v(" "),a("div",{staticStyle:{flex:"1"}},[a("div",{staticStyle:{"background-color":"rgba(0,0,0,0.06)","min-height":"150px","min-width":"30px",display:"flex","flex-wrap":"wrap","align-self":"flex-start"},on:{click:function(t){return t.stopPropagation(),e.sel(-1)}}},e._l(e.formula,function(t,r){return a("v-chip",{key:r,staticStyle:{height:"40px"},attrs:{close:t.selected,selected:t.selected,outline:e.operators.indexOf(t.text)>-1,color:e.operators.indexOf(t.text)>-1?"grey":"white"},on:{click:function(t){return t.stopPropagation(),e.sel(r)},input:function(t){return e.remove(r)}}},[e._v("\n          "+e._s(t.text.split(".").slice(1,t.text.split(".").length).join(".")||t.text)+"\n      ")])}),1),e._v(" "),a("div",{staticStyle:{height:"50px"}},[null!==e.selected?a("v-text-field",{staticClass:"mt-1",attrs:{box:""},on:{change:e.update},model:{value:e.formula[e.selected].text,callback:function(t){e.$set(e.formula[e.selected],"text",t)},expression:"formula[selected].text"}}):e._e()],1)]),e._v(" "),a("div",{staticStyle:{width:"120px",display:"flex","flex-wrap":"wrap","text-align":"center","justify-content":"center"}},[e._l(e.controls,function(t){return a("v-btn",{attrs:{icon:"",color:"rgba(0, 0, 0, 0.06)",value:t},on:{click:function(t){e.push(t.srcElement.textContent)}}},[e._v("\n          "+e._s(t)+"\n        ")])}),e._v(" "),a("nested-menu",{attrs:{items:e.items,title:"attributes"},on:{change:function(t){null!==e.selected?e.update(t):e.push(t)}}})],2)],1)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"full-width":"","offset-y":"",absolute:""}},[[a("v-btn",{attrs:{slot:"activator",flat:"",small:""},slot:"activator"},[e._v(e._s(e.title))])],e._v(" "),a("v-list",{attrs:{dense:""}},[e._l(e.items,function(t,r){return[t.value?a("v-list-tile",{key:r,on:{click:function(a){return e.change(t.value)}}},[e._v("\n          "+e._s(t.name)+"\n\n        ")]):t.items?a("v-menu",{key:r,attrs:{"full-width":"","offset-x":"","max-height":"500","open-on-hover":""}},[a("v-list-tile",{attrs:{slot:"activator"},on:{click:function(e){}},slot:"activator"},[a("v-list-tile-title",[e._v(e._s(t.name))])],1),e._v(" "),a("v-list",{attrs:{dense:""}},e._l(t.items,function(t,n){return a("v-list-tile",{on:{click:function(a){return e.change(r+"."+t)}}},[a("v-list-tile-title",[e._v(e._s(t))])],1)}),1)],1):e._e()]})],2)],2)},n=[];r._withStripped=!0,a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n})},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(201),n=a(86);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Editor.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(207),n=a(90);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/NestedMenu.vue",t.default=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(202),n=a(92);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Timeline.vue",t.default=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(70),n=a(73),i=n.mixins.reactiveProp;t.default={extends:n.HorizontalBar,mixins:[r.chart,i],mounted:function(){this.renderChart(this.chartData,this.options)}}},function(e,t,a){"use strict";a.r(t);var r=a(196),n=a(108);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/IndicatorHeading.vue",t.default=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indicators=function(e){return console.log("storedata",e.getters.dataByHoodYear.age_distribution),[{name_en:"Demographics",name_ar:"",value:"demographics",items:[{keystat:!0,name_en:"Population",name_ar:"",figure:"pop_year_end",description_en:""},{blocks:!0,left:[{type:"barchart",name_en:"Age Distribution (%)",name_ar:"",color:"",datasets:[{data:e.getters.dataByHoodYear.age_distribution,borderColor:"#000",type:"line",fill:!1},{label:"East Jerusalem Avg",data:e.getters.dataByCityYear.age_distribution,borderColor:e.state.theme.primary,type:"line",fill:!1}],labels:["0-4","5-14","15-24","25-44","45-64","65-74","75+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"age_median",name_en:"Median Age",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"dependency_youth",name_en:"Youth Dependency",name_ar:"",description_en:"Aged 24 or under",description_ar:"",unit:"%"}]},{keystat:!0,figure:"growth_total",name_en:"Population Growth",name_ar:"",description_en:"For year ("+e.state.year+")",description_ar:"",unit:"%"},{keystat:!0,figure:"socio_rank",name_en:"Socio-Eocnomic Rank",name_ar:"",description_en:"For year 2008",description_ar:"",unit:""},{keystat:!0,year:2012,figure:"socio_level",name_en:"Socio-Eocnomic Level",name_ar:"",description_en:"For year 2008",description_ar:"",unit:""}]},{name_en:"Housing",name_ar:"",value:"housing",items:[{keystat:!0,figure:"dwellings_total",name_en:"Housing Units",name_ar:"",description_en:"",description_ar:"",unit:""},{keystat:!0,figure:"household_size",name_en:"Avg. Household Size",name_ar:"",description_en:"Persons per household",description_ar:"",unit:""},{blocks:!0,left:[{type:"barchart",name_en:"Dwelling Area Distribution %/m²",name_ar:"",color:"",datasets:[{data:e.getters.dataByHoodYear.dwelling_area_distribution,borderColor:"#000",type:"line",fill:!1},{data:e.getters.dataByCityYear.dwelling_area_distribution,borderColor:e.state.theme.primary,type:"line",fill:!1}],labels:["0-40","41-60","61-80","81-100","101-140","141+"],description_en:"",description_ar:""}],right:[{keystat:!0,figure:"dwellings_new",name_en:"New Housing Units",name_ar:"",description_en:"Constructed in "+e.state.year,description_ar:"",unit:""},{keystat:!0,figure:"dwelling_growth",name_en:"Housing Units Growth",name_ar:"",description_en:"Annual increase in number of housing units",description_ar:"",unit:"%"}]}]},{name_en:"Education",name_ar:"",value:"education",geodata:{Use:"Education"},items:[{keystat:!0,year:2015,figure:"no_student",name_en:"Students",name_ar:"",description_en:"2015",description_ar:"",unit:""},{keystat:!0,year:2015,figure:"schools",name_en:"Schools",name_ar:"",description_en:"2015",description_ar:"",unit:""},{keystat:!0,year:2015,figure:"no_classes",name_en:"Classes",name_ar:"",description_en:"2015",description_ar:"",unit:""},{datatable:!0,name_en:"Schools",name_ar:"",data:e.getters.educationalByHood,headers:[{text:"Type",value:"Sort2"},{text:"Management",value:"Type"},{text:"Gender",value:"Gender"},{text:"Students",value:"no_student"},{text:"Classes",value:"no_classes"}],description_en:"",description_ar:""}]},{name_en:"Public Facilities",name_ar:"",value:"public_facilities",items:[{keystat:!0,year:2015,figure:"sports_facilities",name_en:"Sports Facilities",name_ar:"",description_en:"2015",description_ar:"",unit:""},{keystat:!0,year:2015,figure:"hospitals",name_en:"Hospitals",name_ar:"",description_en:"2015",description_ar:"",unit:""}]},{name_en:"Planning",name_ar:"",value:"planning",items:[{keystat:!0,year:2013,figure:"total_area",name_en:"Total Area",name_ar:"",description_en:"2013",description_ar:"",unit:"dunum"},{keystat:!0,year:2013,figure:"residential_dunum",name_en:"Planned Residential",name_ar:"",description_en:"2013",description_ar:"",unit:"dunum"},{keystat:!0,year:2013,figure:"residenial_commercial",name_en:"Planned Residential/Commercial",name_ar:"",description_en:"2013",description_ar:"",unit:"dunum"},{keystat:!0,year:2013,figure:"open_spaces",name_en:"Planned Open Space",name_ar:"",description_en:"2013",description_ar:"",unit:"dunum"},{keystat:!0,year:2013,figure:"pub_buildings",name_en:"Planned Public Facility",name_ar:"",description_en:"2013",description_ar:"",unit:"dunum"}]}]}},function(e,t,a){"use strict";a.r(t);var r=a(189),n=a(110);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(565);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/MapNavigator.vue",t.default=s.exports},,function(e,t,a){"use strict";a.r(t);var r=a(195),n=a(118);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/IndicatorCard.vue",t.default=s.exports},,,function(e,t,a){"use strict";(function(e){var t=_(a(43)),r=_(a(149)),n=_(a(49)),i=_(a(30)),o=_(a(20)),s=_(a(34)),l=_(a(443)),c=_(a(557)),u=_(a(580));_(a(1));a(581),a(582);var d=_(a(583)),f=_(a(584)),p=_(a(21)),h=_(a(61)),v=(_(a(25)),a(585)),m=a(586),y=_(a(587));function _(e){return e&&e.__esModule?e:{default:e}}var g=a(23),b=a(397)(),x=a(54);e.DEBUG=!1,s.default.use(u.default,{options:{customProperties:!0},theme:v.theme}),s.default.use(d.default),s.default.use(f.default),s.default.use(y.default),s.default.config.productionTip=!0;var k=(0,o.default)(g).reduce(function(e,t){return e["_col_"+t]=g[t].storeByLayer?{}:[],e["_col_"+t+"_selected"]="",e},{}),S=new f.default.Store({state:(0,i.default)({hideToolbar:!1,mode:null,activeUser:{},selectedFeatureLayers:[],updateCount:0,indicators:[],collections:{},cityIndicators:[],neighbourhood:2412,areaLayer:"5cf510e19bfa58b6c509903b",year:2019,language:"en",languages:[{name:"en",text:"English"},{name:"ar",text:"Arabic"}],theme:v.theme,tab:"",colorScale:h.default.scale([v.theme.scaleMin,v.theme.scaleMax]),colors:["#ff267e","#26ffa7","#267eff","#000","#f46441"],map:{zoom:15,center:{lat:31.827982118391024,lng:35.22958321000619},defaultCenter:{lat:31.78845754836993,lng:35.2121981978},opacity:1},hidden:{},navigator:{zoom:11.8,center:{lat:31.827982118391024,lng:35.22958321000619},defaultCenter:{lat:31.827982118391024,lng:35.22958321000619},indicator:{figure:"pop_year_end",name:"Population"}},styles:{},legendStyles:{},geo:{areas:[],facilities:[],educational:[],features:[],selected:null},layers:[]},k),actions:{UPDATE_COLLECTION:function(e,t){var a=e.state,r=e.commit,i={name:t.name||t,query:t.query||{},layer:t.layer};if(g[i.name].storeByLayer){if(i.layer=i.layer||a._col_layers_selected,i.layer||rej("no feature layer defined"),console.log(i.layer),a["_col_"+g[i.name].layerCollection].filter(function(e){return e._id===i.layer})[0].filtered){var o=a._col_areaLayers.filter(function(e){return e._id===a._col_areaLayers_selected})[0].code;i.query["feature.properties."+o]=a.neighbourhood,i.nestedKey=a.neighbourhood}}else i.name;function s(e){if(g[i.name].storeByLayer)r("UPDATE_FEATURES",{collection:i.name,key:i.layer,value:e,nestedKey:i.nestedKey});else{var t="_col_"+i.name,n=t+"_selected";r("UPDATE",{key:t,value:e}),!a[n]&&e[0]&&r("UPDATE",{key:n,value:e[0]._id})}}return new n.default(function(e,a){if(t.data)return s(t.data),e(t.data);console.log("making api request",i.name,i.query,i.layer),p.default.find(i.name,i.query,"",{lean:!0},i.layer).then(function(t,r){r&&(console.log("api error",r),a(r)),s(t.data),e(t.data)}).catch(function(e){e.response&&console.log("api error: "+i.name,e.response)})})},UPDATE_INDICATORS:function(e){var t=e.state,a=e.commit;p.default.find("indicators",{areaLayer:t.areaLayer}).then(function(e){return a("UPDATE",{key:"indicators",value:e.data})}).catch(function(e){console.log("failed to update indicators",e)})}},mutations:{GET_INDICATORS:function(e){p.default.find("areas",{}).then(function(t){e.geo.areas=t.data}),p.default.find("indicators",{}).then(function(t){if(!t.data)return console.log("cannot retrieve in"),null;var a=t.data.map(function(e){return e.dependency_youth=((e.age_0_4+e.age_5_14+e.age_15_24)/e.pop_year_end*100).toFixed(1),e.growth_total=(e.pop_growth_total/e.pop_year_end*100).toFixed(1),e.growth_natural=(e.pop_growth_natural/e.pop_year_end*100).toFixed(1),e.household_size=(e.pop_year_end/e.dwellings_total).toFixed(1),e.dwelling_density=(e.dwelling_area_avg/e.household_size).toFixed(1),e.prevyear=t.data.filter(function(t){return t.name===e.name&&t.year===e.year-1})[0],e.dwellings_new=e.prevyear?e.dwellings_total-e.prevyear.dwellings_total:null,e.dwelling_growth=(e.dwellings_new/e.dwellings_total*100).toFixed(1),e.age_distribution_labels=["age_0_4","age_5_14","age_15_24","age_25_44","age_45_64","age_65_74","age_75_"],e.age_distribution=e.age_distribution_labels.map(function(t){return e[t]/e.pop_year_end*100}),e.dwelling_area_distribution_labels=["dwellings_area_0_40","dwellings_area_41_60","dwellings_area_61_80","dwellings_area_81_100","dwellings_area_101_140","dwellings_area_141"],e.dwelling_area_distribution=e.age_distribution_labels.map(function(t){return e[t]/e.dwellings_total*100}),e});e.indicators=a.filter(function(e){return 9999!==e.area_code}),e.cityIndicators=a.filter(function(e){return 9999===e.area_code});var r=(0,m.featureAnalysis)();p.default.find("features",{}).then(function(t){e.geo.facilities=t.data,e.facilities=t.data.map(function(e){return e.feature.properties}),console.log("facilities",e.facilities);var a=t.data.filter(function(e){return"Educational"===e.feature.properties.Use});e.geo.educational=a,a=r.sum(a,["Sort1","Sort2","Gender","no_student","no_females","no_classes","Type"]),e.indicators.forEach(function(t,r){2015===t.year&&t.area_code&&(e.indicators[r]=(0,i.default)({},t,a[t.area_code.toString()]))}),e.cityIndicators.forEach(function(t,r){2015===t.year&&(e.cityIndicators[r]=(0,i.default)({},t,a.total))}),console.log("cityindicators",e.cityIndicators)})})},UPDATE_FEATURES:function(e,t){console.log("updating feature",t.nestedKey,t.key,t.value);var a=g[t.collection].sort,r=g[t.collection].embedIds;t.value&&a&&(t.value=x.sort(t.value,!1,a)),t.value&&r&&(t.value=t.value.map(function(e){return x.getNested(r,e)._id=e._id,e})),s.default.set(e["_col_"+t.collection],t.key,t.value)},UPDATE_FEATURE_PROPERTIES:function(e,t){e._col_features[t.layer].splice(t.feature._index,1,t.feature);var a=function e(t){if(Array.isArray(t)){if("number"==typeof t[0])return t;e(t[0])}else e(t.geometry.coordinates)}(t.feature.feature.geometry.coordinates);console.log("coords",a),e.map.center={lat:a[1],lng:a[0]}},SET_HIDDEN:function(e,t){t.value?s.default.set(e.map,t.key,t.value):s.default.delete(e.map,t.key)},UPDATE_USER:function(e,t){t.groups=(0,r.default)(t.groups).reduce(function(e,t){return e[t]=!0,e},{}),e.activeUser=t},UPDATE:function(e,a){var r,n;Array.isArray(a.key)?(a.key.length<3?(r=e[a.key[0]],n=a.key[1]):(r=x.getNested(a.key.slice(0,a.key.length-1),e),n=a.key[a.key.length-1]),console.log("updating store nested: "+n,a.value,r)):(console.log("updating store value: "+a.key,a.value),r=e,n=a.key),"object"!==(0,t.default)(a.value)||Array.isArray(a.value)?s.default.set(r,n,a.value):(0,o.default)(a.value).forEach(function(e){s.default.set(r[n],e,a.value[e])})},UPDATE_AREA:function(e,t){var a=e.geo.areas.filter(function(e){return e.feature.properties.id===t})[0];console.log(a),e.neighbourhood=t,e.map.center={lon:a.feature.properties.Centroids_x,lat:a.feature.properties.Centroids_y}}},getters:{styles:function(e){var t=e._col_styles.reduce(function(e,t){return e[t.layer]=e[t.layer]||{},e[t.layer][t.attribute]=e[t.layer][t.attribute]||{},e[t.layer][t.attribute][t.name]=t,e},{});return(0,o.default)(t).forEach(function(a){(0,o.default)(t[a]).forEach(function(r){var n=(0,o.default)(t[a][r]),i=e.colors;n.length>e.colors.length&&(i=h.default.scale(e.colors).mode("lch").colors(n.length));var s=t[a][r];n.forEach(function(e,t){s[e].color=s[e].color||i[t],s[e].on=!0})})}),t},areaSelect:function(e,t){return e.indicators?t.dataByYear.concat(t.dataByCityYear):[]},neighbourhoods:function(e,t){return e.indicators?e.indicators.reduce(function(e,t){return-1===(e=e||[]).indexOf(t.name)&&e.push(t.name),e},[]):[]},years:function(e){return e.indicators?e.indicators.reduce(function(e,t){return-1===(e=e||[]).indexOf(t.year)&&t.year&&e.push(t.year),e},[]):[]},dataByYear:function(e){return e.indicators?e.indicators.filter(function(t){return t.year===e.year}):[]},dataByNeighbourhood:function(e){if(!e.indicators)return[];var t=e.indicators.filter(function(t){return t.area_code===e.neighbourhood});return t.length>0?t:e.cityIndicators},dataByHoodYear:function(e,t){return e._col_indicators.filter(function(t){return t.areaCode===e.neighbourhood&&t.year===e.year})[0]||{}},dataByCityYear:function(e){return e.cityIndicators.filter(function(t){return t.year===e.year})[0]||{}},educationalByHood:function(e){console.log("edubyhood - init",e.geo.educational);var t=e.geo.educational.reduce(function(t,a){return a.feature.properties.mygeodat_5===e.neighbourhood&&t.push(a.feature.properties),t},[]);return console.log("edubyhood",t),t},educationalGeoByHood:function(e){if(!e.geo.educational)return[];var t=e.geo.educational.filter(function(t){return t.feature.properties.mygeodat_5===e.neighbourhood});return console.log("educational geo",t),t},selectedAreas:function(e){return e._col_areas.filter(function(t){return t.layer===e._col_areaLayers_selected})},selectedArea:function(e,t){return t.selectedAreas.filter(function(t){return t.feature.properties.id===e.neighbourhood})[0]},areaNames:function(e,t){return t.selectedAreas?t.selectedAreas.reduce(function(e,t){return e[t.feature.properties.areaCode]=t.feature.properties.name,e},{}):null},selectedLayer:function(e){return e._col_layers?e._col_layers.filter(function(t){return t._id===e._col_layers_selected})[0]:null},selectedLayerAttributes:function(e){return e._col_layerAttributes?e._col_layerAttributes.filter(function(t){return t.layer===e._col_layers_selected}):null},selectedIndicatorBlocks:function(e){return e._col_indicatorBlocks?e._col_indicatorBlocks.filter(function(t){return t.active&&t.layer===e._col_indicatorSections_selected}):null},selectedIndicatorSection:function(e){return e._col_indicatorSections_selected?e._col_indicatorSections.filter(function(t){return t._id===e._col_indicatorSections_selected})[0]:null},allIndicatorKeyYears:function(e,t){var a=t.allIndicatorsByYear;return a?(0,o.default)(a).reduce(function(e,t){var r=parseInt(t);return a[t].forEach(function(t){(0,o.default)(t).forEach(function(a){e[a]=e[a]||[],t[a]&&-1===e[a].indexOf(r)&&e[a].push(r)})}),e},{}):null},allIndicatorsByYear:function(e){return e._col_indicators?e._col_indicators.reduce(function(e,t){return t.year?(e[t.year]=e[t.year]||[],e[t.year].push(b(t)),e):e},{}):null},allIndicatorsByArea:function(e){return e._col_indicators?e._col_indicators.reduce(function(e,t){return t.areaCode?(e[t.areaCode]=e[t.areaCode]||[],e[t.areaCode].push(b(t)),e):e},{}):null},allIndicatorsByAreaYear:function(e){return e._col_indicators?e._col_indicators.reduce(function(e,t){return t.areaCode?(e[t.areaCode]=e[t.areaCode]||{},e[t.areaCode][t.year]=b(t),e):e},{}):null},indicatorsForSelectedYear:function(e,t){if(t.allIndicatorsByYear)return t.allIndicatorsByYear[e.year]},indicatorsForSelectedArea:function(e,t){if(t.allIndicatorsByArea&&t.allIndicatorsByArea[e.neighbourhood])return t.allIndicatorsByArea[e.neighbourhood].sort(function(e,t){return e.year-t.year})},selectedIndicator:function(e,t){return x.getNested([e.neighbourhood,e.year],t.allIndicatorsByAreaYear)},featuresBySelectedArea:function(e){return(0,o.default)(e._col_features).reduce(function(t,a){return t[a]=e._col_features[a][e.neighbourhood],t},{})},selectedFeatures:function(e,a){var r=void 0;return"indicatorSections"===e.mode?r=a.selectedIndicatorSection?a.selectedIndicatorSection.geodata:null:"layers"===e.mode&&(r=[e._col_layers_selected]),r&&r[0]?r.map(function(a){var r=e._col_features[a];return r?r.map(function(e){return e.feature}):[e._col_features,a,e._col_features[a],(0,o.default)(e._col_features),(0,t.default)(e._col_features)]}):null},nestedAttributes:function(e){return function(t,a){var r=e._col_layers.map(function(e){return(0,i.default)({},e)});if("features"!==e.tab){var n=e._col_areaLayers.filter(function(t){return t._id===e._col_areaLayers_selected});r=r.concat(n)}var o=r.reduce(function(e,t){return e[t._id]=t,e},{});if("Map"===a.type)return r.reduce(function(e,t){return e.push({name:t.text_en,value:t._id}),e},[]);var s=e._col_indicatorAttributes.map(function(e){return(0,i.default)({},e,{func:["%%%"]})}),l=e._col_layerCalcs.map(function(e){return(0,i.default)({},e,{func:["%%%"]})}),c=e._col_layerAttributes.concat(s).concat(l);console.log("options attrs",c);var u=r.map(function(e){return e._id});return c.reduce(function(e,t){var a=u.indexOf(t.layer),r=u[a];return 0!==t.func.length&&r?(e[r]=e[r]||{name:o[r].text_en||o[r].name,items:[]},t.func.forEach(function(a){a&&e[r].items.push((t.name+"."+a).replace(".%%%",""))}),e):e},{})}},collectionSchema:function(e){return function(t,a){var n=(0,i.default)({},g[t]);if("string"==typeof n.schema){var o=e["_col_"+n.schema].filter(function(t){return t.layer===e["_col_"+a+"_selected"]}),s=g[n.schema].translate;n.schema=(0,r.default)(o).reduce(function(t,a){return s&&s.forEach(function(t){a[t]=a[t+"_"+e.language]}),a._text=a._text||a.name,t[a.name]=a,t},{}),console.log("collectionSchema translate",s)}return console.log("collectionSchema",n),n||{}}},getSelected:function(e){return function(t){var a=e["_col_"+t+"_selected"];return e["_col_"+t].filter(function(e){return e._id===a})[0]||{}}},surveyRecordsByFeature:function(e){return e._col_surveyRecords[e._col_surveyLayers_selected]?e._col_surveyRecords[e._col_surveyLayers_selected].reduce(function(e,t){return e[t.linkedFeature]=e[t.linkedFeature]||[],e[t.linkedFeature].push(t),e},{}):null}}});new s.default({router:c.default,store:S,render:function(e){return e(l.default)}}).$mount("#app")}).call(this,a(14))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(197),n=a(74);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(556);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/App.vue",t.default=s.exports},function(e,t,a){e.exports=a.p+"static/img/ejmap-logo.defd5c5.svg"},,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(203),n=a(78);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="public/Vue2LeafletVectorGridProtobuf.vue",t.default=s.exports},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(454),i=(r=n)&&r.__esModule?r:{default:r};(0,i.default)({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.4},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.4},landcover:{fill:!0,weight:1,fillColor:"#53e033",color:"#53e033",fillOpacity:.1,opacity:.4},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.2,opacity:.4},park:{fill:!0,weight:1,fillColor:"#84ea5b",color:"#84ea5b",fillOpacity:.2,opacity:.4},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.2,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.2,opacity:.8}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.8}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#f2b648",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[]);var o=(0,i.default)({water:{fill:!0,weight:1,fillColor:"#06cccc",color:"#06cccc",fillOpacity:.2,opacity:.2},admin:[],waterway:{weight:1,fillColor:"#2375e0",color:"#2375e0",fillOpacity:.2,opacity:.2},landcover:{fill:!0,weight:1,fillColor:"#fafafa",color:"#fafafa",fillOpacity:.1,opacity:.2},landuse:{fill:!0,weight:1,fillColor:"#efe6f2",color:"#efe6f2",fillOpacity:.1,opacity:.2},park:{fill:!0,weight:1,fillColor:"#f3f3f3",color:"#f3f3f3",fillOpacity:.1,opacity:.2},boundary:function(){return 1==arguments[0].disputed?{weight:3,fillColor:"red",color:"red",fillOpacity:.1,opacity:.8}:4==arguments[0].admin_level?{weight:2,fillColor:"pink",color:"pink",fillOpacity:.1,opacity:.4}:arguments[0].admin_level<4?{weight:3,fillColor:"#999",color:"#999",fillOpacity:.1,opacity:.4}:[]},aeroway:{weight:1,fillColor:"#51aeb5",color:"#51aeb5",fillOpacity:.2,opacity:.4},road:{weight:1,fillColor:"#999",color:"#999",fillOpacity:.2,opacity:.4},tunnel:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},bridge:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transportation:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},transit:{weight:.5,fillColor:"#f2b648",color:"#999",fillOpacity:.2,opacity:.4},building:{fill:!0,weight:.5,fillColor:"#999",color:"#999",fillOpacity:.4,opacity:.8},water_name:[],transportation_name:[],place:[],housenumber:[],poi:[],earth:[],country_label:[],marine_label:[],state_label:[],place_label:[],waterway_label:[],poi_label:[],road_label:[],housenum_label:[],country_name:[],marine_name:[],state_name:[],place_name:[],waterway_name:[],poi_name:[],road_name:[],housenum_name:[],mountain_peak:[]},"poi_name",[]);t.default=o},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";e.exports=[{params:"/:query",name:"find",method:"get"},{params:"/:key",name:"distinct",method:"get"},{params:"",name:"create",auth:!0,method:"post",middleware:"formidable"},{params:"/:id",name:"del",auth:!0,method:"post"},{params:"/:params",name:"update",auth:!0,method:"post"},{params:"/:areaLayerId",name:"updateAnalysis",auth:!0,method:"post",restrict:["features"]},{params:"",name:"updateMany",auth:!0,method:"post",middleware:"formidable"},{params:"",name:"deleteMany",auth:!0,method:"post",middleware:""}]},,,,,function(e,t,a){"use strict";a.r(t);var r=a(200),n=a(80);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(483);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/MapLegend.vue",t.default=s.exports},function(e,t,a){"use strict";var r=a(82);a.n(r).a},function(e,t,a){"use strict";var r=a(85);a.n(r).a},function(e,t,a){"use strict";a.r(t);var r=a(206),n=a(88);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Calculator.vue",t.default=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r,n=a(548),i=(r=n)&&r.__esModule?r:{default:r};e.exports=function e(t){console.log("finding center of coords",t,t.length);var a=0,r=0,n=0,o=!0,s=!1,l=void 0;try{for(var c,u=(0,i.default)(t);!(o=(c=u.next()).done);o=!0){var d=c.value;console.log("coord",d),Array.isArray(d[0])&&(d=e(d));var f=d[1]*Math.PI/180,p=d[0]*Math.PI/180;a+=Math.cos(f)*Math.cos(p),r+=Math.cos(f)*Math.sin(p),n+=Math.sin(f)}}catch(e){s=!0,l=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}var h=t.length;a/=h,r/=h,n/=h;var v=Math.atan2(r,a),m=Math.sqrt(a*a+r*r),y=Math.atan2(n,m);return[180*v/Math.PI,180*y/Math.PI]}},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(70),n=a(73),i=n.mixins.reactiveProp;t.default={extends:n.Line,mixins:[r.chart,i],mounted:function(){this.options.scales.xAxes[0].scaleLabel={fontSize:7,lineHeight:.8,padding:0},this.options.scales.xAxes[0].time={bounds:"ticks",source:"auto",stepSize:5,tooltipFormat:"MMM YYYY"},this.options.title.display=!1,this.options.scales.xAxes[0].position="top",this.options.scales.xAxes[0].type="time",this.options.scales.xAxes[0].distribution="linear",this.options.scales.xAxes[0].ticks.display=!0,this.options.scales.xAxes[0].gridLines.display=!0,this.options.animation=!1,this.renderChart(this.chartData,this.options)}}},,function(e,t,a){var r={"./af":266,"./af.js":266,"./ar":267,"./ar-dz":268,"./ar-dz.js":268,"./ar-kw":269,"./ar-kw.js":269,"./ar-ly":270,"./ar-ly.js":270,"./ar-ma":271,"./ar-ma.js":271,"./ar-sa":272,"./ar-sa.js":272,"./ar-tn":273,"./ar-tn.js":273,"./ar.js":267,"./az":274,"./az.js":274,"./be":275,"./be.js":275,"./bg":276,"./bg.js":276,"./bm":277,"./bm.js":277,"./bn":278,"./bn.js":278,"./bo":279,"./bo.js":279,"./br":280,"./br.js":280,"./bs":281,"./bs.js":281,"./ca":282,"./ca.js":282,"./cs":283,"./cs.js":283,"./cv":284,"./cv.js":284,"./cy":285,"./cy.js":285,"./da":286,"./da.js":286,"./de":287,"./de-at":288,"./de-at.js":288,"./de-ch":289,"./de-ch.js":289,"./de.js":287,"./dv":290,"./dv.js":290,"./el":291,"./el.js":291,"./en-SG":292,"./en-SG.js":292,"./en-au":293,"./en-au.js":293,"./en-ca":294,"./en-ca.js":294,"./en-gb":295,"./en-gb.js":295,"./en-ie":296,"./en-ie.js":296,"./en-il":297,"./en-il.js":297,"./en-nz":298,"./en-nz.js":298,"./eo":299,"./eo.js":299,"./es":300,"./es-do":301,"./es-do.js":301,"./es-us":302,"./es-us.js":302,"./es.js":300,"./et":303,"./et.js":303,"./eu":304,"./eu.js":304,"./fa":305,"./fa.js":305,"./fi":306,"./fi.js":306,"./fo":307,"./fo.js":307,"./fr":308,"./fr-ca":309,"./fr-ca.js":309,"./fr-ch":310,"./fr-ch.js":310,"./fr.js":308,"./fy":311,"./fy.js":311,"./ga":312,"./ga.js":312,"./gd":313,"./gd.js":313,"./gl":314,"./gl.js":314,"./gom-latn":315,"./gom-latn.js":315,"./gu":316,"./gu.js":316,"./he":317,"./he.js":317,"./hi":318,"./hi.js":318,"./hr":319,"./hr.js":319,"./hu":320,"./hu.js":320,"./hy-am":321,"./hy-am.js":321,"./id":322,"./id.js":322,"./is":323,"./is.js":323,"./it":324,"./it-ch":325,"./it-ch.js":325,"./it.js":324,"./ja":326,"./ja.js":326,"./jv":327,"./jv.js":327,"./ka":328,"./ka.js":328,"./kk":329,"./kk.js":329,"./km":330,"./km.js":330,"./kn":331,"./kn.js":331,"./ko":332,"./ko.js":332,"./ku":333,"./ku.js":333,"./ky":334,"./ky.js":334,"./lb":335,"./lb.js":335,"./lo":336,"./lo.js":336,"./lt":337,"./lt.js":337,"./lv":338,"./lv.js":338,"./me":339,"./me.js":339,"./mi":340,"./mi.js":340,"./mk":341,"./mk.js":341,"./ml":342,"./ml.js":342,"./mn":343,"./mn.js":343,"./mr":344,"./mr.js":344,"./ms":345,"./ms-my":346,"./ms-my.js":346,"./ms.js":345,"./mt":347,"./mt.js":347,"./my":348,"./my.js":348,"./nb":349,"./nb.js":349,"./ne":350,"./ne.js":350,"./nl":351,"./nl-be":352,"./nl-be.js":352,"./nl.js":351,"./nn":353,"./nn.js":353,"./pa-in":354,"./pa-in.js":354,"./pl":355,"./pl.js":355,"./pt":356,"./pt-br":357,"./pt-br.js":357,"./pt.js":356,"./ro":358,"./ro.js":358,"./ru":359,"./ru.js":359,"./sd":360,"./sd.js":360,"./se":361,"./se.js":361,"./si":362,"./si.js":362,"./sk":363,"./sk.js":363,"./sl":364,"./sl.js":364,"./sq":365,"./sq.js":365,"./sr":366,"./sr-cyrl":367,"./sr-cyrl.js":367,"./sr.js":366,"./ss":368,"./ss.js":368,"./sv":369,"./sv.js":369,"./sw":370,"./sw.js":370,"./ta":371,"./ta.js":371,"./te":372,"./te.js":372,"./tet":373,"./tet.js":373,"./tg":374,"./tg.js":374,"./th":375,"./th.js":375,"./tl-ph":376,"./tl-ph.js":376,"./tlh":377,"./tlh.js":377,"./tr":378,"./tr.js":378,"./tzl":379,"./tzl.js":379,"./tzm":380,"./tzm-latn":381,"./tzm-latn.js":381,"./tzm.js":380,"./ug-cn":382,"./ug-cn.js":382,"./uk":383,"./uk.js":383,"./ur":384,"./ur.js":384,"./uz":385,"./uz-latn":386,"./uz-latn.js":386,"./uz.js":385,"./vi":387,"./vi.js":387,"./x-pseudo":388,"./x-pseudo.js":388,"./yo":389,"./yo.js":389,"./zh-cn":390,"./zh-cn.js":390,"./zh-hk":391,"./zh-hk.js":391,"./zh-tw":392,"./zh-tw.js":392};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=553},function(e,t,a){"use strict";var r=a(96);a.n(r).a},function(e,t,a){"use strict";a.r(t);var r=a(187),n=a(97);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Viewer.vue",t.default=s.exports},function(e,t,a){"use strict";var r=a(99);a.n(r).a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(a(34)),n=f(a(558)),i=f(a(559)),o=f(a(571)),s=f(a(573)),l=f(a(181)),c=f(a(574)),u=f(a(578)),d=f(a(579));function f(e){return e&&e.__esModule?e:{default:e}}"http://localhost:8080"===window.location.origin||window.location.origin;console.log("routing from",{redirect_uri:window.location.origin+"/implicit/callback"}),r.default.use(u.default,{client_id:"0oafa51gkZcH6RVN4356",issuer:"https://dev-160658.okta.com/oauth2/default",redirect_uri:window.location.origin+"/implicit/callback",scope:"openid profile email groups",response_type:"id_token"}),r.default.use(n.default);var p=new n.default({mode:"history",routes:[{path:"/",component:i.default},{path:"/upload",component:l.default,meta:{requiresAuth:!0}},{path:"/manage",component:c.default,meta:{requiresAuth:!0}},{path:"/map",component:s.default},{path:"/indicators",component:i.default},{path:"/reports",component:o.default},{path:"/implicit/callback",component:u.default.handleCallback()},{path:"/help",component:d.default}]});p.beforeEach(r.default.prototype.$auth.authRedirectGuard()),t.default=p},,function(e,t,a){"use strict";a.r(t);var r=a(186),n=a(100);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(570);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/IndicatorsNew.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(204),n=a(104);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(561);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/ComparativeChart.vue",t.default=s.exports},function(e,t,a){"use strict";var r=a(106);a.n(r).a},function(e,t,a){"use strict";var r=a(107);a.n(r).a},,,function(e,t,a){"use strict";var r=a(112);a.n(r).a},,function(e,t,a){"use strict";var r=a(117);a.n(r).a},function(e,t,a){"use strict";a.r(t);var r=a(205),n=a(120);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/PieChart.vue",t.default=s.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(30),i=(r=n)&&r.__esModule?r:{default:r},o=a(70),s=a(73);var l=s.mixins.reactiveProp;t.default={extends:s.Doughnut,mixins:[l,o.chart],mounted:function(){(0,i.default)(this.options,{layout:{padding:{top:100,right:30}}});this.renderChart(this.chartData,this.options)}}},function(e,t,a){"use strict";var r=a(122);a.n(r).a},function(e,t,a){"use strict";a.r(t);var r=a(199),n=a(123);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(572);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/IndicatorsReport.vue",t.default=s.exports},function(e,t,a){"use strict";var r=a(125);a.n(r).a},function(e,t,a){"use strict";a.r(t);var r=a(194),n=a(126);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/MapFull.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(184),n=a(128);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);a(577);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/ManageDataMaster.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(182),n=a(130);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Analysis.vue",t.default=s.exports},function(e,t,a){"use strict";a.r(t);var r=a(193),n=a(132);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/DeleteAll.vue",t.default=s.exports},function(e,t,a){"use strict";var r=a(134);a.n(r).a},,function(e,t,a){"use strict";a.r(t);var r=a(183),n=a(135);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);var o=a(2),s=Object(o.a)(n.default,r.a,r.b,!1,null,null,null);s.options.__file="src/components/Help.vue",t.default=s.exports},,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var r,n=a(25),i=(r=n)&&r.__esModule?r:{default:r};t.theme={primary:i.default.orange.base,secondary:i.default.grey.lighten3,tertiary:i.default.blue.base,error:i.default.red.base,background:"#f8f9fa",scaleMin:"#ff267e",scaleMax:"#267eff",grey:i.default.grey.base,borderColor:"#e3e3e3"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.featureAnalysis=function(){return{sum:function(e,t){return e.reduce(function(e,a){if(!a.feature.properties.mygeodat_5)return e;var r=a.feature.properties;return["total",a.feature.properties.mygeodat_5.toString()].forEach(function(a){e[a]=e[a]||{},e[a].types=e[a].types||{},t.forEach(function(t){"string"==typeof r[t]?e[a].types[r[t]]=e[a].types[r[t]]?e[a].types[r[t]]+1:1:e[a][t]=e[a][t]?e[a][t]+parseInt(r[t]):r[t]||0})}),e},{})}}}}]));